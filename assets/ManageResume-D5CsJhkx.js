import{r as d,j as e,L as P,B as v,Q as R,P as y,e as $,M as E,w as L,i as c}from"./index-DMZrmf-R.js";const o="http://localhost:5000/api",M=()=>{const[f,x]=d.useState([]),[w,b]=d.useState(!0),[j,i]=d.useState(null),[h,k]=d.useState(!1),[m,g]=d.useState(!1),[r,N]=d.useState(null),[F,p]=d.useState(null);d.useEffect(()=>{(async()=>{try{b(!0);const{data:a}=await c.get(`${o}/resume/all`);a.success&&x(a.resumes)}catch(a){console.error("Error fetching resumes:",a),i("Failed to load resumes. Please try again later.")}finally{b(!1)}})()},[]);const D=t=>{t.target.files.length>0&&N(t.target.files[0])},S=async t=>{var a,l;if(t.preventDefault(),!r){i("Please select a PDF file to upload");return}if(r.type!=="application/pdf"){i("Only PDF files are allowed");return}try{k(!0),i(null);const s=new FormData;if(s.append("resume",r),(await c.post(`${o}/resume/upload`,s,{headers:{"Content-Type":"multipart/form-data"}})).data.success){const{data:n}=await c.get(`${o}/resume/all`);x(n.resumes),N(null),document.getElementById("resume-file").value=""}}catch(s){console.error("Error uploading resume:",s),i(((l=(a=s.response)==null?void 0:a.data)==null?void 0:l.message)||"Failed to upload resume. Please try again.")}finally{k(!1)}},A=async t=>{var a,l;try{g(!0),(await c.put(`${o}/resume/activate/${t}`)).data.success&&x(u=>u.map(n=>({...n,isActive:n._id===t})))}catch(s){console.error("Error setting active resume:",s),i(((l=(a=s.response)==null?void 0:a.data)==null?void 0:l.message)||"Failed to set active resume. Please try again.")}finally{g(!1)}},C=async t=>{var a,l;try{g(!0),(await c.delete(`${o}/resume/${t}`)).data.success&&x(u=>u.filter(n=>n._id!==t))}catch(s){console.error("Error deleting resume:",s),i(((l=(a=s.response)==null?void 0:a.data)==null?void 0:l.message)||"Failed to delete resume. Please try again.")}finally{p(null),g(!1)}},U=t=>{const a={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(t).toLocaleDateString(void 0,a)};return w?e.jsx(P,{}):e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:"Manage Resume"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Upload and manage your resume files"}),j&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 p-4 rounded-lg mb-6",children:e.jsx("p",{children:j})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200",children:"Upload New Resume"}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx(v,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Upload a PDF file of your resume"})]}),e.jsx("input",{type:"file",id:"resume-file",accept:"application/pdf",onChange:D,className:"block w-full text-sm text-gray-900 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-blue-50 dark:file:bg-blue-900/20 file:text-blue-700 dark:file:text-blue-300 hover:file:bg-blue-100 dark:hover:file:bg-blue-800/30"}),r&&e.jsxs("p",{className:"mt-2 text-sm text-green-600 dark:text-green-400",children:["Selected file: ",r.name," (",Math.round(r.size/1024)," KB)"]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:!r||h,className:`btn btn-primary ${!r||h?"opacity-70 cursor-not-allowed":""}`,children:h?"Uploading...":e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"mr-2"})," Upload Resume"]})})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[e.jsx("h2",{className:"text-xl font-semibold p-6 border-b border-gray-200 dark:border-gray-700 text-gray-800 dark:text-gray-200",children:"Resume History"}),f.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Filename"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Uploaded At"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:f.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-750",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{className:"flex-shrink-0 h-5 w-5 text-gray-500 dark:text-gray-400 mr-3"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.filename})]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 dark:text-gray-400",children:U(t.createdAt)}),e.jsx("td",{className:"px-4 py-4",children:t.isActive?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400",children:[e.jsx(y,{className:"mr-1"})," Active"]}):e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Inactive"})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("a",{href:`${o}${t.path}`,download:!0,className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300","aria-label":"Download resume",children:e.jsx($,{})}),!t.isActive&&e.jsx("button",{onClick:()=>A(t._id),disabled:m,className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300","aria-label":"Set as active resume",children:e.jsx(y,{})}),!t.isActive&&e.jsx("button",{onClick:()=>p(t._id),disabled:m,className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300","aria-label":"Delete resume",children:e.jsx(E,{})})]}),F===t._id&&e.jsxs("div",{className:"mt-2 bg-red-50 dark:bg-red-900/20 p-2 rounded text-left",children:[e.jsx("p",{className:"text-xs text-red-700 dark:text-red-400 mb-2",children:"Are you sure you want to delete this resume?"}),e.jsxs("div",{className:"flex space-x-2 justify-end",children:[e.jsxs("button",{onClick:()=>p(null),className:"px-2 py-1 text-xs bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:[e.jsx(L,{className:"inline mr-1"})," Cancel"]}),e.jsxs("button",{onClick:()=>C(t._id),className:"px-2 py-1 text-xs bg-red-500 text-white rounded hover:bg-red-600",disabled:m,children:[e.jsx(y,{className:"inline mr-1"})," ",m?"Deleting...":"Confirm"]})]})]})]})]},t._id))})]})}):e.jsx("div",{className:"p-6 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No resumes uploaded yet. Use the form above to upload your first resume."})})]})]})};export{M as default};
//# sourceMappingURL=ManageResume-D5CsJhkx.js.map
