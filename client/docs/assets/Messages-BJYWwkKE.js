import{r as l,j as e,L as M,o as n,S as E,M as C,w as O,P as U,i as p}from"./index-8Mfrto6g.js";const g="http://localhost:5000/api",_=()=>{const[t,m]=l.useState([]),[D,N]=l.useState(!0),[v,x]=l.useState(null),[r,d]=l.useState(null),[h,c]=l.useState(null),[u,o]=l.useState(!1);l.useEffect(()=>{(async()=>{try{N(!0);const{data:i}=await p.get(`${g}/contact`);i.success&&m(i.contacts)}catch(i){console.error("Error fetching messages:",i),x("Failed to load messages. Please try again later.")}finally{N(!1)}})()},[]);const j=async s=>{if(d(s),!s.isRead)try{o(!0),(await p.put(`${g}/contact/${s._id}/read`)).data.success&&(m(t.map(a=>a._id===s._id?{...a,isRead:!0}:a)),d(a=>({...a,isRead:!0})))}catch(i){console.error("Error marking message as read:",i)}finally{o(!1)}},k=async s=>{var i,a;try{o(!0),(await p.delete(`${g}/contact/${s}`)).data.success&&(m(w=>w.filter(y=>y._id!==s)),r&&r._id===s&&d(null))}catch(b){console.error("Error deleting message:",b),x(((a=(i=b.response)==null?void 0:i.data)==null?void 0:a.message)||"Failed to delete message. Please try again.")}finally{c(null),o(!1)}},f=s=>{const i={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(s).toLocaleDateString(void 0,i)};return D?e.jsxDEV(M,{},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:96,columnNumber:23},void 0):e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:"Messages"},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:100,columnNumber:7},void 0),e.jsxDEV("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Manage contact form submissions"},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:103,columnNumber:7},void 0),v&&e.jsxDEV("div",{className:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 p-4 rounded-lg mb-6",children:e.jsxDEV("p",{children:v},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:110,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:109,columnNumber:9},void 0),t.length>0?e.jsxDEV("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxDEV("div",{className:"w-full md:w-1/3 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[e.jsxDEV("h2",{className:"p-4 border-b border-gray-200 dark:border-gray-700 font-medium text-gray-800 dark:text-gray-200",children:["All Messages (",t.length,")"]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:118,columnNumber:13},void 0),e.jsxDEV("div",{className:"overflow-y-auto max-h-[600px]",children:t.map(s=>e.jsxDEV("div",{onClick:()=>j(s),className:`p-4 border-b border-gray-200 dark:border-gray-700 cursor-pointer transition-colors duration-200 ${r&&r._id===s._id?"bg-blue-50 dark:bg-blue-900/20":"hover:bg-gray-50 dark:hover:bg-gray-750"} ${s.isRead?"":"bg-blue-50 dark:bg-blue-900/10"}`,children:e.jsxDEV("div",{className:"flex items-start gap-3",children:[e.jsxDEV("div",{className:`mt-1 ${s.isRead?"text-gray-400 dark:text-gray-500":"text-blue-500"}`,children:s.isRead?e.jsxDEV(E,{},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:137,columnNumber:59},void 0):e.jsxDEV(n,{},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:137,columnNumber:42},void 0)},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:136,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex-grow min-w-0",children:[e.jsxDEV("div",{className:"flex justify-between items-start",children:[e.jsxDEV("h3",{className:`font-medium truncate ${s.isRead?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"}`,children:s.name},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:142,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap ml-2",children:f(s.createdAt).split(",")[0]},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:145,columnNumber:25},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:141,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:s.email},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:150,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:s.message},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:154,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:140,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:135,columnNumber:19},void 0)},s._id,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:124,columnNumber:17},void 0))},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:122,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:117,columnNumber:11},void 0),e.jsxDEV("div",{className:"w-full md:w-2/3 bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:r?e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[e.jsxDEV("h2",{className:"text-xl font-medium text-gray-800 dark:text-gray-200",children:["Message from ",r.name]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:169,columnNumber:19},void 0),e.jsxDEV("button",{onClick:()=>c(r._id),disabled:u,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300","aria-label":"Delete message",children:e.jsxDEV(C,{},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:179,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:173,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:168,columnNumber:17},void 0),h===r._id&&e.jsxDEV("div",{className:"m-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg text-sm",children:[e.jsxDEV("p",{className:"text-red-700 dark:text-red-400 mb-2",children:"Are you sure you want to delete this message?"},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:185,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex justify-end space-x-2",children:[e.jsxDEV("button",{onClick:()=>c(null),className:"px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:[e.jsxDEV(O,{className:"inline mr-1"},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:193,columnNumber:25},void 0)," Cancel"]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:189,columnNumber:23},void 0),e.jsxDEV("button",{onClick:()=>k(r._id),className:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600",disabled:u,children:[e.jsxDEV(U,{className:"inline mr-1"},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:200,columnNumber:25},void 0)," ",u?"Deleting...":"Confirm"]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:195,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:188,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:184,columnNumber:19},void 0),e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"From:"},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:208,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsxDEV("p",{className:"font-medium text-gray-900 dark:text-white",children:r.name},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:210,columnNumber:23},void 0),e.jsxDEV("p",{className:"text-blue-600 dark:text-blue-400",children:["<",r.email,">"]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:211,columnNumber:23},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:209,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:207,columnNumber:19},void 0),e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Date:"},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:216,columnNumber:21},void 0),e.jsxDEV("p",{className:"text-gray-700 dark:text-gray-300",children:f(r.createdAt)},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:217,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:215,columnNumber:19},void 0),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Message:"},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:221,columnNumber:21},void 0),e.jsxDEV("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg whitespace-pre-wrap text-gray-700 dark:text-gray-300",children:r.message},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:222,columnNumber:21},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:220,columnNumber:19},void 0),e.jsxDEV("div",{className:"mt-6",children:e.jsxDEV("a",{href:`mailto:${r.email}?subject=Re: Your message on my portfolio website`,className:"btn btn-primary px-4 py-2 inline-flex items-center gap-2",children:[e.jsxDEV(n,{},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:232,columnNumber:23},void 0)," Reply via Email"]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:228,columnNumber:21},void 0)},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:227,columnNumber:19},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:206,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:167,columnNumber:15},void 0):e.jsxDEV("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:[e.jsxDEV(n,{className:"w-12 h-12 mx-auto mb-4 opacity-30"},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:239,columnNumber:17},void 0),e.jsxDEV("p",{children:"Select a message to view its contents"},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:240,columnNumber:17},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:238,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:165,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:115,columnNumber:9},void 0):e.jsxDEV("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 text-center",children:[e.jsxDEV(n,{className:"w-12 h-12 mx-auto mb-4 text-gray-300 dark:text-gray-600"},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:247,columnNumber:11},void 0),e.jsxDEV("h2",{className:"text-xl font-medium text-gray-800 dark:text-gray-200 mb-2",children:"No Messages Yet"},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:248,columnNumber:11},void 0),e.jsxDEV("p",{className:"text-gray-600 dark:text-gray-400",children:"There are no messages in your inbox. When visitors submit the contact form, their messages will appear here."},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:249,columnNumber:11},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:246,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/admin/Messages.jsx",lineNumber:99,columnNumber:5},void 0)};export{_ as default};
//# sourceMappingURL=Messages-BJYWwkKE.js.map
