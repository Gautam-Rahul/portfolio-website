var Jn=Object.defineProperty;var mn=P=>{throw TypeError(P)};var Qn=(P,t,k)=>t in P?Jn(P,t,{enumerable:!0,configurable:!0,writable:!0,value:k}):P[t]=k;var Je=(P,t,k)=>Qn(P,typeof t!="symbol"?t+"":t,k),Dt=(P,t,k)=>t.has(P)||mn("Cannot "+k);var e=(P,t,k)=>(Dt(P,t,"read from private field"),k?k.call(P):t.get(P)),oe=(P,t,k)=>t.has(P)?mn("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(P):t.set(P,k),ce=(P,t,k,n)=>(Dt(P,t,"write to private field"),n?n.call(P,k):t.set(P,k),k),ee=(P,t,k)=>(Dt(P,t,"access private method"),k);var ut=(P,t,k,n)=>({set _(c){ce(P,t,c,k)},get _(){return e(P,t,n)}});import{g as getAugmentedNamespace,d as getDefaultExportFromCjs,r as reactExports,R as React,j as jsxDevRuntimeExports,L as Loader,e as FaDownload,f as FaArrowLeft,h as FaArrowRight,i as axios}from"./index-8Mfrto6g.js";function _mergeNamespaces(P,t){for(var k=0;k<t.length;k++){const n=t[k];if(typeof n!="string"&&!Array.isArray(n)){for(const c in n)if(c!=="default"&&!(c in P)){const q=Object.getOwnPropertyDescriptor(n,c);q&&Object.defineProperty(P,c,q.get?q:{enumerable:!0,get:()=>n[c]})}}}return Object.freeze(Object.defineProperty(P,Symbol.toStringTag,{value:"Module"}))}function commonjsRequire(P){throw new Error('Could not dynamically require "'+P+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal=new Proxy({},{get(P,t){throw new Error(`Module "" has been externalized for browser compatibility. Cannot access ".${t}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,k){module.exports=t.pdfjsLib=k()})(globalThis,()=>(()=>{var __webpack_modules__=[,(P,t)=>{var Xe;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=T,t.bytesToString=de,t.createValidAbsoluteUrl=Y,t.getModificationDate=we,t.getUuid=Ie,t.getVerbosityLevel=V,t.info=X,t.isArrayBuffer=ie,t.isArrayEqual=Pe,t.isNodeJS=void 0,t.normalizeUnicode=Fe,t.objectFromMap=_e,t.objectSize=me,t.setVerbosityLevel=z,t.shadow=E,t.string32=ye,t.stringToBytes=te,t.stringToPDFString=ge,t.stringToUTF8String=Se,t.unreachable=Q,t.utf8StringToString=Ae,t.warn=W;const k=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=k;const n=[1,0,0,1,0,0];t.IDENTITY_MATRIX=n;const c=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=c;const q=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=q;const $=1.35;t.LINE_FACTOR=$;const he=.35;t.LINE_DESCENT_FACTOR=he;const C=he/$;t.BASELINE_FACTOR=C;const x={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=x;const m={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=m;const j="pdfjs_internal_editor_";t.AnnotationEditorPrefix=j;const U={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=U;const v={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=v;const y={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=y;const R={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=R;const b={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=b;const f={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=f;const A={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=A;const O={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=O;const _={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=_;const o={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=o;const d={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=d;const l={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=l;const h={O:"PageOpen",C:"PageClose"};t.PageActionEventType=h;const u={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=u;const I={NONE:0,BINARY:1};t.CMapCompressionType=I;const a={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=a;const w={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=w;let g=u.WARNINGS;function z(Ee){Number.isInteger(Ee)&&(g=Ee)}function V(){return g}function X(Ee){g>=u.INFOS&&console.log(`Info: ${Ee}`)}function W(Ee){g>=u.WARNINGS&&console.log(`Warning: ${Ee}`)}function Q(Ee){throw new Error(Ee)}function T(Ee,le){Ee||Q(le)}function H(Ee){switch(Ee==null?void 0:Ee.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Y(Ee,le=null,ue=null){if(!Ee)return null;try{if(ue&&typeof Ee=="string"){if(ue.addDefaultProtocol&&Ee.startsWith("www.")){const qe=Ee.match(/\./g);(qe==null?void 0:qe.length)>=2&&(Ee=`http://${Ee}`)}if(ue.tryConvertEncoding)try{Ee=Se(Ee)}catch{}}const ke=le?new URL(Ee,le):new URL(Ee);if(H(ke))return ke}catch{}return null}function E(Ee,le,ue,ke=!1){return Object.defineProperty(Ee,le,{value:ue,enumerable:!ke,configurable:!0,writable:!1}),ue}const s=function(){function le(ue,ke){this.constructor===le&&Q("Cannot initialize BaseException."),this.message=ue,this.name=ke}return le.prototype=new Error,le.constructor=le,le}();t.BaseException=s;class i extends s{constructor(le,ue){super(le,"PasswordException"),this.code=ue}}t.PasswordException=i;class p extends s{constructor(le,ue){super(le,"UnknownErrorException"),this.details=ue}}t.UnknownErrorException=p;class M extends s{constructor(le){super(le,"InvalidPDFException")}}t.InvalidPDFException=M;class L extends s{constructor(le){super(le,"MissingPDFException")}}t.MissingPDFException=L;class N extends s{constructor(le,ue){super(le,"UnexpectedResponseException"),this.status=ue}}t.UnexpectedResponseException=N;class J extends s{constructor(le){super(le,"FormatError")}}t.FormatError=J;class re extends s{constructor(le){super(le,"AbortException")}}t.AbortException=re;function de(Ee){(typeof Ee!="object"||(Ee==null?void 0:Ee.length)===void 0)&&Q("Invalid argument for bytesToString");const le=Ee.length,ue=8192;if(le<ue)return String.fromCharCode.apply(null,Ee);const ke=[];for(let qe=0;qe<le;qe+=ue){const Ve=Math.min(qe+ue,le),G=Ee.subarray(qe,Ve);ke.push(String.fromCharCode.apply(null,G))}return ke.join("")}function te(Ee){typeof Ee!="string"&&Q("Invalid argument for stringToBytes");const le=Ee.length,ue=new Uint8Array(le);for(let ke=0;ke<le;++ke)ue[ke]=Ee.charCodeAt(ke)&255;return ue}function ye(Ee){return String.fromCharCode(Ee>>24&255,Ee>>16&255,Ee>>8&255,Ee&255)}function me(Ee){return Object.keys(Ee).length}function _e(Ee){const le=Object.create(null);for(const[ue,ke]of Ee)le[ue]=ke;return le}function ne(){const Ee=new Uint8Array(4);return Ee[0]=1,new Uint32Array(Ee.buffer,0,1)[0]===1}function se(){try{return new Function(""),!0}catch{return!1}}class S{static get isLittleEndian(){return E(this,"isLittleEndian",ne())}static get isEvalSupported(){return E(this,"isEvalSupported",se())}static get isOffscreenCanvasSupported(){return E(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?E(this,"platform",{isWin:!1,isMac:!1}):E(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var le,ue;return E(this,"isCSSRoundSupported",(ue=(le=globalThis.CSS)==null?void 0:le.supports)==null?void 0:ue.call(le,"width: round(1.5px, 1px)"))}}t.FeatureTest=S;const B=[...Array(256).keys()].map(Ee=>Ee.toString(16).padStart(2,"0"));class Z{static makeHexColor(le,ue,ke){return`#${B[le]}${B[ue]}${B[ke]}`}static scaleMinMax(le,ue){let ke;le[0]?(le[0]<0&&(ke=ue[0],ue[0]=ue[1],ue[1]=ke),ue[0]*=le[0],ue[1]*=le[0],le[3]<0&&(ke=ue[2],ue[2]=ue[3],ue[3]=ke),ue[2]*=le[3],ue[3]*=le[3]):(ke=ue[0],ue[0]=ue[2],ue[2]=ke,ke=ue[1],ue[1]=ue[3],ue[3]=ke,le[1]<0&&(ke=ue[2],ue[2]=ue[3],ue[3]=ke),ue[2]*=le[1],ue[3]*=le[1],le[2]<0&&(ke=ue[0],ue[0]=ue[1],ue[1]=ke),ue[0]*=le[2],ue[1]*=le[2]),ue[0]+=le[4],ue[1]+=le[4],ue[2]+=le[5],ue[3]+=le[5]}static transform(le,ue){return[le[0]*ue[0]+le[2]*ue[1],le[1]*ue[0]+le[3]*ue[1],le[0]*ue[2]+le[2]*ue[3],le[1]*ue[2]+le[3]*ue[3],le[0]*ue[4]+le[2]*ue[5]+le[4],le[1]*ue[4]+le[3]*ue[5]+le[5]]}static applyTransform(le,ue){const ke=le[0]*ue[0]+le[1]*ue[2]+ue[4],qe=le[0]*ue[1]+le[1]*ue[3]+ue[5];return[ke,qe]}static applyInverseTransform(le,ue){const ke=ue[0]*ue[3]-ue[1]*ue[2],qe=(le[0]*ue[3]-le[1]*ue[2]+ue[2]*ue[5]-ue[4]*ue[3])/ke,Ve=(-le[0]*ue[1]+le[1]*ue[0]+ue[4]*ue[1]-ue[5]*ue[0])/ke;return[qe,Ve]}static getAxialAlignedBoundingBox(le,ue){const ke=this.applyTransform(le,ue),qe=this.applyTransform(le.slice(2,4),ue),Ve=this.applyTransform([le[0],le[3]],ue),G=this.applyTransform([le[2],le[1]],ue);return[Math.min(ke[0],qe[0],Ve[0],G[0]),Math.min(ke[1],qe[1],Ve[1],G[1]),Math.max(ke[0],qe[0],Ve[0],G[0]),Math.max(ke[1],qe[1],Ve[1],G[1])]}static inverseTransform(le){const ue=le[0]*le[3]-le[1]*le[2];return[le[3]/ue,-le[1]/ue,-le[2]/ue,le[0]/ue,(le[2]*le[5]-le[4]*le[3])/ue,(le[4]*le[1]-le[5]*le[0])/ue]}static singularValueDecompose2dScale(le){const ue=[le[0],le[2],le[1],le[3]],ke=le[0]*ue[0]+le[1]*ue[2],qe=le[0]*ue[1]+le[1]*ue[3],Ve=le[2]*ue[0]+le[3]*ue[2],G=le[2]*ue[1]+le[3]*ue[3],be=(ke+G)/2,xe=Math.sqrt((ke+G)**2-4*(ke*G-Ve*qe))/2,Oe=be+xe||1,je=be-xe||1;return[Math.sqrt(Oe),Math.sqrt(je)]}static normalizeRect(le){const ue=le.slice(0);return le[0]>le[2]&&(ue[0]=le[2],ue[2]=le[0]),le[1]>le[3]&&(ue[1]=le[3],ue[3]=le[1]),ue}static intersect(le,ue){const ke=Math.max(Math.min(le[0],le[2]),Math.min(ue[0],ue[2])),qe=Math.min(Math.max(le[0],le[2]),Math.max(ue[0],ue[2]));if(ke>qe)return null;const Ve=Math.max(Math.min(le[1],le[3]),Math.min(ue[1],ue[3])),G=Math.min(Math.max(le[1],le[3]),Math.max(ue[1],ue[3]));return Ve>G?null:[ke,Ve,qe,G]}static bezierBoundingBox(le,ue,ke,qe,Ve,G,be,xe){const Oe=[],je=[[],[]];let Re,D,F,K,fe,pe,ve,Te;for(let $e=0;$e<2;++$e){if($e===0?(D=6*le-12*ke+6*Ve,Re=-3*le+9*ke-9*Ve+3*be,F=3*ke-3*le):(D=6*ue-12*qe+6*G,Re=-3*ue+9*qe-9*G+3*xe,F=3*qe-3*ue),Math.abs(Re)<1e-12){if(Math.abs(D)<1e-12)continue;K=-F/D,0<K&&K<1&&Oe.push(K);continue}ve=D*D-4*F*Re,Te=Math.sqrt(ve),!(ve<0)&&(fe=(-D+Te)/(2*Re),0<fe&&fe<1&&Oe.push(fe),pe=(-D-Te)/(2*Re),0<pe&&pe<1&&Oe.push(pe))}let Le=Oe.length,Me;const Ce=Le;for(;Le--;)K=Oe[Le],Me=1-K,je[0][Le]=Me*Me*Me*le+3*Me*Me*K*ke+3*Me*K*K*Ve+K*K*K*be,je[1][Le]=Me*Me*Me*ue+3*Me*Me*K*qe+3*Me*K*K*G+K*K*K*xe;return je[0][Ce]=le,je[1][Ce]=ue,je[0][Ce+1]=be,je[1][Ce+1]=xe,je[0].length=je[1].length=Ce+2,[Math.min(...je[0]),Math.min(...je[1]),Math.max(...je[0]),Math.max(...je[1])]}}t.Util=Z;const ae=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ge(Ee){if(Ee[0]>="ï"){let ue;if(Ee[0]==="þ"&&Ee[1]==="ÿ"?ue="utf-16be":Ee[0]==="ÿ"&&Ee[1]==="þ"?ue="utf-16le":Ee[0]==="ï"&&Ee[1]==="»"&&Ee[2]==="¿"&&(ue="utf-8"),ue)try{const ke=new TextDecoder(ue,{fatal:!0}),qe=te(Ee);return ke.decode(qe)}catch(ke){W(`stringToPDFString: "${ke}".`)}}const le=[];for(let ue=0,ke=Ee.length;ue<ke;ue++){const qe=ae[Ee.charCodeAt(ue)];le.push(qe?String.fromCharCode(qe):Ee.charAt(ue))}return le.join("")}function Se(Ee){return decodeURIComponent(escape(Ee))}function Ae(Ee){return unescape(encodeURIComponent(Ee))}function ie(Ee){return typeof Ee=="object"&&(Ee==null?void 0:Ee.byteLength)!==void 0}function Pe(Ee,le){if(Ee.length!==le.length)return!1;for(let ue=0,ke=Ee.length;ue<ke;ue++)if(Ee[ue]!==le[ue])return!1;return!0}function we(Ee=new Date){return[Ee.getUTCFullYear().toString(),(Ee.getUTCMonth()+1).toString().padStart(2,"0"),Ee.getUTCDate().toString().padStart(2,"0"),Ee.getUTCHours().toString().padStart(2,"0"),Ee.getUTCMinutes().toString().padStart(2,"0"),Ee.getUTCSeconds().toString().padStart(2,"0")].join("")}class We{constructor(){oe(this,Xe,!1);this.promise=new Promise((le,ue)=>{this.resolve=ke=>{ce(this,Xe,!0),le(ke)},this.reject=ke=>{ce(this,Xe,!0),ue(ke)}})}get settled(){return e(this,Xe)}}Xe=new WeakMap,t.PromiseCapability=We;let Ue=null,ze=null;function Fe(Ee){return Ue||(Ue=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,ze=new Map([["ﬅ","ſt"]])),Ee.replaceAll(Ue,(le,ue,ke)=>ue?ue.normalize("NFKC"):ze.get(ke))}function Ie(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Ee=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Ee);else for(let le=0;le<32;le++)Ee[le]=Math.floor(Math.random()*255);return de(Ee)}const He="pdfjs_internal_id_";t.AnnotationPrefix=He},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var P,k,n,c,at,_t,he,C,x,m,j,U,v,y,R,vt,f,A,Ot,_,o;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(l){if(typeof l=="string"||l instanceof URL?l={url:l}:(0,_util.isArrayBuffer)(l)&&(l={data:l}),typeof l!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!l.url&&!l.data&&!l.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const h=new PDFDocumentLoadingTask,{docId:u}=h,I=l.url?getUrlProp(l.url):null,a=l.data?getDataProp(l.data):null,w=l.httpHeaders||null,g=l.withCredentials===!0,z=l.password??null,V=l.range instanceof PDFDataRangeTransport?l.range:null,X=Number.isInteger(l.rangeChunkSize)&&l.rangeChunkSize>0?l.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let W=l.worker instanceof PDFWorker?l.worker:null;const Q=l.verbosity,T=typeof l.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(l.docBaseUrl)?l.docBaseUrl:null,H=typeof l.cMapUrl=="string"?l.cMapUrl:null,Y=l.cMapPacked!==!1,E=l.CMapReaderFactory||DefaultCMapReaderFactory,s=typeof l.standardFontDataUrl=="string"?l.standardFontDataUrl:null,i=l.StandardFontDataFactory||DefaultStandardFontDataFactory,p=l.stopAtErrors!==!0,M=Number.isInteger(l.maxImageSize)&&l.maxImageSize>-1?l.maxImageSize:-1,L=l.isEvalSupported!==!1,N=typeof l.isOffscreenCanvasSupported=="boolean"?l.isOffscreenCanvasSupported:!_util.isNodeJS,J=Number.isInteger(l.canvasMaxAreaInBytes)?l.canvasMaxAreaInBytes:-1,re=typeof l.disableFontFace=="boolean"?l.disableFontFace:_util.isNodeJS,de=l.fontExtraProperties===!0,te=l.enableXfa===!0,ye=l.ownerDocument||globalThis.document,me=l.disableRange===!0,_e=l.disableStream===!0,ne=l.disableAutoFetch===!0,se=l.pdfBug===!0,S=V?V.length:l.length??NaN,B=typeof l.useSystemFonts=="boolean"?l.useSystemFonts:!_util.isNodeJS&&!re,Z=typeof l.useWorkerFetch=="boolean"?l.useWorkerFetch:E===_display_utils.DOMCMapReaderFactory&&i===_display_utils.DOMStandardFontDataFactory&&H&&s&&(0,_display_utils.isValidFetchUrl)(H,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(s,document.baseURI),ae=l.canvasFactory||new DefaultCanvasFactory({ownerDocument:ye}),ge=l.filterFactory||new DefaultFilterFactory({docId:u,ownerDocument:ye}),Se=null;(0,_util.setVerbosityLevel)(Q);const Ae={canvasFactory:ae,filterFactory:ge};if(Z||(Ae.cMapReaderFactory=new E({baseUrl:H,isCompressed:Y}),Ae.standardFontDataFactory=new i({baseUrl:s})),!W){const we={verbosity:Q,port:_worker_options.GlobalWorkerOptions.workerPort};W=we.port?PDFWorker.fromPort(we):new PDFWorker(we),h._worker=W}const ie={docId:u,apiVersion:"3.11.174",data:a,password:z,disableAutoFetch:ne,rangeChunkSize:X,length:S,docBaseUrl:T,enableXfa:te,evaluatorOptions:{maxImageSize:M,disableFontFace:re,ignoreErrors:p,isEvalSupported:L,isOffscreenCanvasSupported:N,canvasMaxAreaInBytes:J,fontExtraProperties:de,useSystemFonts:B,cMapUrl:Z?H:null,standardFontDataUrl:Z?s:null}},Pe={ignoreErrors:p,isEvalSupported:L,disableFontFace:re,fontExtraProperties:de,enableXfa:te,ownerDocument:ye,disableAutoFetch:ne,pdfBug:se,styleElement:Se};return W.promise.then(function(){if(h.destroyed)throw new Error("Loading aborted");const we=_fetchDocument(W,ie),We=new Promise(function(Ue){let ze;V?ze=new _transport_stream.PDFDataTransportStream({length:S,initialData:V.initialData,progressiveDone:V.progressiveDone,contentDispositionFilename:V.contentDispositionFilename,disableRange:me,disableStream:_e},V):a||(ze=(Ie=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Ie):(0,_display_utils.isValidFetchUrl)(Ie.url)?new _displayFetch_stream.PDFFetchStream(Ie):new _displayNetwork.PDFNetworkStream(Ie))({url:I,length:S,httpHeaders:w,withCredentials:g,rangeChunkSize:X,disableRange:me,disableStream:_e})),Ue(ze)});return Promise.all([we,We]).then(function([Ue,ze]){if(h.destroyed)throw new Error("Loading aborted");const Fe=new _message_handler.MessageHandler(u,Ue,W.port),Ie=new WorkerTransport(Fe,h,ze,Pe,Ae);h._transport=Ie,Fe.send("Ready",null)})}).catch(h._capability.reject),h}async function _fetchDocument(l,h){if(l.destroyed)throw new Error("Worker was destroyed");const u=await l.messageHandler.sendWithPromise("GetDocRequest",h,h.data?[h.data.buffer]:null);if(l.destroyed)throw new Error("Worker was destroyed");return u}function getUrlProp(l){if(l instanceof URL)return l.href;try{return new URL(l,window.location).href}catch{if(_util.isNodeJS&&typeof l=="string")return l}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(l){if(_util.isNodeJS&&typeof Buffer<"u"&&l instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength)return l;if(typeof l=="string")return(0,_util.stringToBytes)(l);if(typeof l=="object"&&!isNaN(l==null?void 0:l.length)||(0,_util.isArrayBuffer)(l))return new Uint8Array(l);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class t{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ut(t,P)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var h,u,I;this.destroyed=!0;try{(h=this._worker)!=null&&h.port&&(this._worker._pendingDestroy=!0),await((u=this._transport)==null?void 0:u.destroy())}catch(a){throw(I=this._worker)!=null&&I.port&&delete this._worker._pendingDestroy,a}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};P=new WeakMap,oe(t,P,0);let PDFDocumentLoadingTask=t;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(h,u,I=!1,a=null){this.length=h,this.initialData=u,this.progressiveDone=I,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(h){this._rangeListeners.push(h)}addProgressListener(h){this._progressListeners.push(h)}addProgressiveReadListener(h){this._progressiveReadListeners.push(h)}addProgressiveDoneListener(h){this._progressiveDoneListeners.push(h)}onDataRange(h,u){for(const I of this._rangeListeners)I(h,u)}onDataProgress(h,u){this._readyCapability.promise.then(()=>{for(const I of this._progressListeners)I(h,u)})}onDataProgressiveRead(h){this._readyCapability.promise.then(()=>{for(const u of this._progressiveReadListeners)u(h)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const h of this._progressiveDoneListeners)h()})}transportReady(){this._readyCapability.resolve()}requestDataRange(h,u){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(h,u){this._pdfInfo=h,this._transport=u,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(I=>{if(!I)return I;const a=[];for(const w in I)a.push(...I[w]);return a}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(h){return this._transport.getPage(h)}getPageIndex(h){return this._transport.getPageIndex(h)}getDestinations(){return this._transport.getDestinations()}getDestination(h){return this._transport.getDestination(h)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(h=!1){return this._transport.startCleanup(h||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(h,u,I,a=!1){oe(this,c);oe(this,k,null);oe(this,n,!1);this._pageIndex=h,this._pageInfo=u,this._transport=I,this._stats=a?new _display_utils.StatTimer:null,this._pdfBug=a,this.commonObjs=I.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:h,rotation:u=this.rotate,offsetX:I=0,offsetY:a=0,dontFlip:w=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:h,rotation:u,offsetX:I,offsetY:a,dontFlip:w})}getAnnotations({intent:h="display"}={}){const u=this._transport.getRenderingIntent(h);return this._transport.getAnnotations(this._pageIndex,u.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var h;return((h=this._transport._htmlForXfa)==null?void 0:h.children[this._pageIndex])||null}render({canvasContext:h,viewport:u,intent:I="display",annotationMode:a=_util.AnnotationMode.ENABLE,transform:w=null,background:g=null,optionalContentConfigPromise:z=null,annotationCanvasMap:V=null,pageColors:X=null,printAnnotationStorage:W=null}){var i,p;(i=this._stats)==null||i.time("Overall");const Q=this._transport.getRenderingIntent(I,a,W);ce(this,n,!1),ee(this,c,_t).call(this),z||(z=this._transport.getOptionalContentConfig());let T=this._intentStates.get(Q.cacheKey);T||(T=Object.create(null),this._intentStates.set(Q.cacheKey,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const H=!!(Q.renderingIntent&_util.RenderingIntentFlag.PRINT);T.displayReadyCapability||(T.displayReadyCapability=new _util.PromiseCapability,T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(Q));const Y=M=>{var L,N;T.renderTasks.delete(E),(this._maybeCleanupAfterRender||H)&&ce(this,n,!0),ee(this,c,at).call(this,!H),M?(E.capability.reject(M),this._abortOperatorList({intentState:T,reason:M instanceof Error?M:new Error(M)})):E.capability.resolve(),(L=this._stats)==null||L.timeEnd("Rendering"),(N=this._stats)==null||N.timeEnd("Overall")},E=new InternalRenderTask({callback:Y,params:{canvasContext:h,viewport:u,transform:w,background:g},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:V,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!H,pdfBug:this._pdfBug,pageColors:X});(T.renderTasks||(T.renderTasks=new Set)).add(E);const s=E.task;return Promise.all([T.displayReadyCapability.promise,z]).then(([M,L])=>{var N;if(this.destroyed){Y();return}(N=this._stats)==null||N.time("Rendering"),E.initializeGraphics({transparency:M,optionalContentConfig:L}),E.operatorListChanged()}).catch(Y),s}getOperatorList({intent:h="display",annotationMode:u=_util.AnnotationMode.ENABLE,printAnnotationStorage:I=null}={}){var V;function a(){g.operatorList.lastChunk&&(g.opListReadCapability.resolve(g.operatorList),g.renderTasks.delete(z))}const w=this._transport.getRenderingIntent(h,u,I,!0);let g=this._intentStates.get(w.cacheKey);g||(g=Object.create(null),this._intentStates.set(w.cacheKey,g));let z;return g.opListReadCapability||(z=Object.create(null),z.operatorListChanged=a,g.opListReadCapability=new _util.PromiseCapability,(g.renderTasks||(g.renderTasks=new Set)).add(z),g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(V=this._stats)==null||V.time("Page Request"),this._pumpOperatorList(w)),g.opListReadCapability.promise}streamTextContent({includeMarkedContent:h=!1,disableNormalization:u=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:h===!0,disableNormalization:u===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(h={}){if(this._transport._htmlForXfa)return this.getXfa().then(I=>_xfa_text.XfaText.textContent(I));const u=this.streamTextContent(h);return new Promise(function(I,a){function w(){g.read().then(function({value:V,done:X}){if(X){I(z);return}Object.assign(z.styles,V.styles),z.items.push(...V.items),w()},a)}const g=u.getReader(),z={items:[],styles:Object.create(null)};w()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const h=[];for(const u of this._intentStates.values())if(this._abortOperatorList({intentState:u,reason:new Error("Page was destroyed."),force:!0}),!u.opListReadCapability)for(const I of u.renderTasks)h.push(I.completed),I.cancel();return this.objs.clear(),ce(this,n,!1),ee(this,c,_t).call(this),Promise.all(h)}cleanup(h=!1){ce(this,n,!0);const u=ee(this,c,at).call(this,!1);return h&&u&&this._stats&&(this._stats=new _display_utils.StatTimer),u}_startRenderPage(h,u){var a,w;const I=this._intentStates.get(u);I&&((a=this._stats)==null||a.timeEnd("Page Request"),(w=I.displayReadyCapability)==null||w.resolve(h))}_renderPageChunk(h,u){for(let I=0,a=h.length;I<a;I++)u.operatorList.fnArray.push(h.fnArray[I]),u.operatorList.argsArray.push(h.argsArray[I]);u.operatorList.lastChunk=h.lastChunk,u.operatorList.separateAnnots=h.separateAnnots;for(const I of u.renderTasks)I.operatorListChanged();h.lastChunk&&ee(this,c,at).call(this,!0)}_pumpOperatorList({renderingIntent:h,cacheKey:u,annotationStorageSerializable:I}){const{map:a,transfers:w}=I,z=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:h,cacheKey:u,annotationStorage:a},w).getReader(),V=this._intentStates.get(u);V.streamReader=z;const X=()=>{z.read().then(({value:W,done:Q})=>{if(Q){V.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(W,V),X())},W=>{if(V.streamReader=null,!this._transport.destroyed){if(V.operatorList){V.operatorList.lastChunk=!0;for(const Q of V.renderTasks)Q.operatorListChanged();ee(this,c,at).call(this,!0)}if(V.displayReadyCapability)V.displayReadyCapability.reject(W);else if(V.opListReadCapability)V.opListReadCapability.reject(W);else throw W}})};X()}_abortOperatorList({intentState:h,reason:u,force:I=!1}){if(h.streamReader){if(h.streamReaderCancelTimeout&&(clearTimeout(h.streamReaderCancelTimeout),h.streamReaderCancelTimeout=null),!I){if(h.renderTasks.size>0)return;if(u instanceof _display_utils.RenderingCancelledException){let a=RENDERING_CANCELLED_TIMEOUT;u.extraDelay>0&&u.extraDelay<1e3&&(a+=u.extraDelay),h.streamReaderCancelTimeout=setTimeout(()=>{h.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:h,reason:u,force:!0})},a);return}}if(h.streamReader.cancel(new _util.AbortException(u.message)).catch(()=>{}),h.streamReader=null,!this._transport.destroyed){for(const[a,w]of this._intentStates)if(w===h){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}k=new WeakMap,n=new WeakMap,c=new WeakSet,at=function(h=!1){if(ee(this,c,_t).call(this),!e(this,n)||this.destroyed)return!1;if(h)return ce(this,k,setTimeout(()=>{ce(this,k,null),ee(this,c,at).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:u,operatorList:I}of this._intentStates.values())if(u.size>0||!I.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ce(this,n,!1),!0},_t=function(){e(this,k)&&(clearTimeout(e(this,k)),ce(this,k,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){oe(this,he,new Set);oe(this,C,Promise.resolve())}postMessage(h,u){const I={data:structuredClone(h,u?{transfer:u}:null)};e(this,C).then(()=>{for(const a of e(this,he))a.call(this,I)})}addEventListener(h,u){e(this,he).add(u)}removeEventListener(h,u){e(this,he).delete(u)}terminate(){e(this,he).clear()}}he=new WeakMap,C=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const l=(x=document==null?void 0:document.currentScript)==null?void 0:x.src;l&&(PDFWorkerUtil.fallbackWorkerSrc=l.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(l,h){let u;try{if(u=new URL(l),!u.origin||u.origin==="null")return!1}catch{return!1}const I=new URL(h,u);return u.origin===I.origin},PDFWorkerUtil.createCDNWrapper=function(l){const h=`importScripts("${l}");`;return URL.createObjectURL(new Blob([h]))}}const _PDFWorker=class _PDFWorker{constructor({name:l=null,port:h=null,verbosity:u=(0,_util.getVerbosityLevel)()}={}){var I;if(this.name=l,this.destroyed=!1,this.verbosity=u,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,h){if((I=e(_PDFWorker,m))!=null&&I.has(h))throw new Error("Cannot use more than one PDFWorker per port.");(e(_PDFWorker,m)||ce(_PDFWorker,m,new WeakMap)).set(h,this),this._initializeFromPort(h);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(l){this._port=l,this._messageHandler=new _message_handler.MessageHandler("main","worker",l),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:l}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,l)||(l=PDFWorkerUtil.createCDNWrapper(new URL(l,window.location).href));const h=new Worker(l),u=new _message_handler.MessageHandler("main","worker",h),I=()=>{h.removeEventListener("error",a),u.destroy(),h.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=()=>{this._webWorker||I()};h.addEventListener("error",a),u.on("test",g=>{if(h.removeEventListener("error",a),this.destroyed){I();return}g?(this._messageHandler=u,this._port=h,this._webWorker=h,this._readyCapability.resolve(),u.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),u.destroy(),h.terminate())}),u.on("ready",g=>{if(h.removeEventListener("error",a),this.destroyed){I();return}try{w()}catch{this._setupFakeWorker()}});const w=()=>{const g=new Uint8Array;u.send("test",g,[g.buffer])};w();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(l=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const h=new LoopbackPort;this._port=h;const u=`fake${PDFWorkerUtil.fakeWorkerId++}`,I=new _message_handler.MessageHandler(u+"_worker",u,h);l.setup(I,h);const a=new _message_handler.MessageHandler(u,u+"_worker",h);this._messageHandler=a,this._readyCapability.resolve(),a.send("configure",{verbosity:this.verbosity})}).catch(l=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${l.message}".`))})}destroy(){var l;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(l=e(_PDFWorker,m))==null||l.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(l){var u;if(!(l!=null&&l.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const h=(u=e(this,m))==null?void 0:u.get(l.port);if(h){if(h._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return h}return new _PDFWorker(l)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var l;try{return((l=globalThis.pdfjsWorker)==null?void 0:l.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};m=new WeakMap,oe(_PDFWorker,m);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(h,u,I,a,w){oe(this,R);oe(this,j,new Map);oe(this,U,new Map);oe(this,v,new Map);oe(this,y,null);this.messageHandler=h,this.loadingTask=u,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this._params=a,this.canvasFactory=w.canvasFactory,this.filterFactory=w.filterFactory,this.cMapReaderFactory=w.cMapReaderFactory,this.standardFontDataFactory=w.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=I,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(h,u=_util.AnnotationMode.ENABLE,I=null,a=!1){let w=_util.RenderingIntentFlag.DISPLAY,g=_annotation_storage.SerializableEmpty;switch(h){case"any":w=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":w=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${h}`)}switch(u){case _util.AnnotationMode.DISABLE:w+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:w+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:w+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,g=(w&_util.RenderingIntentFlag.PRINT&&I instanceof _annotation_storage.PrintAnnotationStorage?I:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${u}`)}return a&&(w+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:w,cacheKey:`${w}_${g.hash}`,annotationStorageSerializable:g}}destroy(){var I;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(I=e(this,y))==null||I.reject(new Error("Worker was destroyed during onPassword callback"));const h=[];for(const a of e(this,U).values())h.push(a._destroy());e(this,U).clear(),e(this,v).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const u=this.messageHandler.sendWithPromise("Terminate",null);return h.push(u),Promise.all(h).then(()=>{var a;this.commonObjs.clear(),this.fontLoader.clear(),e(this,j).clear(),this.filterFactory.destroy(),(a=this._networkStream)==null||a.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:h,loadingTask:u}=this;h.on("GetReader",(I,a)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=w=>{this._lastProgress={loaded:w.loaded,total:w.total}},a.onPull=()=>{this._fullReader.read().then(function({value:w,done:g}){if(g){a.close();return}(0,_util.assert)(w instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(w),1,[w])}).catch(w=>{a.error(w)})},a.onCancel=w=>{this._fullReader.cancel(w),a.ready.catch(g=>{if(!this.destroyed)throw g})}}),h.on("ReaderHeadersReady",I=>{const a=new _util.PromiseCapability,w=this._fullReader;return w.headersReady.then(()=>{var g;(!w.isStreamingSupported||!w.isRangeSupported)&&(this._lastProgress&&((g=u.onProgress)==null||g.call(u,this._lastProgress)),w.onProgress=z=>{var V;(V=u.onProgress)==null||V.call(u,{loaded:z.loaded,total:z.total})}),a.resolve({isStreamingSupported:w.isStreamingSupported,isRangeSupported:w.isRangeSupported,contentLength:w.contentLength})},a.reject),a.promise}),h.on("GetRangeReader",(I,a)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const w=this._networkStream.getRangeReader(I.begin,I.end);if(!w){a.close();return}a.onPull=()=>{w.read().then(function({value:g,done:z}){if(z){a.close();return}(0,_util.assert)(g instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(g),1,[g])}).catch(g=>{a.error(g)})},a.onCancel=g=>{w.cancel(g),a.ready.catch(z=>{if(!this.destroyed)throw z})}}),h.on("GetDoc",({pdfInfo:I})=>{this._numPages=I.numPages,this._htmlForXfa=I.htmlForXfa,delete I.htmlForXfa,u._capability.resolve(new PDFDocumentProxy(I,this))}),h.on("DocException",function(I){let a;switch(I.name){case"PasswordException":a=new _util.PasswordException(I.message,I.code);break;case"InvalidPDFException":a=new _util.InvalidPDFException(I.message);break;case"MissingPDFException":a=new _util.MissingPDFException(I.message);break;case"UnexpectedResponseException":a=new _util.UnexpectedResponseException(I.message,I.status);break;case"UnknownErrorException":a=new _util.UnknownErrorException(I.message,I.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}u._capability.reject(a)}),h.on("PasswordRequest",I=>{if(ce(this,y,new _util.PromiseCapability),u.onPassword){const a=w=>{w instanceof Error?e(this,y).reject(w):e(this,y).resolve({password:w})};try{u.onPassword(a,I.code)}catch(w){e(this,y).reject(w)}}else e(this,y).reject(new _util.PasswordException(I.message,I.code));return e(this,y).promise}),h.on("DataLoaded",I=>{var a;(a=u.onProgress)==null||a.call(u,{loaded:I.length,total:I.length}),this.downloadInfoCapability.resolve(I)}),h.on("StartRenderPage",I=>{if(this.destroyed)return;e(this,U).get(I.pageIndex)._startRenderPage(I.transparency,I.cacheKey)}),h.on("commonobj",([I,a,w])=>{var g;if(!this.destroyed&&!this.commonObjs.has(I))switch(a){case"Font":const z=this._params;if("error"in w){const W=w.error;(0,_util.warn)(`Error during font loading: ${W}`),this.commonObjs.resolve(I,W);break}const V=z.pdfBug&&((g=globalThis.FontInspector)!=null&&g.enabled)?(W,Q)=>globalThis.FontInspector.fontAdded(W,Q):null,X=new _font_loader.FontFaceObject(w,{isEvalSupported:z.isEvalSupported,disableFontFace:z.disableFontFace,ignoreErrors:z.ignoreErrors,inspectFont:V});this.fontLoader.bind(X).catch(W=>h.sendWithPromise("FontFallback",{id:I})).finally(()=>{!z.fontExtraProperties&&X.data&&(X.data=null),this.commonObjs.resolve(I,X)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(I,w);break;default:throw new Error(`Got unknown common object type ${a}`)}}),h.on("obj",([I,a,w,g])=>{var V;if(this.destroyed)return;const z=e(this,U).get(a);if(!z.objs.has(I))switch(w){case"Image":if(z.objs.resolve(I,g),g){let X;if(g.bitmap){const{width:W,height:Q}=g;X=W*Q*4}else X=((V=g.data)==null?void 0:V.length)||0;X>_util.MAX_IMAGE_SIZE_TO_CACHE&&(z._maybeCleanupAfterRender=!0)}break;case"Pattern":z.objs.resolve(I,g);break;default:throw new Error(`Got unknown object type ${w}`)}}),h.on("DocProgress",I=>{var a;this.destroyed||(a=u.onProgress)==null||a.call(u,{loaded:I.loaded,total:I.total})}),h.on("FetchBuiltInCMap",I=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(I):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),h.on("FetchStandardFontData",I=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(I):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var I;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:h,transfers:u}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:h,filename:((I=this._fullReader)==null?void 0:I.filename)??null},u).finally(()=>{this.annotationStorage.resetModified()})}getPage(h){if(!Number.isInteger(h)||h<=0||h>this._numPages)return Promise.reject(new Error("Invalid page request."));const u=h-1,I=e(this,v).get(u);if(I)return I;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:u}).then(w=>{if(this.destroyed)throw new Error("Transport destroyed");const g=new PDFPageProxy(u,w,this,this._params.pdfBug);return e(this,U).set(u,g),g});return e(this,v).set(u,a),a}getPageIndex(h){return typeof h!="object"||h===null||!Number.isInteger(h.num)||h.num<0||!Number.isInteger(h.gen)||h.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:h.num,gen:h.gen})}getAnnotations(h,u){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:h,intent:u})}getFieldObjects(){return ee(this,R,vt).call(this,"GetFieldObjects")}hasJSActions(){return ee(this,R,vt).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(h){return typeof h!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:h})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return ee(this,R,vt).call(this,"GetDocJSActions")}getPageJSActions(h){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:h})}getStructTree(h){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:h})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(h=>new _optional_content_config.OptionalContentConfig(h))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const h="GetMetadata",u=e(this,j).get(h);if(u)return u;const I=this.messageHandler.sendWithPromise(h,null).then(a=>{var w,g;return{info:a[0],metadata:a[1]?new _metadata.Metadata(a[1]):null,contentDispositionFilename:((w=this._fullReader)==null?void 0:w.filename)??null,contentLength:((g=this._fullReader)==null?void 0:g.contentLength)??null}});return e(this,j).set(h,I),I}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(h=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const u of e(this,U).values())if(!u.cleanup())throw new Error(`startCleanup: Page ${u.pageNumber} is currently rendering.`);this.commonObjs.clear(),h||this.fontLoader.clear(),e(this,j).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:h,enableXfa:u}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:h,enableXfa:u})}}j=new WeakMap,U=new WeakMap,v=new WeakMap,y=new WeakMap,R=new WeakSet,vt=function(h,u=null){const I=e(this,j).get(h);if(I)return I;const a=this.messageHandler.sendWithPromise(h,u);return e(this,j).set(h,a),a};class PDFObjects{constructor(){oe(this,A);oe(this,f,Object.create(null))}get(h,u=null){if(u){const a=ee(this,A,Ot).call(this,h);return a.capability.promise.then(()=>u(a.data)),null}const I=e(this,f)[h];if(!(I!=null&&I.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${h}.`);return I.data}has(h){const u=e(this,f)[h];return(u==null?void 0:u.capability.settled)||!1}resolve(h,u=null){const I=ee(this,A,Ot).call(this,h);I.data=u,I.capability.resolve()}clear(){var h;for(const u in e(this,f)){const{data:I}=e(this,f)[u];(h=I==null?void 0:I.bitmap)==null||h.close()}ce(this,f,Object.create(null))}}f=new WeakMap,A=new WeakSet,Ot=function(h){var u;return(u=e(this,f))[h]||(u[h]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(h){oe(this,_,null);ce(this,_,h),this.onContinue=null}get promise(){return e(this,_).capability.promise}cancel(h=0){e(this,_).cancel(null,h)}get separateAnnots(){const{separateAnnots:h}=e(this,_).operatorList;if(!h)return!1;const{annotationCanvasMap:u}=e(this,_);return h.form||h.canvas&&(u==null?void 0:u.size)>0}}_=new WeakMap,exports.RenderTask=RenderTask;const d=class d{constructor({callback:h,params:u,objs:I,commonObjs:a,annotationCanvasMap:w,operatorList:g,pageIndex:z,canvasFactory:V,filterFactory:X,useRequestAnimationFrame:W=!1,pdfBug:Q=!1,pageColors:T=null}){this.callback=h,this.params=u,this.objs=I,this.commonObjs=a,this.annotationCanvasMap=w,this.operatorListIdx=null,this.operatorList=g,this._pageIndex=z,this.canvasFactory=V,this.filterFactory=X,this._pdfBug=Q,this.pageColors=T,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=W===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=u.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:h=!1,optionalContentConfig:u}){var z,V;if(this.cancelled)return;if(this._canvas){if(e(d,o).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");e(d,o).add(this._canvas)}this._pdfBug&&((z=globalThis.StepperManager)!=null&&z.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:I,viewport:a,transform:w,background:g}=this.params;this.gfx=new _canvas.CanvasGraphics(I,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:u},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:w,viewport:a,transparency:h,background:g}),this.operatorListIdx=0,this.graphicsReady=!0,(V=this.graphicsReadyCallback)==null||V.call(this)}cancel(h=null,u=0){var I;this.running=!1,this.cancelled=!0,(I=this.gfx)==null||I.endDrawing(),e(d,o).delete(this._canvas),this.callback(h||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,u))}operatorListChanged(){var h;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(h=this.stepper)==null||h.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),e(d,o).delete(this._canvas),this.callback())))}};o=new WeakMap,oe(d,o,new WeakSet);let InternalRenderTask=d;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(P,t,k)=>{var x,m,j,bn,v;Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var n=k(1),c=k(4),q=k(8);const $=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=$;class he{constructor(){oe(this,j);oe(this,x,!1);oe(this,m,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(R,b){const f=e(this,m).get(R);return f===void 0?b:Object.assign(b,f)}getRawValue(R){return e(this,m).get(R)}remove(R){if(e(this,m).delete(R),e(this,m).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const b of e(this,m).values())if(b instanceof c.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(R,b){const f=e(this,m).get(R);let A=!1;if(f!==void 0)for(const[O,_]of Object.entries(b))f[O]!==_&&(A=!0,f[O]=_);else A=!0,e(this,m).set(R,b);A&&ee(this,j,bn).call(this),b instanceof c.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(b.constructor._type)}has(R){return e(this,m).has(R)}getAll(){return e(this,m).size>0?(0,n.objectFromMap)(e(this,m)):null}setAll(R){for(const[b,f]of Object.entries(R))this.setValue(b,f)}get size(){return e(this,m).size}resetModified(){e(this,x)&&(ce(this,x,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new C(this)}get serializable(){if(e(this,m).size===0)return $;const R=new Map,b=new q.MurmurHash3_64,f=[],A=Object.create(null);let O=!1;for(const[_,o]of e(this,m)){const d=o instanceof c.AnnotationEditor?o.serialize(!1,A):o;d&&(R.set(_,d),b.update(`${_}:${JSON.stringify(d)}`),O||(O=!!d.bitmap))}if(O)for(const _ of R.values())_.bitmap&&f.push(_.bitmap);return R.size>0?{map:R,hash:b.hexdigest(),transfers:f}:$}}x=new WeakMap,m=new WeakMap,j=new WeakSet,bn=function(){e(this,x)||(ce(this,x,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=he;class C extends he{constructor(b){super();oe(this,v);const{map:f,hash:A,transfers:O}=b.serializable,_=structuredClone(f,O?{transfer:O}:null);ce(this,v,{map:_,hash:A,transfers:O})}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return e(this,v)}}v=new WeakMap,t.PrintAnnotationStorage=C},(P,t,k)=>{var C,x,m,j,U,v,y,R,b,f,A,O,_,o,d,Lt,It,u,Nt,jt,yn,_n,vn,Ut,An;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var n=k(5),c=k(1),q=k(6);const W=class W{constructor(T){oe(this,d);oe(this,C,"");oe(this,x,!1);oe(this,m,null);oe(this,j,null);oe(this,U,null);oe(this,v,!1);oe(this,y,null);oe(this,R,this.focusin.bind(this));oe(this,b,this.focusout.bind(this));oe(this,f,!1);oe(this,A,!1);oe(this,O,!1);Je(this,"_initialOptions",Object.create(null));Je(this,"_uiManager",null);Je(this,"_focusEventsAllowed",!0);Je(this,"_l10nPromise",null);oe(this,_,!1);oe(this,o,W._zIndex++);this.constructor===W&&(0,c.unreachable)("Cannot initialize AnnotationEditor."),this.parent=T.parent,this.id=T.id,this.width=this.height=null,this.pageIndex=T.parent.pageIndex,this.name=T.name,this.div=null,this._uiManager=T.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=T.isCentered,this._structTreeParentId=null;const{rotation:H,rawDims:{pageWidth:Y,pageHeight:E,pageX:s,pageY:i}}=this.parent.viewport;this.rotation=H,this.pageRotation=(360+H-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[Y,E],this.pageTranslation=[s,i];const[p,M]=this.parentDimensions;this.x=T.x/p,this.y=T.y/M,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,c.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(T){const H=new he({id:T.parent.getNextId(),parent:T.parent,uiManager:T._uiManager});H.annotationElementId=T.annotationElementId,H.deleted=!0,H._uiManager.addToAnnotationStorage(H)}static initialize(T,H=null){if(W._l10nPromise||(W._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(E=>[E,T.get(E)]))),H!=null&&H.strings)for(const E of H.strings)W._l10nPromise.set(E,T.get(E));if(W._borderLineWidth!==-1)return;const Y=getComputedStyle(document.documentElement);W._borderLineWidth=parseFloat(Y.getPropertyValue("--outline-width"))||0}static updateDefaultParams(T,H){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(T){return!1}static paste(T,H){(0,c.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return e(this,_)}set _isDraggable(T){var H;ce(this,_,T),(H=this.div)==null||H.classList.toggle("draggable",T)}center(){const[T,H]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*H/(T*2),this.y+=this.width*T/(H*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*H/(T*2),this.y-=this.width*T/(H*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(T){this._uiManager.addCommands(T)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=e(this,o)}setParent(T){T!==null&&(this.pageIndex=T.pageIndex,this.pageDimensions=T.pageDimensions),this.parent=T}focusin(T){this._focusEventsAllowed&&(e(this,f)?ce(this,f,!1):this.parent.setSelected(this))}focusout(T){var Y;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const H=T.relatedTarget;H!=null&&H.closest(`#${this.id}`)||(T.preventDefault(),(Y=this.parent)!=null&&Y.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(T,H,Y,E){const[s,i]=this.parentDimensions;[Y,E]=this.screenToPageTranslation(Y,E),this.x=(T+Y)/s,this.y=(H+E)/i,this.fixAndSetPosition()}translate(T,H){ee(this,d,Lt).call(this,this.parentDimensions,T,H)}translateInPage(T,H){ee(this,d,Lt).call(this,this.pageDimensions,T,H),this.div.scrollIntoView({block:"nearest"})}drag(T,H){const[Y,E]=this.parentDimensions;if(this.x+=T/Y,this.y+=H/E,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:L,y:N}=this.div.getBoundingClientRect();this.parent.findNewParent(this,L,N)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:i}=this;const[p,M]=ee(this,d,It).call(this);s+=p,i+=M,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*i).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[T,H]=this.pageDimensions;let{x:Y,y:E,width:s,height:i}=this;switch(s*=T,i*=H,Y*=T,E*=H,this.rotation){case 0:Y=Math.max(0,Math.min(T-s,Y)),E=Math.max(0,Math.min(H-i,E));break;case 90:Y=Math.max(0,Math.min(T-i,Y)),E=Math.min(H,Math.max(s,E));break;case 180:Y=Math.min(T,Math.max(s,Y)),E=Math.min(H,Math.max(i,E));break;case 270:Y=Math.min(T,Math.max(i,Y)),E=Math.max(0,Math.min(H-s,E));break}this.x=Y/=T,this.y=E/=H;const[p,M]=ee(this,d,It).call(this);Y+=p,E+=M;const{style:L}=this.div;L.left=`${(100*Y).toFixed(2)}%`,L.top=`${(100*E).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(T,H){var Y;return ee(Y=W,u,Nt).call(Y,T,H,this.parentRotation)}pageTranslationToScreen(T,H){var Y;return ee(Y=W,u,Nt).call(Y,T,H,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:T,pageDimensions:[H,Y]}=this,E=H*T,s=Y*T;return c.FeatureTest.isCSSRoundSupported?[Math.round(E),Math.round(s)]:[E,s]}setDims(T,H){var s;const[Y,E]=this.parentDimensions;this.div.style.width=`${(100*T/Y).toFixed(2)}%`,e(this,v)||(this.div.style.height=`${(100*H/E).toFixed(2)}%`),(s=e(this,m))==null||s.classList.toggle("small",T<W.SMALL_EDITOR_SIZE||H<W.SMALL_EDITOR_SIZE)}fixDims(){const{style:T}=this.div,{height:H,width:Y}=T,E=Y.endsWith("%"),s=!e(this,v)&&H.endsWith("%");if(E&&s)return;const[i,p]=this.parentDimensions;E||(T.width=`${(100*parseFloat(Y)/i).toFixed(2)}%`),!e(this,v)&&!s&&(T.height=`${(100*parseFloat(H)/p).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(e(this,m))return;const T=ce(this,m,document.createElement("button"));T.className="altText";const H=await W._l10nPromise.get("editor_alt_text_button_label");T.textContent=H,T.setAttribute("aria-label",H),T.tabIndex="0",T.addEventListener("contextmenu",q.noContextMenu),T.addEventListener("pointerdown",Y=>Y.stopPropagation()),T.addEventListener("click",Y=>{Y.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),T.addEventListener("keydown",Y=>{Y.target===T&&Y.key==="Enter"&&(Y.preventDefault(),this._uiManager.editAltText(this))}),ee(this,d,Ut).call(this),this.div.append(T),W.SMALL_EDITOR_SIZE||(W.SMALL_EDITOR_SIZE=Math.min(128,Math.round(T.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:e(this,C),decorative:e(this,x)}}set altTextData({altText:T,decorative:H}){e(this,C)===T&&e(this,x)===H||(ce(this,C,T),ce(this,x,H),ee(this,d,Ut).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",e(this,R)),this.div.addEventListener("focusout",e(this,b));const[T,H]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*H/T).toFixed(2)}%`,this.div.style.maxHeight=`${(100*T/H).toFixed(2)}%`);const[Y,E]=this.getInitialTranslation();return this.translate(Y,E),(0,n.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(T){const{isMac:H}=c.FeatureTest.platform;if(T.button!==0||T.ctrlKey&&H){T.preventDefault();return}ce(this,f,!0),ee(this,d,An).call(this,T)}moveInDOM(){var T;(T=this.parent)==null||T.moveEditorInDOM(this)}_setParentAndPosition(T,H,Y){T.changeParent(this),this.x=H,this.y=Y,this.fixAndSetPosition()}getRect(T,H){const Y=this.parentScale,[E,s]=this.pageDimensions,[i,p]=this.pageTranslation,M=T/Y,L=H/Y,N=this.x*E,J=this.y*s,re=this.width*E,de=this.height*s;switch(this.rotation){case 0:return[N+M+i,s-J-L-de+p,N+M+re+i,s-J-L+p];case 90:return[N+L+i,s-J+M+p,N+L+de+i,s-J+M+re+p];case 180:return[N-M-re+i,s-J+L+p,N-M+i,s-J+L+de+p];case 270:return[N-L-de+i,s-J-M-re+p,N-L+i,s-J-M+p];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(T,H){const[Y,E,s,i]=T,p=s-Y,M=i-E;switch(this.rotation){case 0:return[Y,H-i,p,M];case 90:return[Y,H-E,M,p];case 180:return[s,H-E,p,M];case 270:return[s,H-i,M,p];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ce(this,O,!0)}disableEditMode(){ce(this,O,!1)}isInEditMode(){return e(this,O)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var T,H;(T=this.div)==null||T.addEventListener("focusin",e(this,R)),(H=this.div)==null||H.addEventListener("focusout",e(this,b))}serialize(T=!1,H=null){(0,c.unreachable)("An editor must be serializable")}static deserialize(T,H,Y){const E=new this.prototype.constructor({parent:H,id:H.getNextId(),uiManager:Y});E.rotation=T.rotation;const[s,i]=E.pageDimensions,[p,M,L,N]=E.getRectInCurrentCoords(T.rect,i);return E.x=p/s,E.y=M/i,E.width=L/s,E.height=N/i,E}remove(){var T;this.div.removeEventListener("focusin",e(this,R)),this.div.removeEventListener("focusout",e(this,b)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(T=e(this,m))==null||T.remove(),ce(this,m,null),ce(this,j,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(ee(this,d,yn).call(this),e(this,y).classList.remove("hidden"))}select(){var T;this.makeResizable(),(T=this.div)==null||T.classList.add("selectedEditor")}unselect(){var T,H,Y;(T=e(this,y))==null||T.classList.add("hidden"),(H=this.div)==null||H.classList.remove("selectedEditor"),(Y=this.div)!=null&&Y.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(T,H){}disableEditing(){e(this,m)&&(e(this,m).hidden=!0)}enableEditing(){e(this,m)&&(e(this,m).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return e(this,A)}set isEditing(T){ce(this,A,T),this.parent&&(T?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(T,H){ce(this,v,!0);const Y=T/H,{style:E}=this.div;E.aspectRatio=Y,E.height="auto"}static get MIN_SIZE(){return 16}};C=new WeakMap,x=new WeakMap,m=new WeakMap,j=new WeakMap,U=new WeakMap,v=new WeakMap,y=new WeakMap,R=new WeakMap,b=new WeakMap,f=new WeakMap,A=new WeakMap,O=new WeakMap,_=new WeakMap,o=new WeakMap,d=new WeakSet,Lt=function([T,H],Y,E){[Y,E]=this.screenToPageTranslation(Y,E),this.x+=Y/T,this.y+=E/H,this.fixAndSetPosition()},It=function(){const[T,H]=this.parentDimensions,{_borderLineWidth:Y}=W,E=Y/T,s=Y/H;switch(this.rotation){case 90:return[-E,s];case 180:return[E,s];case 270:return[E,-s];default:return[-E,-s]}},u=new WeakSet,Nt=function(T,H,Y){switch(Y){case 90:return[H,-T];case 180:return[-T,-H];case 270:return[-H,T];default:return[T,H]}},jt=function(T){switch(T){case 90:{const[H,Y]=this.pageDimensions;return[0,-H/Y,Y/H,0]}case 180:return[-1,0,0,-1];case 270:{const[H,Y]=this.pageDimensions;return[0,H/Y,-Y/H,0]}default:return[1,0,0,1]}},yn=function(){if(e(this,y))return;ce(this,y,document.createElement("div")),e(this,y).classList.add("resizers");const T=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||T.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const H of T){const Y=document.createElement("div");e(this,y).append(Y),Y.classList.add("resizer",H),Y.addEventListener("pointerdown",ee(this,d,_n).bind(this,H)),Y.addEventListener("contextmenu",q.noContextMenu)}this.div.prepend(e(this,y))},_n=function(T,H){H.preventDefault();const{isMac:Y}=c.FeatureTest.platform;if(H.button!==0||H.ctrlKey&&Y)return;const E=ee(this,d,vn).bind(this,T),s=this._isDraggable;this._isDraggable=!1;const i={passive:!0,capture:!0};window.addEventListener("pointermove",E,i);const p=this.x,M=this.y,L=this.width,N=this.height,J=this.parent.div.style.cursor,re=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(H.target).cursor;const de=()=>{this._isDraggable=s,window.removeEventListener("pointerup",de),window.removeEventListener("blur",de),window.removeEventListener("pointermove",E,i),this.parent.div.style.cursor=J,this.div.style.cursor=re;const te=this.x,ye=this.y,me=this.width,_e=this.height;te===p&&ye===M&&me===L&&_e===N||this.addCommands({cmd:()=>{this.width=me,this.height=_e,this.x=te,this.y=ye;const[ne,se]=this.parentDimensions;this.setDims(ne*me,se*_e),this.fixAndSetPosition()},undo:()=>{this.width=L,this.height=N,this.x=p,this.y=M;const[ne,se]=this.parentDimensions;this.setDims(ne*L,se*N),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",de),window.addEventListener("blur",de)},vn=function(T,H){const[Y,E]=this.parentDimensions,s=this.x,i=this.y,p=this.width,M=this.height,L=W.MIN_SIZE/Y,N=W.MIN_SIZE/E,J=Fe=>Math.round(Fe*1e4)/1e4,re=ee(this,d,jt).call(this,this.rotation),de=(Fe,Ie)=>[re[0]*Fe+re[2]*Ie,re[1]*Fe+re[3]*Ie],te=ee(this,d,jt).call(this,360-this.rotation),ye=(Fe,Ie)=>[te[0]*Fe+te[2]*Ie,te[1]*Fe+te[3]*Ie];let me,_e,ne=!1,se=!1;switch(T){case"topLeft":ne=!0,me=(Fe,Ie)=>[0,0],_e=(Fe,Ie)=>[Fe,Ie];break;case"topMiddle":me=(Fe,Ie)=>[Fe/2,0],_e=(Fe,Ie)=>[Fe/2,Ie];break;case"topRight":ne=!0,me=(Fe,Ie)=>[Fe,0],_e=(Fe,Ie)=>[0,Ie];break;case"middleRight":se=!0,me=(Fe,Ie)=>[Fe,Ie/2],_e=(Fe,Ie)=>[0,Ie/2];break;case"bottomRight":ne=!0,me=(Fe,Ie)=>[Fe,Ie],_e=(Fe,Ie)=>[0,0];break;case"bottomMiddle":me=(Fe,Ie)=>[Fe/2,Ie],_e=(Fe,Ie)=>[Fe/2,0];break;case"bottomLeft":ne=!0,me=(Fe,Ie)=>[0,Ie],_e=(Fe,Ie)=>[Fe,0];break;case"middleLeft":se=!0,me=(Fe,Ie)=>[0,Ie/2],_e=(Fe,Ie)=>[Fe,Ie/2];break}const S=me(p,M),B=_e(p,M);let Z=de(...B);const ae=J(s+Z[0]),ge=J(i+Z[1]);let Se=1,Ae=1,[ie,Pe]=this.screenToPageTranslation(H.movementX,H.movementY);if([ie,Pe]=ye(ie/Y,Pe/E),ne){const Fe=Math.hypot(p,M);Se=Ae=Math.max(Math.min(Math.hypot(B[0]-S[0]-ie,B[1]-S[1]-Pe)/Fe,1/p,1/M),L/p,N/M)}else se?Se=Math.max(L,Math.min(1,Math.abs(B[0]-S[0]-ie)))/p:Ae=Math.max(N,Math.min(1,Math.abs(B[1]-S[1]-Pe)))/M;const we=J(p*Se),We=J(M*Ae);Z=de(..._e(we,We));const Ue=ae-Z[0],ze=ge-Z[1];this.width=we,this.height=We,this.x=Ue,this.y=ze,this.setDims(Y*we,E*We),this.fixAndSetPosition()},Ut=async function(){var Y;const T=e(this,m);if(!T)return;if(!e(this,C)&&!e(this,x)){T.classList.remove("done"),(Y=e(this,j))==null||Y.remove();return}W._l10nPromise.get("editor_alt_text_edit_button_label").then(E=>{T.setAttribute("aria-label",E)});let H=e(this,j);if(!H){ce(this,j,H=document.createElement("span")),H.className="tooltip",H.setAttribute("role","tooltip");const E=H.id=`alt-text-tooltip-${this.id}`;T.setAttribute("aria-describedby",E);const s=100;T.addEventListener("mouseenter",()=>{ce(this,U,setTimeout(()=>{ce(this,U,null),e(this,j).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},s))}),T.addEventListener("mouseleave",()=>{var i;clearTimeout(e(this,U)),ce(this,U,null),(i=e(this,j))==null||i.classList.remove("show")})}T.classList.add("done"),H.innerText=e(this,x)?await W._l10nPromise.get("editor_alt_text_decorative_tooltip"):e(this,C),H.parentNode||T.append(H)},An=function(T){if(!this._isDraggable)return;const H=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let Y,E;H&&(Y={passive:!0,capture:!0},E=i=>{const[p,M]=this.screenToPageTranslation(i.movementX,i.movementY);this._uiManager.dragSelectedEditors(p,M)},window.addEventListener("pointermove",E,Y));const s=()=>{if(window.removeEventListener("pointerup",s),window.removeEventListener("blur",s),H&&window.removeEventListener("pointermove",E,Y),ce(this,f,!1),!this._uiManager.endDragSession()){const{isMac:i}=c.FeatureTest.platform;T.ctrlKey&&!i||T.shiftKey||T.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",s),window.addEventListener("blur",s)},oe(W,u),Je(W,"_borderLineWidth",-1),Je(W,"_colorManager",new n.ColorManager),Je(W,"_zIndex",1),Je(W,"SMALL_EDITOR_SIZE",0);let $=W;t.AnnotationEditor=$;class he extends ${constructor(T){super(T),this.annotationElementId=T.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(P,t,k)=>{var v,y,R,b,f,Bt,_,o,d,l,h,En,a,w,g,z,V,X,W,Q,T,H,Y,E,s,i,p,M,L,N,J,re,de,te,ye,me,_e,ne,se,S,B,Z,ae,ge,Se,Ae,ie,Sn,Wt,$t,At,Ht,Gt,et,dt,Tn,wn,Vt,ft,zt;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=q,t.opacityToHex=$;var n=k(1),c=k(6);function q(Ve,G,be){for(const xe of be)G.addEventListener(xe,Ve[xe].bind(Ve))}function $(Ve){return Math.round(Math.min(255,Math.max(1,255*Ve))).toString(16).padStart(2,"0")}class he{constructor(){oe(this,v,0)}getId(){return`${n.AnnotationEditorPrefix}${ut(this,v)._++}`}}v=new WeakMap;const O=class O{constructor(){oe(this,f);oe(this,y,(0,n.getUuid)());oe(this,R,0);oe(this,b,null)}static get _isSVGFittingCanvas(){const G='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',xe=new OffscreenCanvas(1,3).getContext("2d"),Oe=new Image;Oe.src=G;const je=Oe.decode().then(()=>(xe.drawImage(Oe,0,0,1,1,0,0,1,3),new Uint32Array(xe.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,n.shadow)(this,"_isSVGFittingCanvas",je)}async getFromFile(G){const{lastModified:be,name:xe,size:Oe,type:je}=G;return ee(this,f,Bt).call(this,`${be}_${xe}_${Oe}_${je}`,G)}async getFromUrl(G){return ee(this,f,Bt).call(this,G,G)}async getFromId(G){e(this,b)||ce(this,b,new Map);const be=e(this,b).get(G);return be?be.bitmap?(be.refCounter+=1,be):be.file?this.getFromFile(be.file):this.getFromUrl(be.url):null}getSvgUrl(G){const be=e(this,b).get(G);return be!=null&&be.isSvg?be.svgUrl:null}deleteId(G){e(this,b)||ce(this,b,new Map);const be=e(this,b).get(G);be&&(be.refCounter-=1,be.refCounter===0&&(be.bitmap=null))}isValidId(G){return G.startsWith(`image_${e(this,y)}_`)}};y=new WeakMap,R=new WeakMap,b=new WeakMap,f=new WeakSet,Bt=async function(G,be){e(this,b)||ce(this,b,new Map);let xe=e(this,b).get(G);if(xe===null)return null;if(xe!=null&&xe.bitmap)return xe.refCounter+=1,xe;try{xe||(xe={bitmap:null,id:`image_${e(this,y)}_${ut(this,R)._++}`,refCounter:0,isSvg:!1});let Oe;if(typeof be=="string"){xe.url=be;const je=await fetch(be);if(!je.ok)throw new Error(je.statusText);Oe=await je.blob()}else Oe=xe.file=be;if(Oe.type==="image/svg+xml"){const je=O._isSVGFittingCanvas,Re=new FileReader,D=new Image,F=new Promise((K,fe)=>{D.onload=()=>{xe.bitmap=D,xe.isSvg=!0,K()},Re.onload=async()=>{const pe=xe.svgUrl=Re.result;D.src=await je?`${pe}#svgView(preserveAspectRatio(none))`:pe},D.onerror=Re.onerror=fe});Re.readAsDataURL(Oe),await F}else xe.bitmap=await createImageBitmap(Oe);xe.refCounter=1}catch(Oe){console.error(Oe),xe=null}return e(this,b).set(G,xe),xe&&e(this,b).set(xe.id,xe),xe};let C=O;class x{constructor(G=128){oe(this,_,[]);oe(this,o,!1);oe(this,d);oe(this,l,-1);ce(this,d,G)}add({cmd:G,undo:be,mustExec:xe,type:Oe=NaN,overwriteIfSameType:je=!1,keepUndo:Re=!1}){if(xe&&G(),e(this,o))return;const D={cmd:G,undo:be,type:Oe};if(e(this,l)===-1){e(this,_).length>0&&(e(this,_).length=0),ce(this,l,0),e(this,_).push(D);return}if(je&&e(this,_)[e(this,l)].type===Oe){Re&&(D.undo=e(this,_)[e(this,l)].undo),e(this,_)[e(this,l)]=D;return}const F=e(this,l)+1;F===e(this,d)?e(this,_).splice(0,1):(ce(this,l,F),F<e(this,_).length&&e(this,_).splice(F)),e(this,_).push(D)}undo(){e(this,l)!==-1&&(ce(this,o,!0),e(this,_)[e(this,l)].undo(),ce(this,o,!1),ce(this,l,e(this,l)-1))}redo(){e(this,l)<e(this,_).length-1&&(ce(this,l,e(this,l)+1),ce(this,o,!0),e(this,_)[e(this,l)].cmd(),ce(this,o,!1))}hasSomethingToUndo(){return e(this,l)!==-1}hasSomethingToRedo(){return e(this,l)<e(this,_).length-1}destroy(){ce(this,_,null)}}_=new WeakMap,o=new WeakMap,d=new WeakMap,l=new WeakMap,t.CommandManager=x;class m{constructor(G){oe(this,h);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:be}=n.FeatureTest.platform;for(const[xe,Oe,je={}]of G)for(const Re of xe){const D=Re.startsWith("mac+");be&&D?(this.callbacks.set(Re.slice(4),{callback:Oe,options:je}),this.allKeys.add(Re.split("+").at(-1))):!be&&!D&&(this.callbacks.set(Re,{callback:Oe,options:je}),this.allKeys.add(Re.split("+").at(-1)))}}exec(G,be){if(!this.allKeys.has(be.key))return;const xe=this.callbacks.get(ee(this,h,En).call(this,be));if(!xe)return;const{callback:Oe,options:{bubbles:je=!1,args:Re=[],checker:D=null}}=xe;D&&!D(G,be)||(Oe.bind(G,...Re)(),je||(be.stopPropagation(),be.preventDefault()))}}h=new WeakSet,En=function(G){G.altKey&&this.buffer.push("alt"),G.ctrlKey&&this.buffer.push("ctrl"),G.metaKey&&this.buffer.push("meta"),G.shiftKey&&this.buffer.push("shift"),this.buffer.push(G.key);const be=this.buffer.join("+");return this.buffer.length=0,be},t.KeyboardManager=m;const I=class I{get _colors(){const G=new Map([["CanvasText",null],["Canvas",null]]);return(0,c.getColorValues)(G),(0,n.shadow)(this,"_colors",G)}convert(G){const be=(0,c.getRGB)(G);if(!window.matchMedia("(forced-colors: active)").matches)return be;for(const[xe,Oe]of this._colors)if(Oe.every((je,Re)=>je===be[Re]))return I._colorsMapping.get(xe);return be}getHexCode(G){const be=this._colors.get(G);return be?n.Util.makeHexColor(...be):G}};Je(I,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let j=I;t.ColorManager=j;const qe=class qe{constructor(G,be,xe,Oe,je,Re){oe(this,ie);oe(this,a,null);oe(this,w,new Map);oe(this,g,new Map);oe(this,z,null);oe(this,V,null);oe(this,X,new x);oe(this,W,0);oe(this,Q,new Set);oe(this,T,null);oe(this,H,null);oe(this,Y,new Set);oe(this,E,null);oe(this,s,new he);oe(this,i,!1);oe(this,p,!1);oe(this,M,null);oe(this,L,n.AnnotationEditorType.NONE);oe(this,N,new Set);oe(this,J,null);oe(this,re,this.blur.bind(this));oe(this,de,this.focus.bind(this));oe(this,te,this.copy.bind(this));oe(this,ye,this.cut.bind(this));oe(this,me,this.paste.bind(this));oe(this,_e,this.keydown.bind(this));oe(this,ne,this.onEditingAction.bind(this));oe(this,se,this.onPageChanging.bind(this));oe(this,S,this.onScaleChanging.bind(this));oe(this,B,this.onRotationChanging.bind(this));oe(this,Z,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});oe(this,ae,[0,0]);oe(this,ge,null);oe(this,Se,null);oe(this,Ae,null);ce(this,Se,G),ce(this,Ae,be),ce(this,z,xe),this._eventBus=Oe,this._eventBus._on("editingaction",e(this,ne)),this._eventBus._on("pagechanging",e(this,se)),this._eventBus._on("scalechanging",e(this,S)),this._eventBus._on("rotationchanging",e(this,B)),ce(this,V,je.annotationStorage),ce(this,E,je.filterFactory),ce(this,J,Re),this.viewParameters={realScale:c.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const G=qe.prototype,be=je=>{const{activeElement:Re}=document;return Re&&e(je,Se).contains(Re)&&je.hasSomethingToControl()},xe=this.TRANSLATE_SMALL,Oe=this.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new m([[["ctrl+a","mac+meta+a"],G.selectAll],[["ctrl+z","mac+meta+z"],G.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],G.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],G.delete],[["Escape","mac+Escape"],G.unselectAll],[["ArrowLeft","mac+ArrowLeft"],G.translateSelectedEditors,{args:[-xe,0],checker:be}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],G.translateSelectedEditors,{args:[-Oe,0],checker:be}],[["ArrowRight","mac+ArrowRight"],G.translateSelectedEditors,{args:[xe,0],checker:be}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],G.translateSelectedEditors,{args:[Oe,0],checker:be}],[["ArrowUp","mac+ArrowUp"],G.translateSelectedEditors,{args:[0,-xe],checker:be}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],G.translateSelectedEditors,{args:[0,-Oe],checker:be}],[["ArrowDown","mac+ArrowDown"],G.translateSelectedEditors,{args:[0,xe],checker:be}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],G.translateSelectedEditors,{args:[0,Oe],checker:be}]]))}destroy(){ee(this,ie,At).call(this),ee(this,ie,Wt).call(this),this._eventBus._off("editingaction",e(this,ne)),this._eventBus._off("pagechanging",e(this,se)),this._eventBus._off("scalechanging",e(this,S)),this._eventBus._off("rotationchanging",e(this,B));for(const G of e(this,g).values())G.destroy();e(this,g).clear(),e(this,w).clear(),e(this,Y).clear(),ce(this,a,null),e(this,N).clear(),e(this,X).destroy(),e(this,z).destroy()}get hcmFilter(){return(0,n.shadow)(this,"hcmFilter",e(this,J)?e(this,E).addHCMFilter(e(this,J).foreground,e(this,J).background):"none")}get direction(){return(0,n.shadow)(this,"direction",getComputedStyle(e(this,Se)).direction)}editAltText(G){var be;(be=e(this,z))==null||be.editAltText(this,G)}onPageChanging({pageNumber:G}){ce(this,W,G-1)}focusMainContainer(){e(this,Se).focus()}findParent(G,be){for(const xe of e(this,g).values()){const{x:Oe,y:je,width:Re,height:D}=xe.div.getBoundingClientRect();if(G>=Oe&&G<=Oe+Re&&be>=je&&be<=je+D)return xe}return null}disableUserSelect(G=!1){e(this,Ae).classList.toggle("noUserSelect",G)}addShouldRescale(G){e(this,Y).add(G)}removeShouldRescale(G){e(this,Y).delete(G)}onScaleChanging({scale:G}){this.commitOrRemove(),this.viewParameters.realScale=G*c.PixelsPerInch.PDF_TO_CSS_UNITS;for(const be of e(this,Y))be.onScaleChanging()}onRotationChanging({pagesRotation:G}){this.commitOrRemove(),this.viewParameters.rotation=G}addToAnnotationStorage(G){!G.isEmpty()&&e(this,V)&&!e(this,V).has(G.id)&&e(this,V).setValue(G.id,G)}blur(){if(!this.hasSelection)return;const{activeElement:G}=document;for(const be of e(this,N))if(be.div.contains(G)){ce(this,M,[be,G]),be._focusEventsAllowed=!1;break}}focus(){if(!e(this,M))return;const[G,be]=e(this,M);ce(this,M,null),be.addEventListener("focusin",()=>{G._focusEventsAllowed=!0},{once:!0}),be.focus()}addEditListeners(){ee(this,ie,$t).call(this),ee(this,ie,Ht).call(this)}removeEditListeners(){ee(this,ie,At).call(this),ee(this,ie,Gt).call(this)}copy(G){var xe;if(G.preventDefault(),(xe=e(this,a))==null||xe.commitOrRemove(),!this.hasSelection)return;const be=[];for(const Oe of e(this,N)){const je=Oe.serialize(!0);je&&be.push(je)}be.length!==0&&G.clipboardData.setData("application/pdfjs",JSON.stringify(be))}cut(G){this.copy(G),this.delete()}paste(G){G.preventDefault();const{clipboardData:be}=G;for(const je of be.items)for(const Re of e(this,H))if(Re.isHandlingMimeForPasting(je.type)){Re.paste(je,this.currentLayer);return}let xe=be.getData("application/pdfjs");if(!xe)return;try{xe=JSON.parse(xe)}catch(je){(0,n.warn)(`paste: "${je.message}".`);return}if(!Array.isArray(xe))return;this.unselectAll();const Oe=this.currentLayer;try{const je=[];for(const F of xe){const K=Oe.deserialize(F);if(!K)return;je.push(K)}const Re=()=>{for(const F of je)ee(this,ie,Vt).call(this,F);ee(this,ie,zt).call(this,je)},D=()=>{for(const F of je)F.remove()};this.addCommands({cmd:Re,undo:D,mustExec:!0})}catch(je){(0,n.warn)(`paste: "${je.message}".`)}}keydown(G){var be;(be=this.getActive())!=null&&be.shouldGetKeyboardEvents()||qe._keyboardManager.exec(this,G)}onEditingAction(G){["undo","redo","delete","selectAll"].includes(G.name)&&this[G.name]()}setEditingState(G){G?(ee(this,ie,Sn).call(this),ee(this,ie,$t).call(this),ee(this,ie,Ht).call(this),ee(this,ie,et).call(this,{isEditing:e(this,L)!==n.AnnotationEditorType.NONE,isEmpty:ee(this,ie,ft).call(this),hasSomethingToUndo:e(this,X).hasSomethingToUndo(),hasSomethingToRedo:e(this,X).hasSomethingToRedo(),hasSelectedEditor:!1})):(ee(this,ie,Wt).call(this),ee(this,ie,At).call(this),ee(this,ie,Gt).call(this),ee(this,ie,et).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(G){if(!e(this,H)){ce(this,H,G);for(const be of e(this,H))ee(this,ie,dt).call(this,be.defaultPropertiesToUpdate)}}getId(){return e(this,s).getId()}get currentLayer(){return e(this,g).get(e(this,W))}getLayer(G){return e(this,g).get(G)}get currentPageIndex(){return e(this,W)}addLayer(G){e(this,g).set(G.pageIndex,G),e(this,i)?G.enable():G.disable()}removeLayer(G){e(this,g).delete(G.pageIndex)}updateMode(G,be=null){if(e(this,L)!==G){if(ce(this,L,G),G===n.AnnotationEditorType.NONE){this.setEditingState(!1),ee(this,ie,wn).call(this);return}this.setEditingState(!0),ee(this,ie,Tn).call(this),this.unselectAll();for(const xe of e(this,g).values())xe.updateMode(G);if(be){for(const xe of e(this,w).values())if(xe.annotationElementId===be){this.setSelected(xe),xe.enterInEditMode();break}}}}updateToolbar(G){G!==e(this,L)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:G})}updateParams(G,be){if(e(this,H)){if(G===n.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(G);return}for(const xe of e(this,N))xe.updateParams(G,be);for(const xe of e(this,H))xe.updateDefaultParams(G,be)}}enableWaiting(G=!1){if(e(this,p)!==G){ce(this,p,G);for(const be of e(this,g).values())G?be.disableClick():be.enableClick(),be.div.classList.toggle("waiting",G)}}getEditors(G){const be=[];for(const xe of e(this,w).values())xe.pageIndex===G&&be.push(xe);return be}getEditor(G){return e(this,w).get(G)}addEditor(G){e(this,w).set(G.id,G)}removeEditor(G){var be;e(this,w).delete(G.id),this.unselect(G),(!G.annotationElementId||!e(this,Q).has(G.annotationElementId))&&((be=e(this,V))==null||be.remove(G.id))}addDeletedAnnotationElement(G){e(this,Q).add(G.annotationElementId),G.deleted=!0}isDeletedAnnotationElement(G){return e(this,Q).has(G)}removeDeletedAnnotationElement(G){e(this,Q).delete(G.annotationElementId),G.deleted=!1}setActiveEditor(G){e(this,a)!==G&&(ce(this,a,G),G&&ee(this,ie,dt).call(this,G.propertiesToUpdate))}toggleSelected(G){if(e(this,N).has(G)){e(this,N).delete(G),G.unselect(),ee(this,ie,et).call(this,{hasSelectedEditor:this.hasSelection});return}e(this,N).add(G),G.select(),ee(this,ie,dt).call(this,G.propertiesToUpdate),ee(this,ie,et).call(this,{hasSelectedEditor:!0})}setSelected(G){for(const be of e(this,N))be!==G&&be.unselect();e(this,N).clear(),e(this,N).add(G),G.select(),ee(this,ie,dt).call(this,G.propertiesToUpdate),ee(this,ie,et).call(this,{hasSelectedEditor:!0})}isSelected(G){return e(this,N).has(G)}unselect(G){G.unselect(),e(this,N).delete(G),ee(this,ie,et).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return e(this,N).size!==0}undo(){e(this,X).undo(),ee(this,ie,et).call(this,{hasSomethingToUndo:e(this,X).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ee(this,ie,ft).call(this)})}redo(){e(this,X).redo(),ee(this,ie,et).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:e(this,X).hasSomethingToRedo(),isEmpty:ee(this,ie,ft).call(this)})}addCommands(G){e(this,X).add(G),ee(this,ie,et).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ee(this,ie,ft).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const G=[...e(this,N)],be=()=>{for(const Oe of G)Oe.remove()},xe=()=>{for(const Oe of G)ee(this,ie,Vt).call(this,Oe)};this.addCommands({cmd:be,undo:xe,mustExec:!0})}commitOrRemove(){var G;(G=e(this,a))==null||G.commitOrRemove()}hasSomethingToControl(){return e(this,a)||this.hasSelection}selectAll(){for(const G of e(this,N))G.commit();ee(this,ie,zt).call(this,e(this,w).values())}unselectAll(){if(e(this,a)){e(this,a).commitOrRemove();return}if(this.hasSelection){for(const G of e(this,N))G.unselect();e(this,N).clear(),ee(this,ie,et).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(G,be,xe=!1){if(xe||this.commitOrRemove(),!this.hasSelection)return;e(this,ae)[0]+=G,e(this,ae)[1]+=be;const[Oe,je]=e(this,ae),Re=[...e(this,N)],D=1e3;e(this,ge)&&clearTimeout(e(this,ge)),ce(this,ge,setTimeout(()=>{ce(this,ge,null),e(this,ae)[0]=e(this,ae)[1]=0,this.addCommands({cmd:()=>{for(const F of Re)e(this,w).has(F.id)&&F.translateInPage(Oe,je)},undo:()=>{for(const F of Re)e(this,w).has(F.id)&&F.translateInPage(-Oe,-je)},mustExec:!1})},D));for(const F of Re)F.translateInPage(G,be)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ce(this,T,new Map);for(const G of e(this,N))e(this,T).set(G,{savedX:G.x,savedY:G.y,savedPageIndex:G.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!e(this,T))return!1;this.disableUserSelect(!1);const G=e(this,T);ce(this,T,null);let be=!1;for(const[{x:Oe,y:je,pageIndex:Re},D]of G)D.newX=Oe,D.newY=je,D.newPageIndex=Re,be||(be=Oe!==D.savedX||je!==D.savedY||Re!==D.savedPageIndex);if(!be)return!1;const xe=(Oe,je,Re,D)=>{if(e(this,w).has(Oe.id)){const F=e(this,g).get(D);F?Oe._setParentAndPosition(F,je,Re):(Oe.pageIndex=D,Oe.x=je,Oe.y=Re)}};return this.addCommands({cmd:()=>{for(const[Oe,{newX:je,newY:Re,newPageIndex:D}]of G)xe(Oe,je,Re,D)},undo:()=>{for(const[Oe,{savedX:je,savedY:Re,savedPageIndex:D}]of G)xe(Oe,je,Re,D)},mustExec:!0}),!0}dragSelectedEditors(G,be){if(e(this,T))for(const xe of e(this,T).keys())xe.drag(G,be)}rebuild(G){if(G.parent===null){const be=this.getLayer(G.pageIndex);be?(be.changeParent(G),be.addOrRebuild(G)):(this.addEditor(G),this.addToAnnotationStorage(G),G.rebuild())}else G.parent.addOrRebuild(G)}isActive(G){return e(this,a)===G}getActive(){return e(this,a)}getMode(){return e(this,L)}get imageManager(){return(0,n.shadow)(this,"imageManager",new C)}};a=new WeakMap,w=new WeakMap,g=new WeakMap,z=new WeakMap,V=new WeakMap,X=new WeakMap,W=new WeakMap,Q=new WeakMap,T=new WeakMap,H=new WeakMap,Y=new WeakMap,E=new WeakMap,s=new WeakMap,i=new WeakMap,p=new WeakMap,M=new WeakMap,L=new WeakMap,N=new WeakMap,J=new WeakMap,re=new WeakMap,de=new WeakMap,te=new WeakMap,ye=new WeakMap,me=new WeakMap,_e=new WeakMap,ne=new WeakMap,se=new WeakMap,S=new WeakMap,B=new WeakMap,Z=new WeakMap,ae=new WeakMap,ge=new WeakMap,Se=new WeakMap,Ae=new WeakMap,ie=new WeakSet,Sn=function(){window.addEventListener("focus",e(this,de)),window.addEventListener("blur",e(this,re))},Wt=function(){window.removeEventListener("focus",e(this,de)),window.removeEventListener("blur",e(this,re))},$t=function(){window.addEventListener("keydown",e(this,_e),{capture:!0})},At=function(){window.removeEventListener("keydown",e(this,_e),{capture:!0})},Ht=function(){document.addEventListener("copy",e(this,te)),document.addEventListener("cut",e(this,ye)),document.addEventListener("paste",e(this,me))},Gt=function(){document.removeEventListener("copy",e(this,te)),document.removeEventListener("cut",e(this,ye)),document.removeEventListener("paste",e(this,me))},et=function(G){Object.entries(G).some(([xe,Oe])=>e(this,Z)[xe]!==Oe)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(e(this,Z),G)})},dt=function(G){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:G})},Tn=function(){if(!e(this,i)){ce(this,i,!0);for(const G of e(this,g).values())G.enable()}},wn=function(){if(this.unselectAll(),e(this,i)){ce(this,i,!1);for(const G of e(this,g).values())G.disable()}},Vt=function(G){const be=e(this,g).get(G.pageIndex);be?be.addOrRebuild(G):this.addEditor(G)},ft=function(){if(e(this,w).size===0)return!0;if(e(this,w).size===1)for(const G of e(this,w).values())return G.isEmpty();return!1},zt=function(G){e(this,N).clear();for(const be of G)be.isEmpty()||(e(this,N).add(be),be.select());ee(this,ie,et).call(this,{hasSelectedEditor:!0})},Je(qe,"TRANSLATE_SMALL",1),Je(qe,"TRANSLATE_BIG",10);let U=qe;t.AnnotationEditorUIManager=U},(P,t,k)=>{var W,Q,T,H,Y,E,s,i,p,M,L,N,ot,lt,qt,Et,St,pt,gt;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=l,t.getColorValues=w,t.getCurrentTransform=g,t.getCurrentTransformInverse=z,t.getFilenameFromUrl=f,t.getPdfFilenameFromUrl=A,t.getRGB=a,t.getXfaPageViewport=I,t.isDataScheme=R,t.isPdfFile=b,t.isValidFetchUrl=_,t.loadScript=d,t.noContextMenu=o,t.setLayerDimensions=V;var n=k(7),c=k(1);const q="http://www.w3.org/2000/svg",X=class X{};Je(X,"CSS",96),Je(X,"PDF",72),Je(X,"PDF_TO_CSS_UNITS",X.CSS/X.PDF);let $=X;t.PixelsPerInch=$;class he extends n.BaseFilterFactory{constructor({docId:S,ownerDocument:B=globalThis.document}={}){super();oe(this,N);oe(this,W);oe(this,Q);oe(this,T);oe(this,H);oe(this,Y);oe(this,E);oe(this,s);oe(this,i);oe(this,p);oe(this,M);oe(this,L,0);ce(this,T,S),ce(this,H,B)}addFilter(S){if(!S)return"none";let B=e(this,N,ot).get(S);if(B)return B;let Z,ae,ge,Se;if(S.length===1){const we=S[0],We=new Array(256);for(let Ue=0;Ue<256;Ue++)We[Ue]=we[Ue]/255;Se=Z=ae=ge=We.join(",")}else{const[we,We,Ue]=S,ze=new Array(256),Fe=new Array(256),Ie=new Array(256);for(let He=0;He<256;He++)ze[He]=we[He]/255,Fe[He]=We[He]/255,Ie[He]=Ue[He]/255;Z=ze.join(","),ae=Fe.join(","),ge=Ie.join(","),Se=`${Z}${ae}${ge}`}if(B=e(this,N,ot).get(Se),B)return e(this,N,ot).set(S,B),B;const Ae=`g_${e(this,T)}_transfer_map_${ut(this,L)._++}`,ie=`url(#${Ae})`;e(this,N,ot).set(S,ie),e(this,N,ot).set(Se,ie);const Pe=ee(this,N,Et).call(this,Ae);return ee(this,N,pt).call(this,Z,ae,ge,Pe),ie}addHCMFilter(S,B){var We;const Z=`${S}-${B}`;if(e(this,E)===Z)return e(this,s);if(ce(this,E,Z),ce(this,s,"none"),(We=e(this,Y))==null||We.remove(),!S||!B)return e(this,s);const ae=ee(this,N,gt).call(this,S);S=c.Util.makeHexColor(...ae);const ge=ee(this,N,gt).call(this,B);if(B=c.Util.makeHexColor(...ge),e(this,N,lt).style.color="",S==="#000000"&&B==="#ffffff"||S===B)return e(this,s);const Se=new Array(256);for(let Ue=0;Ue<=255;Ue++){const ze=Ue/255;Se[Ue]=ze<=.03928?ze/12.92:((ze+.055)/1.055)**2.4}const Ae=Se.join(","),ie=`g_${e(this,T)}_hcm_filter`,Pe=ce(this,i,ee(this,N,Et).call(this,ie));ee(this,N,pt).call(this,Ae,Ae,Ae,Pe),ee(this,N,qt).call(this,Pe);const we=(Ue,ze)=>{const Fe=ae[Ue]/255,Ie=ge[Ue]/255,He=new Array(ze+1);for(let Xe=0;Xe<=ze;Xe++)He[Xe]=Fe+Xe/ze*(Ie-Fe);return He.join(",")};return ee(this,N,pt).call(this,we(0,5),we(1,5),we(2,5),Pe),ce(this,s,`url(#${ie})`),e(this,s)}addHighlightHCMFilter(S,B,Z,ae){var Ie;const ge=`${S}-${B}-${Z}-${ae}`;if(e(this,p)===ge)return e(this,M);if(ce(this,p,ge),ce(this,M,"none"),(Ie=e(this,i))==null||Ie.remove(),!S||!B)return e(this,M);const[Se,Ae]=[S,B].map(ee(this,N,gt).bind(this));let ie=Math.round(.2126*Se[0]+.7152*Se[1]+.0722*Se[2]),Pe=Math.round(.2126*Ae[0]+.7152*Ae[1]+.0722*Ae[2]),[we,We]=[Z,ae].map(ee(this,N,gt).bind(this));Pe<ie&&([ie,Pe,we,We]=[Pe,ie,We,we]),e(this,N,lt).style.color="";const Ue=(He,Xe,Ee)=>{const le=new Array(256),ue=(Pe-ie)/Ee,ke=He/255,qe=(Xe-He)/(255*Ee);let Ve=0;for(let G=0;G<=Ee;G++){const be=Math.round(ie+G*ue),xe=ke+G*qe;for(let Oe=Ve;Oe<=be;Oe++)le[Oe]=xe;Ve=be+1}for(let G=Ve;G<256;G++)le[G]=le[Ve-1];return le.join(",")},ze=`g_${e(this,T)}_hcm_highlight_filter`,Fe=ce(this,i,ee(this,N,Et).call(this,ze));return ee(this,N,qt).call(this,Fe),ee(this,N,pt).call(this,Ue(we[0],We[0],5),Ue(we[1],We[1],5),Ue(we[2],We[2],5),Fe),ce(this,M,`url(#${ze})`),e(this,M)}destroy(S=!1){S&&(e(this,s)||e(this,M))||(e(this,Q)&&(e(this,Q).parentNode.parentNode.remove(),ce(this,Q,null)),e(this,W)&&(e(this,W).clear(),ce(this,W,null)),ce(this,L,0))}}W=new WeakMap,Q=new WeakMap,T=new WeakMap,H=new WeakMap,Y=new WeakMap,E=new WeakMap,s=new WeakMap,i=new WeakMap,p=new WeakMap,M=new WeakMap,L=new WeakMap,N=new WeakSet,ot=function(){return e(this,W)||ce(this,W,new Map)},lt=function(){if(!e(this,Q)){const S=e(this,H).createElement("div"),{style:B}=S;B.visibility="hidden",B.contain="strict",B.width=B.height=0,B.position="absolute",B.top=B.left=0,B.zIndex=-1;const Z=e(this,H).createElementNS(q,"svg");Z.setAttribute("width",0),Z.setAttribute("height",0),ce(this,Q,e(this,H).createElementNS(q,"defs")),S.append(Z),Z.append(e(this,Q)),e(this,H).body.append(S)}return e(this,Q)},qt=function(S){const B=e(this,H).createElementNS(q,"feColorMatrix");B.setAttribute("type","matrix"),B.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),S.append(B)},Et=function(S){const B=e(this,H).createElementNS(q,"filter");return B.setAttribute("color-interpolation-filters","sRGB"),B.setAttribute("id",S),e(this,N,lt).append(B),B},St=function(S,B,Z){const ae=e(this,H).createElementNS(q,B);ae.setAttribute("type","discrete"),ae.setAttribute("tableValues",Z),S.append(ae)},pt=function(S,B,Z,ae){const ge=e(this,H).createElementNS(q,"feComponentTransfer");ae.append(ge),ee(this,N,St).call(this,ge,"feFuncR",S),ee(this,N,St).call(this,ge,"feFuncG",B),ee(this,N,St).call(this,ge,"feFuncB",Z)},gt=function(S){return e(this,N,lt).style.color=S,a(getComputedStyle(e(this,N,lt)).getPropertyValue("color"))},t.DOMFilterFactory=he;class C extends n.BaseCanvasFactory{constructor({ownerDocument:se=globalThis.document}={}){super(),this._document=se}_createCanvas(se,S){const B=this._document.createElement("canvas");return B.width=se,B.height=S,B}}t.DOMCanvasFactory=C;async function x(ne,se=!1){if(_(ne,document.baseURI)){const S=await fetch(ne);if(!S.ok)throw new Error(S.statusText);return se?new Uint8Array(await S.arrayBuffer()):(0,c.stringToBytes)(await S.text())}return new Promise((S,B)=>{const Z=new XMLHttpRequest;Z.open("GET",ne,!0),se&&(Z.responseType="arraybuffer"),Z.onreadystatechange=()=>{if(Z.readyState===XMLHttpRequest.DONE){if(Z.status===200||Z.status===0){let ae;if(se&&Z.response?ae=new Uint8Array(Z.response):!se&&Z.responseText&&(ae=(0,c.stringToBytes)(Z.responseText)),ae){S(ae);return}}B(new Error(Z.statusText))}},Z.send(null)})}class m extends n.BaseCMapReaderFactory{_fetchData(se,S){return x(se,this.isCompressed).then(B=>({cMapData:B,compressionType:S}))}}t.DOMCMapReaderFactory=m;class j extends n.BaseStandardFontDataFactory{_fetchData(se){return x(se,!0)}}t.DOMStandardFontDataFactory=j;class U extends n.BaseSVGFactory{_createSVG(se){return document.createElementNS(q,se)}}t.DOMSVGFactory=U;class v{constructor({viewBox:se,scale:S,rotation:B,offsetX:Z=0,offsetY:ae=0,dontFlip:ge=!1}){this.viewBox=se,this.scale=S,this.rotation=B,this.offsetX=Z,this.offsetY=ae;const Se=(se[2]+se[0])/2,Ae=(se[3]+se[1])/2;let ie,Pe,we,We;switch(B%=360,B<0&&(B+=360),B){case 180:ie=-1,Pe=0,we=0,We=1;break;case 90:ie=0,Pe=1,we=1,We=0;break;case 270:ie=0,Pe=-1,we=-1,We=0;break;case 0:ie=1,Pe=0,we=0,We=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ge&&(we=-we,We=-We);let Ue,ze,Fe,Ie;ie===0?(Ue=Math.abs(Ae-se[1])*S+Z,ze=Math.abs(Se-se[0])*S+ae,Fe=(se[3]-se[1])*S,Ie=(se[2]-se[0])*S):(Ue=Math.abs(Se-se[0])*S+Z,ze=Math.abs(Ae-se[1])*S+ae,Fe=(se[2]-se[0])*S,Ie=(se[3]-se[1])*S),this.transform=[ie*S,Pe*S,we*S,We*S,Ue-ie*S*Se-we*S*Ae,ze-Pe*S*Se-We*S*Ae],this.width=Fe,this.height=Ie}get rawDims(){const{viewBox:se}=this;return(0,c.shadow)(this,"rawDims",{pageWidth:se[2]-se[0],pageHeight:se[3]-se[1],pageX:se[0],pageY:se[1]})}clone({scale:se=this.scale,rotation:S=this.rotation,offsetX:B=this.offsetX,offsetY:Z=this.offsetY,dontFlip:ae=!1}={}){return new v({viewBox:this.viewBox.slice(),scale:se,rotation:S,offsetX:B,offsetY:Z,dontFlip:ae})}convertToViewportPoint(se,S){return c.Util.applyTransform([se,S],this.transform)}convertToViewportRectangle(se){const S=c.Util.applyTransform([se[0],se[1]],this.transform),B=c.Util.applyTransform([se[2],se[3]],this.transform);return[S[0],S[1],B[0],B[1]]}convertToPdfPoint(se,S){return c.Util.applyInverseTransform([se,S],this.transform)}}t.PageViewport=v;class y extends c.BaseException{constructor(se,S=0){super(se,"RenderingCancelledException"),this.extraDelay=S}}t.RenderingCancelledException=y;function R(ne){const se=ne.length;let S=0;for(;S<se&&ne[S].trim()==="";)S++;return ne.substring(S,S+5).toLowerCase()==="data:"}function b(ne){return typeof ne=="string"&&/\.pdf$/i.test(ne)}function f(ne,se=!1){return se||([ne]=ne.split(/[#?]/,1)),ne.substring(ne.lastIndexOf("/")+1)}function A(ne,se="document.pdf"){if(typeof ne!="string")return se;if(R(ne))return(0,c.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),se;const S=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,B=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Z=S.exec(ne);let ae=B.exec(Z[1])||B.exec(Z[2])||B.exec(Z[3]);if(ae&&(ae=ae[0],ae.includes("%")))try{ae=B.exec(decodeURIComponent(ae))[0]}catch{}return ae||se}class O{constructor(){Je(this,"started",Object.create(null));Je(this,"times",[])}time(se){se in this.started&&(0,c.warn)(`Timer is already running for ${se}`),this.started[se]=Date.now()}timeEnd(se){se in this.started||(0,c.warn)(`Timer has not been started for ${se}`),this.times.push({name:se,start:this.started[se],end:Date.now()}),delete this.started[se]}toString(){const se=[];let S=0;for(const{name:B}of this.times)S=Math.max(B.length,S);for(const{name:B,start:Z,end:ae}of this.times)se.push(`${B.padEnd(S)} ${ae-Z}ms
`);return se.join("")}}t.StatTimer=O;function _(ne,se){try{const{protocol:S}=se?new URL(ne,se):new URL(ne);return S==="http:"||S==="https:"}catch{return!1}}function o(ne){ne.preventDefault()}function d(ne,se=!1){return new Promise((S,B)=>{const Z=document.createElement("script");Z.src=ne,Z.onload=function(ae){se&&Z.remove(),S(ae)},Z.onerror=function(){B(new Error(`Cannot load script at: ${Z.src}`))},(document.head||document.documentElement).append(Z)})}function l(ne){console.log("Deprecated API usage: "+ne)}let h;class u{static toDateObject(se){if(!se||typeof se!="string")return null;h||(h=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const S=h.exec(se);if(!S)return null;const B=parseInt(S[1],10);let Z=parseInt(S[2],10);Z=Z>=1&&Z<=12?Z-1:0;let ae=parseInt(S[3],10);ae=ae>=1&&ae<=31?ae:1;let ge=parseInt(S[4],10);ge=ge>=0&&ge<=23?ge:0;let Se=parseInt(S[5],10);Se=Se>=0&&Se<=59?Se:0;let Ae=parseInt(S[6],10);Ae=Ae>=0&&Ae<=59?Ae:0;const ie=S[7]||"Z";let Pe=parseInt(S[8],10);Pe=Pe>=0&&Pe<=23?Pe:0;let we=parseInt(S[9],10)||0;return we=we>=0&&we<=59?we:0,ie==="-"?(ge+=Pe,Se+=we):ie==="+"&&(ge-=Pe,Se-=we),new Date(Date.UTC(B,Z,ae,ge,Se,Ae))}}t.PDFDateString=u;function I(ne,{scale:se=1,rotation:S=0}){const{width:B,height:Z}=ne.attributes.style,ae=[0,0,parseInt(B),parseInt(Z)];return new v({viewBox:ae,scale:se,rotation:S})}function a(ne){if(ne.startsWith("#")){const se=parseInt(ne.slice(1),16);return[(se&16711680)>>16,(se&65280)>>8,se&255]}return ne.startsWith("rgb(")?ne.slice(4,-1).split(",").map(se=>parseInt(se)):ne.startsWith("rgba(")?ne.slice(5,-1).split(",").map(se=>parseInt(se)).slice(0,3):((0,c.warn)(`Not a valid color format: "${ne}"`),[0,0,0])}function w(ne){const se=document.createElement("span");se.style.visibility="hidden",document.body.append(se);for(const S of ne.keys()){se.style.color=S;const B=window.getComputedStyle(se).color;ne.set(S,a(B))}se.remove()}function g(ne){const{a:se,b:S,c:B,d:Z,e:ae,f:ge}=ne.getTransform();return[se,S,B,Z,ae,ge]}function z(ne){const{a:se,b:S,c:B,d:Z,e:ae,f:ge}=ne.getTransform().invertSelf();return[se,S,B,Z,ae,ge]}function V(ne,se,S=!1,B=!0){if(se instanceof v){const{pageWidth:Z,pageHeight:ae}=se.rawDims,{style:ge}=ne,Se=c.FeatureTest.isCSSRoundSupported,Ae=`var(--scale-factor) * ${Z}px`,ie=`var(--scale-factor) * ${ae}px`,Pe=Se?`round(${Ae}, 1px)`:`calc(${Ae})`,we=Se?`round(${ie}, 1px)`:`calc(${ie})`;!S||se.rotation%180===0?(ge.width=Pe,ge.height=we):(ge.width=we,ge.height=Pe)}B&&ne.setAttribute("data-main-rotation",se.rotation)}},(P,t,k)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var n=k(1);class c{constructor(){this.constructor===c&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(m){return"none"}addHCMFilter(m,j){return"none"}addHighlightHCMFilter(m,j,U,v){return"none"}destroy(m=!1){}}t.BaseFilterFactory=c;class q{constructor(){this.constructor===q&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(m,j){if(m<=0||j<=0)throw new Error("Invalid canvas size");const U=this._createCanvas(m,j);return{canvas:U,context:U.getContext("2d")}}reset(m,j,U){if(!m.canvas)throw new Error("Canvas is not specified");if(j<=0||U<=0)throw new Error("Invalid canvas size");m.canvas.width=j,m.canvas.height=U}destroy(m){if(!m.canvas)throw new Error("Canvas is not specified");m.canvas.width=0,m.canvas.height=0,m.canvas=null,m.context=null}_createCanvas(m,j){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=q;class ${constructor({baseUrl:m=null,isCompressed:j=!0}){this.constructor===$&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=m,this.isCompressed=j}async fetch({name:m}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!m)throw new Error("CMap name must be specified.");const j=this.baseUrl+m+(this.isCompressed?".bcmap":""),U=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(j,U).catch(v=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${j}`)})}_fetchData(m,j){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=$;class he{constructor({baseUrl:m=null}){this.constructor===he&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=m}async fetch({filename:m}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!m)throw new Error("Font filename must be specified.");const j=`${this.baseUrl}${m}`;return this._fetchData(j).catch(U=>{throw new Error(`Unable to load font data at: ${j}`)})}_fetchData(m){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=he;class C{constructor(){this.constructor===C&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(m,j,U=!1){if(m<=0||j<=0)throw new Error("Invalid SVG dimensions");const v=this._createSVG("svg:svg");return v.setAttribute("version","1.1"),U||(v.setAttribute("width",`${m}px`),v.setAttribute("height",`${j}px`)),v.setAttribute("preserveAspectRatio","none"),v.setAttribute("viewBox",`0 0 ${m} ${j}`),v}createElement(m){if(typeof m!="string")throw new Error("Invalid SVG element type");return this._createSVG(m)}_createSVG(m){(0,n.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=C},(P,t,k)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var n=k(1);const c=3285377520,q=4294901760,$=65535;class he{constructor(x){this.h1=x?x&4294967295:c,this.h2=x?x&4294967295:c}update(x){let m,j;if(typeof x=="string"){m=new Uint8Array(x.length*2),j=0;for(let l=0,h=x.length;l<h;l++){const u=x.charCodeAt(l);u<=255?m[j++]=u:(m[j++]=u>>>8,m[j++]=u&255)}}else if((0,n.isArrayBuffer)(x))m=x.slice(),j=m.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const U=j>>2,v=j-U*4,y=new Uint32Array(m.buffer,0,U);let R=0,b=0,f=this.h1,A=this.h2;const O=3432918353,_=461845907,o=O&$,d=_&$;for(let l=0;l<U;l++)l&1?(R=y[l],R=R*O&q|R*o&$,R=R<<15|R>>>17,R=R*_&q|R*d&$,f^=R,f=f<<13|f>>>19,f=f*5+3864292196):(b=y[l],b=b*O&q|b*o&$,b=b<<15|b>>>17,b=b*_&q|b*d&$,A^=b,A=A<<13|A>>>19,A=A*5+3864292196);switch(R=0,v){case 3:R^=m[U*4+2]<<16;case 2:R^=m[U*4+1]<<8;case 1:R^=m[U*4],R=R*O&q|R*o&$,R=R<<15|R>>>17,R=R*_&q|R*d&$,U&1?f^=R:A^=R}this.h1=f,this.h2=A}hexdigest(){let x=this.h1,m=this.h2;return x^=m>>>1,x=x*3981806797&q|x*36045&$,m=m*4283543511&q|((m<<16|x>>>16)*2950163797&q)>>>16,x^=m>>>1,x=x*444984403&q|x*60499&$,m=m*3301882366&q|((m<<16|x>>>16)*3120437893&q)>>>16,x^=m>>>1,(x>>>0).toString(16).padStart(8,"0")+(m>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=he},(P,t,k)=>{var $;Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var n=k(1);class c{constructor({ownerDocument:C=globalThis.document,styleElement:x=null}){oe(this,$,new Set);this._document=C,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(C){this.nativeFontFaces.add(C),this._document.fonts.add(C)}removeNativeFontFace(C){this.nativeFontFaces.delete(C),this._document.fonts.delete(C)}insertRule(C){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const x=this.styleElement.sheet;x.insertRule(C,x.cssRules.length)}clear(){for(const C of this.nativeFontFaces)this._document.fonts.delete(C);this.nativeFontFaces.clear(),e(this,$).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(C){if(!(!C||e(this,$).has(C.loadedName))){if((0,n.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:x,src:m,style:j}=C,U=new FontFace(x,m,j);this.addNativeFontFace(U);try{await U.load(),e(this,$).add(x)}catch{(0,n.warn)(`Cannot load system font: ${C.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(U)}return}(0,n.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(C){if(C.attached||C.missingFile&&!C.systemFontInfo)return;if(C.attached=!0,C.systemFontInfo){await this.loadSystemFont(C.systemFontInfo);return}if(this.isFontLoadingAPISupported){const m=C.createNativeFontFace();if(m){this.addNativeFontFace(m);try{await m.loaded}catch(j){throw(0,n.warn)(`Failed to load font '${m.family}': '${j}'.`),C.disableFontFace=!0,j}}return}const x=C.createFontFaceRule();if(x){if(this.insertRule(x),this.isSyncFontLoadingSupported)return;await new Promise(m=>{const j=this._queueLoadingCallback(m);this._prepareFontLoadEvent(C,j)})}}get isFontLoadingAPISupported(){var x;const C=!!((x=this._document)!=null&&x.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",C)}get isSyncFontLoadingSupported(){let C=!1;return(n.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(C=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",C)}_queueLoadingCallback(C){function x(){for((0,n.assert)(!j.done,"completeRequest() cannot be called twice."),j.done=!0;m.length>0&&m[0].done;){const U=m.shift();setTimeout(U.callback,0)}}const{loadingRequests:m}=this,j={done:!1,complete:x,callback:C};return m.push(j),j}get _loadTestFont(){const C=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",C)}_prepareFontLoadEvent(C,x){function m(a,w){return a.charCodeAt(w)<<24|a.charCodeAt(w+1)<<16|a.charCodeAt(w+2)<<8|a.charCodeAt(w+3)&255}function j(a,w,g,z){const V=a.substring(0,w),X=a.substring(w+g);return V+z+X}let U,v;const y=this._document.createElement("canvas");y.width=1,y.height=1;const R=y.getContext("2d");let b=0;function f(a,w){if(++b>30){(0,n.warn)("Load test font never loaded."),w();return}if(R.font="30px "+a,R.fillText(".",0,20),R.getImageData(0,0,1,1).data[3]>0){w();return}setTimeout(f.bind(null,a,w))}const A=`lt${Date.now()}${this.loadTestFontId++}`;let O=this._loadTestFont;O=j(O,976,A.length,A);const o=16,d=1482184792;let l=m(O,o);for(U=0,v=A.length-3;U<v;U+=4)l=l-d+m(A,U)|0;U<A.length&&(l=l-d+m(A+"XXX",U)|0),O=j(O,o,4,(0,n.string32)(l));const h=`url(data:font/opentype;base64,${btoa(O)});`,u=`@font-face {font-family:"${A}";src:${h}}`;this.insertRule(u);const I=this._document.createElement("div");I.style.visibility="hidden",I.style.width=I.style.height="10px",I.style.position="absolute",I.style.top=I.style.left="0px";for(const a of[C.loadedName,A]){const w=this._document.createElement("span");w.textContent="Hi",w.style.fontFamily=a,I.append(w)}this._document.body.append(I),f(A,()=>{I.remove(),x.complete()})}}$=new WeakMap,t.FontLoader=c;class q{constructor(C,{isEvalSupported:x=!0,disableFontFace:m=!1,ignoreErrors:j=!1,inspectFont:U=null}){this.compiledGlyphs=Object.create(null);for(const v in C)this[v]=C[v];this.isEvalSupported=x!==!1,this.disableFontFace=m===!0,this.ignoreErrors=j===!0,this._inspectFont=U}createNativeFontFace(){var x;if(!this.data||this.disableFontFace)return null;let C;if(!this.cssFontInfo)C=new FontFace(this.loadedName,this.data,{});else{const m={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(m.style=`oblique ${this.cssFontInfo.italicAngle}deg`),C=new FontFace(this.cssFontInfo.fontFamily,this.data,m)}return(x=this._inspectFont)==null||x.call(this,this),C}createFontFaceRule(){var j;if(!this.data||this.disableFontFace)return null;const C=(0,n.bytesToString)(this.data),x=`url(data:${this.mimetype};base64,${btoa(C)});`;let m;if(!this.cssFontInfo)m=`@font-face {font-family:"${this.loadedName}";src:${x}}`;else{let U=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(U+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),m=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${U}src:${x}}`}return(j=this._inspectFont)==null||j.call(this,this,x),m}getPathGenerator(C,x){if(this.compiledGlyphs[x]!==void 0)return this.compiledGlyphs[x];let m;try{m=C.get(this.loadedName+"_path_"+x)}catch(j){if(!this.ignoreErrors)throw j;return(0,n.warn)(`getPathGenerator - ignoring character: "${j}".`),this.compiledGlyphs[x]=function(U,v){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const j=[];for(const U of m){const v=U.args!==void 0?U.args.join(","):"";j.push("c.",U.cmd,"(",v,`);
`)}return this.compiledGlyphs[x]=new Function("c","size",j.join(""))}return this.compiledGlyphs[x]=function(j,U){for(const v of m)v.cmd==="scale"&&(v.args=[U,-U]),j[v.cmd].apply(j,v.args)}}}t.FontFaceObject=q},(P,t,k)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var n=k(7);k(1);const c=function(x){return new Promise((m,j)=>{require$$5.readFile(x,(v,y)=>{if(v||!y){j(new Error(v));return}m(new Uint8Array(y))})})};class q extends n.BaseFilterFactory{}t.NodeFilterFactory=q;class $ extends n.BaseCanvasFactory{_createCanvas(m,j){return require$$5.createCanvas(m,j)}}t.NodeCanvasFactory=$;class he extends n.BaseCMapReaderFactory{_fetchData(m,j){return c(m).then(U=>({cMapData:U,compressionType:j}))}}t.NodeCMapReaderFactory=he;class C extends n.BaseStandardFontDataFactory{_fetchData(m){return c(m)}}t.NodeStandardFontDataFactory=C},(P,t,k)=>{var Q,Xt,Yt;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var n=k(1),c=k(6),q=k(12),$=k(13);const he=16,C=100,x=4096,m=15,j=10,U=1e3,v=16;function y(E,s){if(E._removeMirroring)throw new Error("Context is already forwarding operations.");E.__originalSave=E.save,E.__originalRestore=E.restore,E.__originalRotate=E.rotate,E.__originalScale=E.scale,E.__originalTranslate=E.translate,E.__originalTransform=E.transform,E.__originalSetTransform=E.setTransform,E.__originalResetTransform=E.resetTransform,E.__originalClip=E.clip,E.__originalMoveTo=E.moveTo,E.__originalLineTo=E.lineTo,E.__originalBezierCurveTo=E.bezierCurveTo,E.__originalRect=E.rect,E.__originalClosePath=E.closePath,E.__originalBeginPath=E.beginPath,E._removeMirroring=()=>{E.save=E.__originalSave,E.restore=E.__originalRestore,E.rotate=E.__originalRotate,E.scale=E.__originalScale,E.translate=E.__originalTranslate,E.transform=E.__originalTransform,E.setTransform=E.__originalSetTransform,E.resetTransform=E.__originalResetTransform,E.clip=E.__originalClip,E.moveTo=E.__originalMoveTo,E.lineTo=E.__originalLineTo,E.bezierCurveTo=E.__originalBezierCurveTo,E.rect=E.__originalRect,E.closePath=E.__originalClosePath,E.beginPath=E.__originalBeginPath,delete E._removeMirroring},E.save=function(){s.save(),this.__originalSave()},E.restore=function(){s.restore(),this.__originalRestore()},E.translate=function(p,M){s.translate(p,M),this.__originalTranslate(p,M)},E.scale=function(p,M){s.scale(p,M),this.__originalScale(p,M)},E.transform=function(p,M,L,N,J,re){s.transform(p,M,L,N,J,re),this.__originalTransform(p,M,L,N,J,re)},E.setTransform=function(p,M,L,N,J,re){s.setTransform(p,M,L,N,J,re),this.__originalSetTransform(p,M,L,N,J,re)},E.resetTransform=function(){s.resetTransform(),this.__originalResetTransform()},E.rotate=function(p){s.rotate(p),this.__originalRotate(p)},E.clip=function(p){s.clip(p),this.__originalClip(p)},E.moveTo=function(i,p){s.moveTo(i,p),this.__originalMoveTo(i,p)},E.lineTo=function(i,p){s.lineTo(i,p),this.__originalLineTo(i,p)},E.bezierCurveTo=function(i,p,M,L,N,J){s.bezierCurveTo(i,p,M,L,N,J),this.__originalBezierCurveTo(i,p,M,L,N,J)},E.rect=function(i,p,M,L){s.rect(i,p,M,L),this.__originalRect(i,p,M,L)},E.closePath=function(){s.closePath(),this.__originalClosePath()},E.beginPath=function(){s.beginPath(),this.__originalBeginPath()}}class R{constructor(s){this.canvasFactory=s,this.cache=Object.create(null)}getCanvas(s,i,p){let M;return this.cache[s]!==void 0?(M=this.cache[s],this.canvasFactory.reset(M,i,p)):(M=this.canvasFactory.create(i,p),this.cache[s]=M),M}delete(s){delete this.cache[s]}clear(){for(const s in this.cache){const i=this.cache[s];this.canvasFactory.destroy(i),delete this.cache[s]}}}function b(E,s,i,p,M,L,N,J,re,de){const[te,ye,me,_e,ne,se]=(0,c.getCurrentTransform)(E);if(ye===0&&me===0){const Z=N*te+ne,ae=Math.round(Z),ge=J*_e+se,Se=Math.round(ge),Ae=(N+re)*te+ne,ie=Math.abs(Math.round(Ae)-ae)||1,Pe=(J+de)*_e+se,we=Math.abs(Math.round(Pe)-Se)||1;return E.setTransform(Math.sign(te),0,0,Math.sign(_e),ae,Se),E.drawImage(s,i,p,M,L,0,0,ie,we),E.setTransform(te,ye,me,_e,ne,se),[ie,we]}if(te===0&&_e===0){const Z=J*me+ne,ae=Math.round(Z),ge=N*ye+se,Se=Math.round(ge),Ae=(J+de)*me+ne,ie=Math.abs(Math.round(Ae)-ae)||1,Pe=(N+re)*ye+se,we=Math.abs(Math.round(Pe)-Se)||1;return E.setTransform(0,Math.sign(ye),Math.sign(me),0,ae,Se),E.drawImage(s,i,p,M,L,0,0,we,ie),E.setTransform(te,ye,me,_e,ne,se),[we,ie]}E.drawImage(s,i,p,M,L,N,J,re,de);const S=Math.hypot(te,ye),B=Math.hypot(me,_e);return[S*re,B*de]}function f(E){const{width:s,height:i}=E;if(s>U||i>U)return null;const p=1e3,M=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),L=s+1;let N=new Uint8Array(L*(i+1)),J,re,de;const te=s+7&-8;let ye=new Uint8Array(te*i),me=0;for(const B of E.data){let Z=128;for(;Z>0;)ye[me++]=B&Z?0:255,Z>>=1}let _e=0;for(me=0,ye[me]!==0&&(N[0]=1,++_e),re=1;re<s;re++)ye[me]!==ye[me+1]&&(N[re]=ye[me]?2:1,++_e),me++;for(ye[me]!==0&&(N[re]=2,++_e),J=1;J<i;J++){me=J*te,de=J*L,ye[me-te]!==ye[me]&&(N[de]=ye[me]?1:8,++_e);let B=(ye[me]?4:0)+(ye[me-te]?8:0);for(re=1;re<s;re++)B=(B>>2)+(ye[me+1]?4:0)+(ye[me-te+1]?8:0),M[B]&&(N[de+re]=M[B],++_e),me++;if(ye[me-te]!==ye[me]&&(N[de+re]=ye[me]?2:4,++_e),_e>p)return null}for(me=te*(i-1),de=J*L,ye[me]!==0&&(N[de]=8,++_e),re=1;re<s;re++)ye[me]!==ye[me+1]&&(N[de+re]=ye[me]?4:8,++_e),me++;if(ye[me]!==0&&(N[de+re]=4,++_e),_e>p)return null;const ne=new Int32Array([0,L,-1,0,-L,0,0,0,1]),se=new Path2D;for(J=0;_e&&J<=i;J++){let B=J*L;const Z=B+s;for(;B<Z&&!N[B];)B++;if(B===Z)continue;se.moveTo(B%L,J);const ae=B;let ge=N[B];do{const Se=ne[ge];do B+=Se;while(!N[B]);const Ae=N[B];Ae!==5&&Ae!==10?(ge=Ae,N[B]=0):(ge=Ae&51*ge>>4,N[B]&=ge>>2|ge<<2),se.lineTo(B%L,B/L|0),N[B]||--_e}while(ae!==B);--J}return ye=null,N=null,function(B){B.save(),B.scale(1/s,-1/i),B.translate(0,-i),B.fill(se),B.beginPath(),B.restore()}}class A{constructor(s,i){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,s,i])}clone(){const s=Object.create(this);return s.clipBox=this.clipBox.slice(),s}setCurrentPoint(s,i){this.x=s,this.y=i}updatePathMinMax(s,i,p){[i,p]=n.Util.applyTransform([i,p],s),this.minX=Math.min(this.minX,i),this.minY=Math.min(this.minY,p),this.maxX=Math.max(this.maxX,i),this.maxY=Math.max(this.maxY,p)}updateRectMinMax(s,i){const p=n.Util.applyTransform(i,s),M=n.Util.applyTransform(i.slice(2),s);this.minX=Math.min(this.minX,p[0],M[0]),this.minY=Math.min(this.minY,p[1],M[1]),this.maxX=Math.max(this.maxX,p[0],M[0]),this.maxY=Math.max(this.maxY,p[1],M[1])}updateScalingPathMinMax(s,i){n.Util.scaleMinMax(s,i),this.minX=Math.min(this.minX,i[0]),this.maxX=Math.max(this.maxX,i[1]),this.minY=Math.min(this.minY,i[2]),this.maxY=Math.max(this.maxY,i[3])}updateCurvePathMinMax(s,i,p,M,L,N,J,re,de,te){const ye=n.Util.bezierBoundingBox(i,p,M,L,N,J,re,de);if(te){te[0]=Math.min(te[0],ye[0],ye[2]),te[1]=Math.max(te[1],ye[0],ye[2]),te[2]=Math.min(te[2],ye[1],ye[3]),te[3]=Math.max(te[3],ye[1],ye[3]);return}this.updateRectMinMax(s,ye)}getPathBoundingBox(s=q.PathType.FILL,i=null){const p=[this.minX,this.minY,this.maxX,this.maxY];if(s===q.PathType.STROKE){i||(0,n.unreachable)("Stroke bounding box must include transform.");const M=n.Util.singularValueDecompose2dScale(i),L=M[0]*this.lineWidth/2,N=M[1]*this.lineWidth/2;p[0]-=L,p[1]-=N,p[2]+=L,p[3]+=N}return p}updateClipFromPath(){const s=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(s||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(s){this.clipBox=s,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(s=q.PathType.FILL,i=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(s,i))}}function O(E,s){if(typeof ImageData<"u"&&s instanceof ImageData){E.putImageData(s,0,0);return}const i=s.height,p=s.width,M=i%v,L=(i-M)/v,N=M===0?L:L+1,J=E.createImageData(p,v);let re=0,de;const te=s.data,ye=J.data;let me,_e,ne,se;if(s.kind===n.ImageKind.GRAYSCALE_1BPP){const S=te.byteLength,B=new Uint32Array(ye.buffer,0,ye.byteLength>>2),Z=B.length,ae=p+7>>3,ge=4294967295,Se=n.FeatureTest.isLittleEndian?4278190080:255;for(me=0;me<N;me++){for(ne=me<L?v:M,de=0,_e=0;_e<ne;_e++){const Ae=S-re;let ie=0;const Pe=Ae>ae?p:Ae*8-7,we=Pe&-8;let We=0,Ue=0;for(;ie<we;ie+=8)Ue=te[re++],B[de++]=Ue&128?ge:Se,B[de++]=Ue&64?ge:Se,B[de++]=Ue&32?ge:Se,B[de++]=Ue&16?ge:Se,B[de++]=Ue&8?ge:Se,B[de++]=Ue&4?ge:Se,B[de++]=Ue&2?ge:Se,B[de++]=Ue&1?ge:Se;for(;ie<Pe;ie++)We===0&&(Ue=te[re++],We=128),B[de++]=Ue&We?ge:Se,We>>=1}for(;de<Z;)B[de++]=0;E.putImageData(J,0,me*v)}}else if(s.kind===n.ImageKind.RGBA_32BPP){for(_e=0,se=p*v*4,me=0;me<L;me++)ye.set(te.subarray(re,re+se)),re+=se,E.putImageData(J,0,_e),_e+=v;me<N&&(se=p*M*4,ye.set(te.subarray(re,re+se)),E.putImageData(J,0,_e))}else if(s.kind===n.ImageKind.RGB_24BPP)for(ne=v,se=p*ne,me=0;me<N;me++){for(me>=L&&(ne=M,se=p*ne),de=0,_e=se;_e--;)ye[de++]=te[re++],ye[de++]=te[re++],ye[de++]=te[re++],ye[de++]=255;E.putImageData(J,0,me*v)}else throw new Error(`bad image kind: ${s.kind}`)}function _(E,s){if(s.bitmap){E.drawImage(s.bitmap,0,0);return}const i=s.height,p=s.width,M=i%v,L=(i-M)/v,N=M===0?L:L+1,J=E.createImageData(p,v);let re=0;const de=s.data,te=J.data;for(let ye=0;ye<N;ye++){const me=ye<L?v:M;({srcPos:re}=(0,$.convertBlackAndWhiteToRGBA)({src:de,srcPos:re,dest:te,width:p,height:me,nonBlackColor:0})),E.putImageData(J,0,ye*v)}}function o(E,s){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const p of i)E[p]!==void 0&&(s[p]=E[p]);E.setLineDash!==void 0&&(s.setLineDash(E.getLineDash()),s.lineDashOffset=E.lineDashOffset)}function d(E){if(E.strokeStyle=E.fillStyle="#000000",E.fillRule="nonzero",E.globalAlpha=1,E.lineWidth=1,E.lineCap="butt",E.lineJoin="miter",E.miterLimit=10,E.globalCompositeOperation="source-over",E.font="10px sans-serif",E.setLineDash!==void 0&&(E.setLineDash([]),E.lineDashOffset=0),!n.isNodeJS){const{filter:s}=E;s!=="none"&&s!==""&&(E.filter="none")}}function l(E,s,i,p){const M=E.length;for(let L=3;L<M;L+=4){const N=E[L];if(N===0)E[L-3]=s,E[L-2]=i,E[L-1]=p;else if(N<255){const J=255-N;E[L-3]=E[L-3]*N+s*J>>8,E[L-2]=E[L-2]*N+i*J>>8,E[L-1]=E[L-1]*N+p*J>>8}}}function h(E,s,i){const p=E.length,M=1/255;for(let L=3;L<p;L+=4){const N=i?i[E[L]]:E[L];s[L]=s[L]*N*M|0}}function u(E,s,i){const p=E.length;for(let M=3;M<p;M+=4){const L=E[M-3]*77+E[M-2]*152+E[M-1]*28;s[M]=i?s[M]*i[L>>8]>>8:s[M]*L>>16}}function I(E,s,i,p,M,L,N,J,re,de,te){const ye=!!L,me=ye?L[0]:0,_e=ye?L[1]:0,ne=ye?L[2]:0,se=M==="Luminosity"?u:h,B=Math.min(p,Math.ceil(1048576/i));for(let Z=0;Z<p;Z+=B){const ae=Math.min(B,p-Z),ge=E.getImageData(J-de,Z+(re-te),i,ae),Se=s.getImageData(J,Z+re,i,ae);ye&&l(ge.data,me,_e,ne),se(ge.data,Se.data,N),s.putImageData(Se,J,Z+re)}}function a(E,s,i,p){const M=p[0],L=p[1],N=p[2]-M,J=p[3]-L;N===0||J===0||(I(s.context,i,N,J,s.subtype,s.backdrop,s.transferMap,M,L,s.offsetX,s.offsetY),E.save(),E.globalAlpha=1,E.globalCompositeOperation="source-over",E.setTransform(1,0,0,1,0,0),E.drawImage(i.canvas,0,0),E.restore())}function w(E,s){const i=n.Util.singularValueDecompose2dScale(E);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);const p=Math.fround((globalThis.devicePixelRatio||1)*c.PixelsPerInch.PDF_TO_CSS_UNITS);return s!==void 0?s:i[0]<=p||i[1]<=p}const g=["butt","round","square"],z=["miter","round","bevel"],V={},X={},Y=class Y{constructor(s,i,p,M,L,{optionalContentConfig:N,markedContentStack:J=null},re,de){oe(this,Q);this.ctx=s,this.current=new A(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=p,this.canvasFactory=M,this.filterFactory=L,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=J||[],this.optionalContentConfig=N,this.cachedCanvases=new R(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=re,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=de,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(s,i=null){return typeof s=="string"?s.startsWith("g_")?this.commonObjs.get(s):this.objs.get(s):i}beginDrawing({transform:s,viewport:i,transparency:p=!1,background:M=null}){const L=this.ctx.canvas.width,N=this.ctx.canvas.height,J=this.ctx.fillStyle;if(this.ctx.fillStyle=M||"#ffffff",this.ctx.fillRect(0,0,L,N),this.ctx.fillStyle=J,p){const re=this.cachedCanvases.getCanvas("transparent",L,N);this.compositeCtx=this.ctx,this.transparentCanvas=re.canvas,this.ctx=re.context,this.ctx.save(),this.ctx.transform(...(0,c.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),d(this.ctx),s&&(this.ctx.transform(...s),this.outputScaleX=s[0],this.outputScaleY=s[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=(0,c.getCurrentTransform)(this.ctx)}executeOperatorList(s,i,p,M){const L=s.argsArray,N=s.fnArray;let J=i||0;const re=L.length;if(re===J)return J;const de=re-J>j&&typeof p=="function",te=de?Date.now()+m:0;let ye=0;const me=this.commonObjs,_e=this.objs;let ne;for(;;){if(M!==void 0&&J===M.nextBreakPoint)return M.breakIt(J,p),J;if(ne=N[J],ne!==n.OPS.dependency)this[ne].apply(this,L[J]);else for(const se of L[J]){const S=se.startsWith("g_")?me:_e;if(!S.has(se))return S.get(se,p),J}if(J++,J===re)return J;if(de&&++ye>j){if(Date.now()>te)return p(),J;ye=0}}}endDrawing(){ee(this,Q,Xt).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const s of this._cachedBitmapsMap.values()){for(const i of s.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);s.clear()}this._cachedBitmapsMap.clear(),ee(this,Q,Yt).call(this)}_scaleImage(s,i){const p=s.width,M=s.height;let L=Math.max(Math.hypot(i[0],i[1]),1),N=Math.max(Math.hypot(i[2],i[3]),1),J=p,re=M,de="prescale1",te,ye;for(;L>2&&J>1||N>2&&re>1;){let me=J,_e=re;L>2&&J>1&&(me=J>=16384?Math.floor(J/2)-1||1:Math.ceil(J/2),L/=J/me),N>2&&re>1&&(_e=re>=16384?Math.floor(re/2)-1||1:Math.ceil(re)/2,N/=re/_e),te=this.cachedCanvases.getCanvas(de,me,_e),ye=te.context,ye.clearRect(0,0,me,_e),ye.drawImage(s,0,0,J,re,0,0,me,_e),s=te.canvas,J=me,re=_e,de=de==="prescale1"?"prescale2":"prescale1"}return{img:s,paintWidth:J,paintHeight:re}}_createMaskCanvas(s){const i=this.ctx,{width:p,height:M}=s,L=this.current.fillColor,N=this.current.patternFill,J=(0,c.getCurrentTransform)(i);let re,de,te,ye;if((s.bitmap||s.data)&&s.count>1){const ie=s.bitmap||s.data.buffer;de=JSON.stringify(N?J:[J.slice(0,4),L]),re=this._cachedBitmapsMap.get(ie),re||(re=new Map,this._cachedBitmapsMap.set(ie,re));const Pe=re.get(de);if(Pe&&!N){const we=Math.round(Math.min(J[0],J[2])+J[4]),We=Math.round(Math.min(J[1],J[3])+J[5]);return{canvas:Pe,offsetX:we,offsetY:We}}te=Pe}te||(ye=this.cachedCanvases.getCanvas("maskCanvas",p,M),_(ye.context,s));let me=n.Util.transform(J,[1/p,0,0,-1/M,0,0]);me=n.Util.transform(me,[1,0,0,1,0,-M]);const _e=n.Util.applyTransform([0,0],me),ne=n.Util.applyTransform([p,M],me),se=n.Util.normalizeRect([_e[0],_e[1],ne[0],ne[1]]),S=Math.round(se[2]-se[0])||1,B=Math.round(se[3]-se[1])||1,Z=this.cachedCanvases.getCanvas("fillCanvas",S,B),ae=Z.context,ge=Math.min(_e[0],ne[0]),Se=Math.min(_e[1],ne[1]);ae.translate(-ge,-Se),ae.transform(...me),te||(te=this._scaleImage(ye.canvas,(0,c.getCurrentTransformInverse)(ae)),te=te.img,re&&N&&re.set(de,te)),ae.imageSmoothingEnabled=w((0,c.getCurrentTransform)(ae),s.interpolate),b(ae,te,0,0,te.width,te.height,0,0,p,M),ae.globalCompositeOperation="source-in";const Ae=n.Util.transform((0,c.getCurrentTransformInverse)(ae),[1,0,0,1,-ge,-Se]);return ae.fillStyle=N?L.getPattern(i,this,Ae,q.PathType.FILL):L,ae.fillRect(0,0,p,M),re&&!N&&(this.cachedCanvases.delete("fillCanvas"),re.set(de,Z.canvas)),{canvas:Z.canvas,offsetX:Math.round(ge),offsetY:Math.round(Se)}}setLineWidth(s){s!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=s,this.ctx.lineWidth=s}setLineCap(s){this.ctx.lineCap=g[s]}setLineJoin(s){this.ctx.lineJoin=z[s]}setMiterLimit(s){this.ctx.miterLimit=s}setDash(s,i){const p=this.ctx;p.setLineDash!==void 0&&(p.setLineDash(s),p.lineDashOffset=i)}setRenderingIntent(s){}setFlatness(s){}setGState(s){for(const[i,p]of s)switch(i){case"LW":this.setLineWidth(p);break;case"LC":this.setLineCap(p);break;case"LJ":this.setLineJoin(p);break;case"ML":this.setMiterLimit(p);break;case"D":this.setDash(p[0],p[1]);break;case"RI":this.setRenderingIntent(p);break;case"FL":this.setFlatness(p);break;case"Font":this.setFont(p[0],p[1]);break;case"CA":this.current.strokeAlpha=p;break;case"ca":this.current.fillAlpha=p,this.ctx.globalAlpha=p;break;case"BM":this.ctx.globalCompositeOperation=p;break;case"SMask":this.current.activeSMask=p?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(p);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const s=this.inSMaskMode;this.current.activeSMask&&!s?this.beginSMaskMode():!this.current.activeSMask&&s&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const s=this.ctx.canvas.width,i=this.ctx.canvas.height,p="smaskGroupAt"+this.groupLevel,M=this.cachedCanvases.getCanvas(p,s,i);this.suspendedCtx=this.ctx,this.ctx=M.context;const L=this.ctx;L.setTransform(...(0,c.getCurrentTransform)(this.suspendedCtx)),o(this.suspendedCtx,L),y(L,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),o(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(s){if(!this.current.activeSMask)return;s?(s[0]=Math.floor(s[0]),s[1]=Math.floor(s[1]),s[2]=Math.ceil(s[2]),s[3]=Math.ceil(s[3])):s=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,p=this.suspendedCtx;a(p,i,this.ctx,s),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(o(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const s=this.current;this.stateStack.push(s),this.current=s.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),o(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(s,i,p,M,L,N){this.ctx.transform(s,i,p,M,L,N),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(s,i,p){const M=this.ctx,L=this.current;let N=L.x,J=L.y,re,de;const te=(0,c.getCurrentTransform)(M),ye=te[0]===0&&te[3]===0||te[1]===0&&te[2]===0,me=ye?p.slice(0):null;for(let _e=0,ne=0,se=s.length;_e<se;_e++)switch(s[_e]|0){case n.OPS.rectangle:N=i[ne++],J=i[ne++];const S=i[ne++],B=i[ne++],Z=N+S,ae=J+B;M.moveTo(N,J),S===0||B===0?M.lineTo(Z,ae):(M.lineTo(Z,J),M.lineTo(Z,ae),M.lineTo(N,ae)),ye||L.updateRectMinMax(te,[N,J,Z,ae]),M.closePath();break;case n.OPS.moveTo:N=i[ne++],J=i[ne++],M.moveTo(N,J),ye||L.updatePathMinMax(te,N,J);break;case n.OPS.lineTo:N=i[ne++],J=i[ne++],M.lineTo(N,J),ye||L.updatePathMinMax(te,N,J);break;case n.OPS.curveTo:re=N,de=J,N=i[ne+4],J=i[ne+5],M.bezierCurveTo(i[ne],i[ne+1],i[ne+2],i[ne+3],N,J),L.updateCurvePathMinMax(te,re,de,i[ne],i[ne+1],i[ne+2],i[ne+3],N,J,me),ne+=6;break;case n.OPS.curveTo2:re=N,de=J,M.bezierCurveTo(N,J,i[ne],i[ne+1],i[ne+2],i[ne+3]),L.updateCurvePathMinMax(te,re,de,N,J,i[ne],i[ne+1],i[ne+2],i[ne+3],me),N=i[ne+2],J=i[ne+3],ne+=4;break;case n.OPS.curveTo3:re=N,de=J,N=i[ne+2],J=i[ne+3],M.bezierCurveTo(i[ne],i[ne+1],N,J,N,J),L.updateCurvePathMinMax(te,re,de,i[ne],i[ne+1],N,J,N,J,me),ne+=4;break;case n.OPS.closePath:M.closePath();break}ye&&L.updateScalingPathMinMax(te,me),L.setCurrentPoint(N,J)}closePath(){this.ctx.closePath()}stroke(s=!0){const i=this.ctx,p=this.current.strokeColor;i.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof p=="object"&&(p!=null&&p.getPattern)?(i.save(),i.strokeStyle=p.getPattern(i,this,(0,c.getCurrentTransformInverse)(i),q.PathType.STROKE),this.rescaleAndStroke(!1),i.restore()):this.rescaleAndStroke(!0)),s&&this.consumePath(this.current.getClippedPathBoundingBox()),i.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(s=!0){const i=this.ctx,p=this.current.fillColor,M=this.current.patternFill;let L=!1;M&&(i.save(),i.fillStyle=p.getPattern(i,this,(0,c.getCurrentTransformInverse)(i),q.PathType.FILL),L=!0);const N=this.current.getClippedPathBoundingBox();this.contentVisible&&N!==null&&(this.pendingEOFill?(i.fill("evenodd"),this.pendingEOFill=!1):i.fill()),L&&i.restore(),s&&this.consumePath(N)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=V}eoClip(){this.pendingClip=X}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const s=this.pendingTextPaths,i=this.ctx;if(s===void 0){i.beginPath();return}i.save(),i.beginPath();for(const p of s)i.setTransform(...p.transform),i.translate(p.x,p.y),p.addToPath(i,p.fontSize);i.restore(),i.clip(),i.beginPath(),delete this.pendingTextPaths}setCharSpacing(s){this.current.charSpacing=s}setWordSpacing(s){this.current.wordSpacing=s}setHScale(s){this.current.textHScale=s/100}setLeading(s){this.current.leading=-s}setFont(s,i){var te;const p=this.commonObjs.get(s),M=this.current;if(!p)throw new Error(`Can't find font for ${s}`);if(M.fontMatrix=p.fontMatrix||n.FONT_IDENTITY_MATRIX,(M.fontMatrix[0]===0||M.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+s),i<0?(i=-i,M.fontDirection=-1):M.fontDirection=1,this.current.font=p,this.current.fontSize=i,p.isType3Font)return;const L=p.loadedName||"sans-serif",N=((te=p.systemFontInfo)==null?void 0:te.css)||`"${L}", ${p.fallbackName}`;let J="normal";p.black?J="900":p.bold&&(J="bold");const re=p.italic?"italic":"normal";let de=i;i<he?de=he:i>C&&(de=C),this.current.fontSizeScale=i/de,this.ctx.font=`${re} ${J} ${de}px ${N}`}setTextRenderingMode(s){this.current.textRenderingMode=s}setTextRise(s){this.current.textRise=s}moveText(s,i){this.current.x=this.current.lineX+=s,this.current.y=this.current.lineY+=i}setLeadingMoveText(s,i){this.setLeading(-i),this.moveText(s,i)}setTextMatrix(s,i,p,M,L,N){this.current.textMatrix=[s,i,p,M,L,N],this.current.textMatrixScale=Math.hypot(s,i),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(s,i,p,M){const L=this.ctx,N=this.current,J=N.font,re=N.textRenderingMode,de=N.fontSize/N.fontSizeScale,te=re&n.TextRenderingMode.FILL_STROKE_MASK,ye=!!(re&n.TextRenderingMode.ADD_TO_PATH_FLAG),me=N.patternFill&&!J.missingFile;let _e;(J.disableFontFace||ye||me)&&(_e=J.getPathGenerator(this.commonObjs,s)),J.disableFontFace||me?(L.save(),L.translate(i,p),L.beginPath(),_e(L,de),M&&L.setTransform(...M),(te===n.TextRenderingMode.FILL||te===n.TextRenderingMode.FILL_STROKE)&&L.fill(),(te===n.TextRenderingMode.STROKE||te===n.TextRenderingMode.FILL_STROKE)&&L.stroke(),L.restore()):((te===n.TextRenderingMode.FILL||te===n.TextRenderingMode.FILL_STROKE)&&L.fillText(s,i,p),(te===n.TextRenderingMode.STROKE||te===n.TextRenderingMode.FILL_STROKE)&&L.strokeText(s,i,p)),ye&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,c.getCurrentTransform)(L),x:i,y:p,fontSize:de,addToPath:_e})}get isFontSubpixelAAEnabled(){const{context:s}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);s.scale(1.5,1),s.fillText("I",0,10);const i=s.getImageData(0,0,10,10).data;let p=!1;for(let M=3;M<i.length;M+=4)if(i[M]>0&&i[M]<255){p=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",p)}showText(s){const i=this.current,p=i.font;if(p.isType3Font)return this.showType3Text(s);const M=i.fontSize;if(M===0)return;const L=this.ctx,N=i.fontSizeScale,J=i.charSpacing,re=i.wordSpacing,de=i.fontDirection,te=i.textHScale*de,ye=s.length,me=p.vertical,_e=me?1:-1,ne=p.defaultVMetrics,se=M*i.fontMatrix[0],S=i.textRenderingMode===n.TextRenderingMode.FILL&&!p.disableFontFace&&!i.patternFill;L.save(),L.transform(...i.textMatrix),L.translate(i.x,i.y+i.textRise),de>0?L.scale(te,-1):L.scale(te,1);let B;if(i.patternFill){L.save();const Ae=i.fillColor.getPattern(L,this,(0,c.getCurrentTransformInverse)(L),q.PathType.FILL);B=(0,c.getCurrentTransform)(L),L.restore(),L.fillStyle=Ae}let Z=i.lineWidth;const ae=i.textMatrixScale;if(ae===0||Z===0){const Ae=i.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(Ae===n.TextRenderingMode.STROKE||Ae===n.TextRenderingMode.FILL_STROKE)&&(Z=this.getSinglePixelWidth())}else Z/=ae;if(N!==1&&(L.scale(N,N),Z/=N),L.lineWidth=Z,p.isInvalidPDFjsFont){const Ae=[];let ie=0;for(const Pe of s)Ae.push(Pe.unicode),ie+=Pe.width;L.fillText(Ae.join(""),0,0),i.x+=ie*se*te,L.restore(),this.compose();return}let ge=0,Se;for(Se=0;Se<ye;++Se){const Ae=s[Se];if(typeof Ae=="number"){ge+=_e*Ae*M/1e3;continue}let ie=!1;const Pe=(Ae.isSpace?re:0)+J,we=Ae.fontChar,We=Ae.accent;let Ue,ze,Fe=Ae.width;if(me){const He=Ae.vmetric||ne,Xe=-(Ae.vmetric?He[1]:Fe*.5)*se,Ee=He[2]*se;Fe=He?-He[0]:Fe,Ue=Xe/N,ze=(ge+Ee)/N}else Ue=ge/N,ze=0;if(p.remeasure&&Fe>0){const He=L.measureText(we).width*1e3/M*N;if(Fe<He&&this.isFontSubpixelAAEnabled){const Xe=Fe/He;ie=!0,L.save(),L.scale(Xe,1),Ue/=Xe}else Fe!==He&&(Ue+=(Fe-He)/2e3*M/N)}if(this.contentVisible&&(Ae.isInFont||p.missingFile)){if(S&&!We)L.fillText(we,Ue,ze);else if(this.paintChar(we,Ue,ze,B),We){const He=Ue+M*We.offset.x/N,Xe=ze-M*We.offset.y/N;this.paintChar(We.fontChar,He,Xe,B)}}const Ie=me?Fe*se-Pe*de:Fe*se+Pe*de;ge+=Ie,ie&&L.restore()}me?i.y-=ge:i.x+=ge*te,L.restore(),this.compose()}showType3Text(s){const i=this.ctx,p=this.current,M=p.font,L=p.fontSize,N=p.fontDirection,J=M.vertical?1:-1,re=p.charSpacing,de=p.wordSpacing,te=p.textHScale*N,ye=p.fontMatrix||n.FONT_IDENTITY_MATRIX,me=s.length,_e=p.textRenderingMode===n.TextRenderingMode.INVISIBLE;let ne,se,S,B;if(!(_e||L===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),i.transform(...p.textMatrix),i.translate(p.x,p.y),i.scale(te,N),ne=0;ne<me;++ne){if(se=s[ne],typeof se=="number"){B=J*se*L/1e3,this.ctx.translate(B,0),p.x+=B*te;continue}const Z=(se.isSpace?de:0)+re,ae=M.charProcOperatorList[se.operatorListId];if(!ae){(0,n.warn)(`Type3 character "${se.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=se,this.save(),i.scale(L,L),i.transform(...ye),this.executeOperatorList(ae),this.restore()),S=n.Util.applyTransform([se.width,0],ye)[0]*L+Z,i.translate(S,0),p.x+=S*te}i.restore(),this.processingType3=null}}setCharWidth(s,i){}setCharWidthAndBounds(s,i,p,M,L,N){this.ctx.rect(p,M,L-p,N-M),this.ctx.clip(),this.endPath()}getColorN_Pattern(s){let i;if(s[0]==="TilingPattern"){const p=s[1],M=this.baseTransform||(0,c.getCurrentTransform)(this.ctx),L={createCanvasGraphics:N=>new Y(N,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};i=new q.TilingPattern(s,p,this.ctx,L,M)}else i=this._getPattern(s[1],s[2]);return i}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(s,i,p){const M=n.Util.makeHexColor(s,i,p);this.ctx.strokeStyle=M,this.current.strokeColor=M}setFillRGBColor(s,i,p){const M=n.Util.makeHexColor(s,i,p);this.ctx.fillStyle=M,this.current.fillColor=M,this.current.patternFill=!1}_getPattern(s,i=null){let p;return this.cachedPatterns.has(s)?p=this.cachedPatterns.get(s):(p=(0,q.getShadingPattern)(this.getObject(s)),this.cachedPatterns.set(s,p)),i&&(p.matrix=i),p}shadingFill(s){if(!this.contentVisible)return;const i=this.ctx;this.save();const p=this._getPattern(s);i.fillStyle=p.getPattern(i,this,(0,c.getCurrentTransformInverse)(i),q.PathType.SHADING);const M=(0,c.getCurrentTransformInverse)(i);if(M){const{width:L,height:N}=i.canvas,[J,re,de,te]=n.Util.getAxialAlignedBoundingBox([0,0,L,N],M);this.ctx.fillRect(J,re,de-J,te-re)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(s,i){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(s)&&s.length===6&&this.transform(...s),this.baseTransform=(0,c.getCurrentTransform)(this.ctx),i)){const p=i[2]-i[0],M=i[3]-i[1];this.ctx.rect(i[0],i[1],p,M),this.current.updateRectMinMax((0,c.getCurrentTransform)(this.ctx),i),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(s){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;s.isolated||(0,n.info)("TODO: Support non-isolated groups."),s.knockout&&(0,n.warn)("Knockout groups not supported.");const p=(0,c.getCurrentTransform)(i);if(s.matrix&&i.transform(...s.matrix),!s.bbox)throw new Error("Bounding box is required.");let M=n.Util.getAxialAlignedBoundingBox(s.bbox,(0,c.getCurrentTransform)(i));const L=[0,0,i.canvas.width,i.canvas.height];M=n.Util.intersect(M,L)||[0,0,0,0];const N=Math.floor(M[0]),J=Math.floor(M[1]);let re=Math.max(Math.ceil(M[2])-N,1),de=Math.max(Math.ceil(M[3])-J,1),te=1,ye=1;re>x&&(te=re/x,re=x),de>x&&(ye=de/x,de=x),this.current.startNewPathAndClipBox([0,0,re,de]);let me="groupAt"+this.groupLevel;s.smask&&(me+="_smask_"+this.smaskCounter++%2);const _e=this.cachedCanvases.getCanvas(me,re,de),ne=_e.context;ne.scale(1/te,1/ye),ne.translate(-N,-J),ne.transform(...p),s.smask?this.smaskStack.push({canvas:_e.canvas,context:ne,offsetX:N,offsetY:J,scaleX:te,scaleY:ye,subtype:s.smask.subtype,backdrop:s.smask.backdrop,transferMap:s.smask.transferMap||null,startTransformInverse:null}):(i.setTransform(1,0,0,1,0,0),i.translate(N,J),i.scale(te,ye),i.save()),o(i,ne),this.ctx=ne,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(s){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,p=this.groupStack.pop();if(this.ctx=p,this.ctx.imageSmoothingEnabled=!1,s.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const M=(0,c.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...M);const L=n.Util.getAxialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],M);this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(L)}}beginAnnotation(s,i,p,M,L){if(ee(this,Q,Xt).call(this),d(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(i)&&i.length===4){const N=i[2]-i[0],J=i[3]-i[1];if(L&&this.annotationCanvasMap){p=p.slice(),p[4]-=i[0],p[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=N,i[3]=J;const[re,de]=n.Util.singularValueDecompose2dScale((0,c.getCurrentTransform)(this.ctx)),{viewportScale:te}=this,ye=Math.ceil(N*this.outputScaleX*te),me=Math.ceil(J*this.outputScaleY*te);this.annotationCanvas=this.canvasFactory.create(ye,me);const{canvas:_e,context:ne}=this.annotationCanvas;this.annotationCanvasMap.set(s,_e),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ne,this.ctx.save(),this.ctx.setTransform(re,0,0,-de,0,J*de),d(this.ctx)}else d(this.ctx),this.ctx.rect(i[0],i[1],N,J),this.ctx.clip(),this.endPath()}this.current=new A(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...p),this.transform(...M)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),ee(this,Q,Yt).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(s){if(!this.contentVisible)return;const i=s.count;s=this.getObject(s.data,s),s.count=i;const p=this.ctx,M=this.processingType3;if(M&&(M.compiled===void 0&&(M.compiled=f(s)),M.compiled)){M.compiled(p);return}const L=this._createMaskCanvas(s),N=L.canvas;p.save(),p.setTransform(1,0,0,1,0,0),p.drawImage(N,L.offsetX,L.offsetY),p.restore(),this.compose()}paintImageMaskXObjectRepeat(s,i,p=0,M=0,L,N){if(!this.contentVisible)return;s=this.getObject(s.data,s);const J=this.ctx;J.save();const re=(0,c.getCurrentTransform)(J);J.transform(i,p,M,L,0,0);const de=this._createMaskCanvas(s);J.setTransform(1,0,0,1,de.offsetX-re[4],de.offsetY-re[5]);for(let te=0,ye=N.length;te<ye;te+=2){const me=n.Util.transform(re,[i,p,M,L,N[te],N[te+1]]),[_e,ne]=n.Util.applyTransform([0,0],me);J.drawImage(de.canvas,_e,ne)}J.restore(),this.compose()}paintImageMaskXObjectGroup(s){if(!this.contentVisible)return;const i=this.ctx,p=this.current.fillColor,M=this.current.patternFill;for(const L of s){const{data:N,width:J,height:re,transform:de}=L,te=this.cachedCanvases.getCanvas("maskCanvas",J,re),ye=te.context;ye.save();const me=this.getObject(N,L);_(ye,me),ye.globalCompositeOperation="source-in",ye.fillStyle=M?p.getPattern(ye,this,(0,c.getCurrentTransformInverse)(i),q.PathType.FILL):p,ye.fillRect(0,0,J,re),ye.restore(),i.save(),i.transform(...de),i.scale(1,-1),b(i,te.canvas,0,0,J,re,0,-1,1,1),i.restore()}this.compose()}paintImageXObject(s){if(!this.contentVisible)return;const i=this.getObject(s);if(!i){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(i)}paintImageXObjectRepeat(s,i,p,M){if(!this.contentVisible)return;const L=this.getObject(s);if(!L){(0,n.warn)("Dependent image isn't ready yet");return}const N=L.width,J=L.height,re=[];for(let de=0,te=M.length;de<te;de+=2)re.push({transform:[i,0,0,p,M[de],M[de+1]],x:0,y:0,w:N,h:J});this.paintInlineImageXObjectGroup(L,re)}applyTransferMapsToCanvas(s){return this.current.transferMaps!=="none"&&(s.filter=this.current.transferMaps,s.drawImage(s.canvas,0,0),s.filter="none"),s.canvas}applyTransferMapsToBitmap(s){if(this.current.transferMaps==="none")return s.bitmap;const{bitmap:i,width:p,height:M}=s,L=this.cachedCanvases.getCanvas("inlineImage",p,M),N=L.context;return N.filter=this.current.transferMaps,N.drawImage(i,0,0),N.filter="none",L.canvas}paintInlineImageXObject(s){if(!this.contentVisible)return;const i=s.width,p=s.height,M=this.ctx;if(this.save(),!n.isNodeJS){const{filter:J}=M;J!=="none"&&J!==""&&(M.filter="none")}M.scale(1/i,-1/p);let L;if(s.bitmap)L=this.applyTransferMapsToBitmap(s);else if(typeof HTMLElement=="function"&&s instanceof HTMLElement||!s.data)L=s;else{const re=this.cachedCanvases.getCanvas("inlineImage",i,p).context;O(re,s),L=this.applyTransferMapsToCanvas(re)}const N=this._scaleImage(L,(0,c.getCurrentTransformInverse)(M));M.imageSmoothingEnabled=w((0,c.getCurrentTransform)(M),s.interpolate),b(M,N.img,0,0,N.paintWidth,N.paintHeight,0,-p,i,p),this.compose(),this.restore()}paintInlineImageXObjectGroup(s,i){if(!this.contentVisible)return;const p=this.ctx;let M;if(s.bitmap)M=s.bitmap;else{const L=s.width,N=s.height,re=this.cachedCanvases.getCanvas("inlineImage",L,N).context;O(re,s),M=this.applyTransferMapsToCanvas(re)}for(const L of i)p.save(),p.transform(...L.transform),p.scale(1,-1),b(p,M,L.x,L.y,L.w,L.h,0,-1,1,1),p.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(s){}markPointProps(s,i){}beginMarkedContent(s){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(s,i){s==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(s){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const p=this.ctx;this.pendingClip&&(i||(this.pendingClip===X?p.clip("evenodd"):p.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),p.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const s=(0,c.getCurrentTransform)(this.ctx);if(s[1]===0&&s[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(s[0]),Math.abs(s[3]));else{const i=Math.abs(s[0]*s[3]-s[2]*s[1]),p=Math.hypot(s[0],s[2]),M=Math.hypot(s[1],s[3]);this._cachedGetSinglePixelWidth=Math.max(p,M)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:s}=this.current,{a:i,b:p,c:M,d:L}=this.ctx.getTransform();let N,J;if(p===0&&M===0){const re=Math.abs(i),de=Math.abs(L);if(re===de)if(s===0)N=J=1/re;else{const te=re*s;N=J=te<1?1/te:1}else if(s===0)N=1/re,J=1/de;else{const te=re*s,ye=de*s;N=te<1?1/te:1,J=ye<1?1/ye:1}}else{const re=Math.abs(i*L-p*M),de=Math.hypot(i,p),te=Math.hypot(M,L);if(s===0)N=te/re,J=de/re;else{const ye=s*re;N=te>ye?te/ye:1,J=de>ye?de/ye:1}}this._cachedScaleForStroking[0]=N,this._cachedScaleForStroking[1]=J}return this._cachedScaleForStroking}rescaleAndStroke(s){const{ctx:i}=this,{lineWidth:p}=this.current,[M,L]=this.getScaleForStroking();if(i.lineWidth=p||1,M===1&&L===1){i.stroke();return}const N=i.getLineDash();if(s&&i.save(),i.scale(M,L),N.length>0){const J=Math.max(M,L);i.setLineDash(N.map(re=>re/J)),i.lineDashOffset/=J}i.stroke(),s&&i.restore()}isContentVisible(){for(let s=this.markedContentStack.length-1;s>=0;s--)if(!this.markedContentStack[s].visible)return!1;return!0}};Q=new WeakSet,Xt=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Yt=function(){if(this.pageColors){const s=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(s!=="none"){const i=this.ctx.filter;this.ctx.filter=s,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}};let W=Y;t.CanvasGraphics=W;for(const E in n.OPS)W.prototype[E]!==void 0&&(W.prototype[n.OPS[E]]=W.prototype[E])},(P,t,k)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=v;var n=k(1),c=k(6);const q={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=q;function $(f,A){if(!A)return;const O=A[2]-A[0],_=A[3]-A[1],o=new Path2D;o.rect(A[0],A[1],O,_),f.clip(o)}class he{constructor(){this.constructor===he&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class C extends he{constructor(A){super(),this._type=A[1],this._bbox=A[2],this._colorStops=A[3],this._p0=A[4],this._p1=A[5],this._r0=A[6],this._r1=A[7],this.matrix=null}_createGradient(A){let O;this._type==="axial"?O=A.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(O=A.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const _ of this._colorStops)O.addColorStop(_[0],_[1]);return O}getPattern(A,O,_,o){let d;if(o===q.STROKE||o===q.FILL){const l=O.current.getClippedPathBoundingBox(o,(0,c.getCurrentTransform)(A))||[0,0,0,0],h=Math.ceil(l[2]-l[0])||1,u=Math.ceil(l[3]-l[1])||1,I=O.cachedCanvases.getCanvas("pattern",h,u,!0),a=I.context;a.clearRect(0,0,a.canvas.width,a.canvas.height),a.beginPath(),a.rect(0,0,a.canvas.width,a.canvas.height),a.translate(-l[0],-l[1]),_=n.Util.transform(_,[1,0,0,1,l[0],l[1]]),a.transform(...O.baseTransform),this.matrix&&a.transform(...this.matrix),$(a,this._bbox),a.fillStyle=this._createGradient(a),a.fill(),d=A.createPattern(I.canvas,"no-repeat");const w=new DOMMatrix(_);d.setTransform(w)}else $(A,this._bbox),d=this._createGradient(A);return d}}function x(f,A,O,_,o,d,l,h){const u=A.coords,I=A.colors,a=f.data,w=f.width*4;let g;u[O+1]>u[_+1]&&(g=O,O=_,_=g,g=d,d=l,l=g),u[_+1]>u[o+1]&&(g=_,_=o,o=g,g=l,l=h,h=g),u[O+1]>u[_+1]&&(g=O,O=_,_=g,g=d,d=l,l=g);const z=(u[O]+A.offsetX)*A.scaleX,V=(u[O+1]+A.offsetY)*A.scaleY,X=(u[_]+A.offsetX)*A.scaleX,W=(u[_+1]+A.offsetY)*A.scaleY,Q=(u[o]+A.offsetX)*A.scaleX,T=(u[o+1]+A.offsetY)*A.scaleY;if(V>=T)return;const H=I[d],Y=I[d+1],E=I[d+2],s=I[l],i=I[l+1],p=I[l+2],M=I[h],L=I[h+1],N=I[h+2],J=Math.round(V),re=Math.round(T);let de,te,ye,me,_e,ne,se,S;for(let B=J;B<=re;B++){if(B<W){const Ae=B<V?0:(V-B)/(V-W);de=z-(z-X)*Ae,te=H-(H-s)*Ae,ye=Y-(Y-i)*Ae,me=E-(E-p)*Ae}else{let Ae;B>T?Ae=1:W===T?Ae=0:Ae=(W-B)/(W-T),de=X-(X-Q)*Ae,te=s-(s-M)*Ae,ye=i-(i-L)*Ae,me=p-(p-N)*Ae}let Z;B<V?Z=0:B>T?Z=1:Z=(V-B)/(V-T),_e=z-(z-Q)*Z,ne=H-(H-M)*Z,se=Y-(Y-L)*Z,S=E-(E-N)*Z;const ae=Math.round(Math.min(de,_e)),ge=Math.round(Math.max(de,_e));let Se=w*B+ae*4;for(let Ae=ae;Ae<=ge;Ae++)Z=(de-Ae)/(de-_e),Z<0?Z=0:Z>1&&(Z=1),a[Se++]=te-(te-ne)*Z|0,a[Se++]=ye-(ye-se)*Z|0,a[Se++]=me-(me-S)*Z|0,a[Se++]=255}}function m(f,A,O){const _=A.coords,o=A.colors;let d,l;switch(A.type){case"lattice":const h=A.verticesPerRow,u=Math.floor(_.length/h)-1,I=h-1;for(d=0;d<u;d++){let a=d*h;for(let w=0;w<I;w++,a++)x(f,O,_[a],_[a+1],_[a+h],o[a],o[a+1],o[a+h]),x(f,O,_[a+h+1],_[a+1],_[a+h],o[a+h+1],o[a+1],o[a+h])}break;case"triangles":for(d=0,l=_.length;d<l;d+=3)x(f,O,_[d],_[d+1],_[d+2],o[d],o[d+1],o[d+2]);break;default:throw new Error("illegal figure")}}class j extends he{constructor(A){super(),this._coords=A[2],this._colors=A[3],this._figures=A[4],this._bounds=A[5],this._bbox=A[7],this._background=A[8],this.matrix=null}_createMeshCanvas(A,O,_){const h=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),I=Math.ceil(this._bounds[2])-h,a=Math.ceil(this._bounds[3])-u,w=Math.min(Math.ceil(Math.abs(I*A[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(a*A[1]*1.1)),3e3),z=I/w,V=a/g,X={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-u,scaleX:1/z,scaleY:1/V},W=w+2*2,Q=g+2*2,T=_.getCanvas("mesh",W,Q,!1),H=T.context,Y=H.createImageData(w,g);if(O){const s=Y.data;for(let i=0,p=s.length;i<p;i+=4)s[i]=O[0],s[i+1]=O[1],s[i+2]=O[2],s[i+3]=255}for(const s of this._figures)m(Y,s,X);return H.putImageData(Y,2,2),{canvas:T.canvas,offsetX:h-2*z,offsetY:u-2*V,scaleX:z,scaleY:V}}getPattern(A,O,_,o){$(A,this._bbox);let d;if(o===q.SHADING)d=n.Util.singularValueDecompose2dScale((0,c.getCurrentTransform)(A));else if(d=n.Util.singularValueDecompose2dScale(O.baseTransform),this.matrix){const h=n.Util.singularValueDecompose2dScale(this.matrix);d=[d[0]*h[0],d[1]*h[1]]}const l=this._createMeshCanvas(d,o===q.SHADING?null:this._background,O.cachedCanvases);return o!==q.SHADING&&(A.setTransform(...O.baseTransform),this.matrix&&A.transform(...this.matrix)),A.translate(l.offsetX,l.offsetY),A.scale(l.scaleX,l.scaleY),A.createPattern(l.canvas,"no-repeat")}}class U extends he{getPattern(){return"hotpink"}}function v(f){switch(f[0]){case"RadialAxial":return new C(f);case"Mesh":return new j(f);case"Dummy":return new U}throw new Error(`Unknown IR type: ${f[0]}`)}const y={COLORED:1,UNCOLORED:2},b=class b{constructor(A,O,_,o,d){this.operatorList=A[2],this.matrix=A[3]||[1,0,0,1,0,0],this.bbox=A[4],this.xstep=A[5],this.ystep=A[6],this.paintType=A[7],this.tilingType=A[8],this.color=O,this.ctx=_,this.canvasGraphicsFactory=o,this.baseTransform=d}createPatternCanvas(A){const O=this.operatorList,_=this.bbox,o=this.xstep,d=this.ystep,l=this.paintType,h=this.tilingType,u=this.color,I=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+h);const a=_[0],w=_[1],g=_[2],z=_[3],V=n.Util.singularValueDecompose2dScale(this.matrix),X=n.Util.singularValueDecompose2dScale(this.baseTransform),W=[V[0]*X[0],V[1]*X[1]],Q=this.getSizeAndScale(o,this.ctx.canvas.width,W[0]),T=this.getSizeAndScale(d,this.ctx.canvas.height,W[1]),H=A.cachedCanvases.getCanvas("pattern",Q.size,T.size,!0),Y=H.context,E=I.createCanvasGraphics(Y);E.groupLevel=A.groupLevel,this.setFillAndStrokeStyleToContext(E,l,u);let s=a,i=w,p=g,M=z;return a<0&&(s=0,p+=Math.abs(a)),w<0&&(i=0,M+=Math.abs(w)),Y.translate(-(Q.scale*s),-(T.scale*i)),E.transform(Q.scale,0,0,T.scale,0,0),Y.save(),this.clipBbox(E,s,i,p,M),E.baseTransform=(0,c.getCurrentTransform)(E.ctx),E.executeOperatorList(O),E.endDrawing(),{canvas:H.canvas,scaleX:Q.scale,scaleY:T.scale,offsetX:s,offsetY:i}}getSizeAndScale(A,O,_){A=Math.abs(A);const o=Math.max(b.MAX_PATTERN_SIZE,O);let d=Math.ceil(A*_);return d>=o?d=o:_=d/A,{scale:_,size:d}}clipBbox(A,O,_,o,d){const l=o-O,h=d-_;A.ctx.rect(O,_,l,h),A.current.updateRectMinMax((0,c.getCurrentTransform)(A.ctx),[O,_,o,d]),A.clip(),A.endPath()}setFillAndStrokeStyleToContext(A,O,_){const o=A.ctx,d=A.current;switch(O){case y.COLORED:const l=this.ctx;o.fillStyle=l.fillStyle,o.strokeStyle=l.strokeStyle,d.fillColor=l.fillStyle,d.strokeColor=l.strokeStyle;break;case y.UNCOLORED:const h=n.Util.makeHexColor(_[0],_[1],_[2]);o.fillStyle=h,o.strokeStyle=h,d.fillColor=h,d.strokeColor=h;break;default:throw new n.FormatError(`Unsupported paint type: ${O}`)}}getPattern(A,O,_,o){let d=_;o!==q.SHADING&&(d=n.Util.transform(d,O.baseTransform),this.matrix&&(d=n.Util.transform(d,this.matrix)));const l=this.createPatternCanvas(O);let h=new DOMMatrix(d);h=h.translate(l.offsetX,l.offsetY),h=h.scale(1/l.scaleX,1/l.scaleY);const u=A.createPattern(l.canvas,"repeat");return u.setTransform(h),u}};Je(b,"MAX_PATTERN_SIZE",3e3);let R=b;t.TilingPattern=R},(P,t,k)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=q,t.convertToRGBA=c,t.grayToRGBA=he;var n=k(1);function c(C){switch(C.kind){case n.ImageKind.GRAYSCALE_1BPP:return q(C);case n.ImageKind.RGB_24BPP:return $(C)}return null}function q({src:C,srcPos:x=0,dest:m,width:j,height:U,nonBlackColor:v=4294967295,inverseDecode:y=!1}){const R=n.FeatureTest.isLittleEndian?4278190080:255,[b,f]=y?[v,R]:[R,v],A=j>>3,O=j&7,_=C.length;m=new Uint32Array(m.buffer);let o=0;for(let d=0;d<U;d++){for(const h=x+A;x<h;x++){const u=x<_?C[x]:255;m[o++]=u&128?f:b,m[o++]=u&64?f:b,m[o++]=u&32?f:b,m[o++]=u&16?f:b,m[o++]=u&8?f:b,m[o++]=u&4?f:b,m[o++]=u&2?f:b,m[o++]=u&1?f:b}if(O===0)continue;const l=x<_?C[x++]:255;for(let h=0;h<O;h++)m[o++]=l&1<<7-h?f:b}return{srcPos:x,destPos:o}}function $({src:C,srcPos:x=0,dest:m,destPos:j=0,width:U,height:v}){let y=0;const R=C.length>>2,b=new Uint32Array(C.buffer,x,R);if(n.FeatureTest.isLittleEndian){for(;y<R-2;y+=3,j+=4){const f=b[y],A=b[y+1],O=b[y+2];m[j]=f|4278190080,m[j+1]=f>>>24|A<<8|4278190080,m[j+2]=A>>>16|O<<16|4278190080,m[j+3]=O>>>8|4278190080}for(let f=y*4,A=C.length;f<A;f+=3)m[j++]=C[f]|C[f+1]<<8|C[f+2]<<16|4278190080}else{for(;y<R-2;y+=3,j+=4){const f=b[y],A=b[y+1],O=b[y+2];m[j]=f|255,m[j+1]=f<<24|A>>>8|255,m[j+2]=A<<16|O>>>16|255,m[j+3]=O<<8|255}for(let f=y*4,A=C.length;f<A;f+=3)m[j++]=C[f]<<24|C[f+1]<<16|C[f+2]<<8|255}return{srcPos:x,destPos:j}}function he(C,x){if(n.FeatureTest.isLittleEndian)for(let m=0,j=C.length;m<j;m++)x[m]=C[m]*65793|4278190080;else for(let m=0,j=C.length;m<j;m++)x[m]=C[m]*16843008|255}},(P,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const k=Object.create(null);t.GlobalWorkerOptions=k,k.workerPort=null,k.workerSrc=""},(P,t,k)=>{var C,Pn,xn,Tt;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n=k(1);const c={DATA:1,ERROR:2},q={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function $(U){switch(U instanceof Error||typeof U=="object"&&U!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),U.name){case"AbortException":return new n.AbortException(U.message);case"MissingPDFException":return new n.MissingPDFException(U.message);case"PasswordException":return new n.PasswordException(U.message,U.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(U.message,U.status);case"UnknownErrorException":return new n.UnknownErrorException(U.message,U.details);default:return new n.UnknownErrorException(U.message,U.toString())}}class he{constructor(v,y,R){oe(this,C);this.sourceName=v,this.targetName=y,this.comObj=R,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=b=>{const f=b.data;if(f.targetName!==this.sourceName)return;if(f.stream){ee(this,C,xn).call(this,f);return}if(f.callback){const O=f.callbackId,_=this.callbackCapabilities[O];if(!_)throw new Error(`Cannot resolve callback ${O}`);if(delete this.callbackCapabilities[O],f.callback===c.DATA)_.resolve(f.data);else if(f.callback===c.ERROR)_.reject($(f.reason));else throw new Error("Unexpected callback case");return}const A=this.actionHandler[f.action];if(!A)throw new Error(`Unknown action from worker: ${f.action}`);if(f.callbackId){const O=this.sourceName,_=f.sourceName;new Promise(function(o){o(A(f.data))}).then(function(o){R.postMessage({sourceName:O,targetName:_,callback:c.DATA,callbackId:f.callbackId,data:o})},function(o){R.postMessage({sourceName:O,targetName:_,callback:c.ERROR,callbackId:f.callbackId,reason:$(o)})});return}if(f.streamId){ee(this,C,Pn).call(this,f);return}A(f.data)},R.addEventListener("message",this._onComObjOnMessage)}on(v,y){const R=this.actionHandler;if(R[v])throw new Error(`There is already an actionName called "${v}"`);R[v]=y}send(v,y,R){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,data:y},R)}sendWithPromise(v,y,R){const b=this.callbackId++,f=new n.PromiseCapability;this.callbackCapabilities[b]=f;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,callbackId:b,data:y},R)}catch(A){f.reject(A)}return f.promise}sendWithStream(v,y,R,b){const f=this.streamId++,A=this.sourceName,O=this.targetName,_=this.comObj;return new ReadableStream({start:o=>{const d=new n.PromiseCapability;return this.streamControllers[f]={controller:o,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},_.postMessage({sourceName:A,targetName:O,action:v,streamId:f,data:y,desiredSize:o.desiredSize},b),d.promise},pull:o=>{const d=new n.PromiseCapability;return this.streamControllers[f].pullCall=d,_.postMessage({sourceName:A,targetName:O,stream:q.PULL,streamId:f,desiredSize:o.desiredSize}),d.promise},cancel:o=>{(0,n.assert)(o instanceof Error,"cancel must have a valid reason");const d=new n.PromiseCapability;return this.streamControllers[f].cancelCall=d,this.streamControllers[f].isClosed=!0,_.postMessage({sourceName:A,targetName:O,stream:q.CANCEL,streamId:f,reason:$(o)}),d.promise}},R)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}C=new WeakSet,Pn=function(v){const y=v.streamId,R=this.sourceName,b=v.sourceName,f=this.comObj,A=this,O=this.actionHandler[v.action],_={enqueue(o,d=1,l){if(this.isCancelled)return;const h=this.desiredSize;this.desiredSize-=d,h>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),f.postMessage({sourceName:R,targetName:b,stream:q.ENQUEUE,streamId:y,chunk:o},l)},close(){this.isCancelled||(this.isCancelled=!0,f.postMessage({sourceName:R,targetName:b,stream:q.CLOSE,streamId:y}),delete A.streamSinks[y])},error(o){(0,n.assert)(o instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,f.postMessage({sourceName:R,targetName:b,stream:q.ERROR,streamId:y,reason:$(o)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:v.desiredSize,ready:null};_.sinkCapability.resolve(),_.ready=_.sinkCapability.promise,this.streamSinks[y]=_,new Promise(function(o){o(O(v.data,_))}).then(function(){f.postMessage({sourceName:R,targetName:b,stream:q.START_COMPLETE,streamId:y,success:!0})},function(o){f.postMessage({sourceName:R,targetName:b,stream:q.START_COMPLETE,streamId:y,reason:$(o)})})},xn=function(v){const y=v.streamId,R=this.sourceName,b=v.sourceName,f=this.comObj,A=this.streamControllers[y],O=this.streamSinks[y];switch(v.stream){case q.START_COMPLETE:v.success?A.startCall.resolve():A.startCall.reject($(v.reason));break;case q.PULL_COMPLETE:v.success?A.pullCall.resolve():A.pullCall.reject($(v.reason));break;case q.PULL:if(!O){f.postMessage({sourceName:R,targetName:b,stream:q.PULL_COMPLETE,streamId:y,success:!0});break}O.desiredSize<=0&&v.desiredSize>0&&O.sinkCapability.resolve(),O.desiredSize=v.desiredSize,new Promise(function(_){var o;_((o=O.onPull)==null?void 0:o.call(O))}).then(function(){f.postMessage({sourceName:R,targetName:b,stream:q.PULL_COMPLETE,streamId:y,success:!0})},function(_){f.postMessage({sourceName:R,targetName:b,stream:q.PULL_COMPLETE,streamId:y,reason:$(_)})});break;case q.ENQUEUE:if((0,n.assert)(A,"enqueue should have stream controller"),A.isClosed)break;A.controller.enqueue(v.chunk);break;case q.CLOSE:if((0,n.assert)(A,"close should have stream controller"),A.isClosed)break;A.isClosed=!0,A.controller.close(),ee(this,C,Tt).call(this,A,y);break;case q.ERROR:(0,n.assert)(A,"error should have stream controller"),A.controller.error($(v.reason)),ee(this,C,Tt).call(this,A,y);break;case q.CANCEL_COMPLETE:v.success?A.cancelCall.resolve():A.cancelCall.reject($(v.reason)),ee(this,C,Tt).call(this,A,y);break;case q.CANCEL:if(!O)break;new Promise(function(_){var o;_((o=O.onCancel)==null?void 0:o.call(O,$(v.reason)))}).then(function(){f.postMessage({sourceName:R,targetName:b,stream:q.CANCEL_COMPLETE,streamId:y,success:!0})},function(_){f.postMessage({sourceName:R,targetName:b,stream:q.CANCEL_COMPLETE,streamId:y,reason:$(_)})}),O.sinkCapability.reject($(v.reason)),O.isCancelled=!0,delete this.streamSinks[y];break;default:throw new Error("Unexpected stream case")}},Tt=async function(v,y){var R,b,f;await Promise.allSettled([(R=v.startCall)==null?void 0:R.promise,(b=v.pullCall)==null?void 0:b.promise,(f=v.cancelCall)==null?void 0:f.promise]),delete this.streamControllers[y]},t.MessageHandler=he},(P,t,k)=>{var q,$;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=k(1);class c{constructor({parsedData:C,rawData:x}){oe(this,q);oe(this,$);ce(this,q,C),ce(this,$,x)}getRaw(){return e(this,$)}get(C){return e(this,q).get(C)??null}getAll(){return(0,n.objectFromMap)(e(this,q))}has(C){return e(this,q).has(C)}}q=new WeakMap,$=new WeakMap,t.Metadata=c},(P,t,k)=>{var C,x,m,j,U,v,Kt;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var n=k(1),c=k(8);const q=Symbol("INTERNAL");class ${constructor(b,f){oe(this,C,!0);this.name=b,this.intent=f}get visible(){return e(this,C)}_setVisible(b,f){b!==q&&(0,n.unreachable)("Internal method `_setVisible` called."),ce(this,C,f)}}C=new WeakMap;class he{constructor(b){oe(this,v);oe(this,x,null);oe(this,m,new Map);oe(this,j,null);oe(this,U,null);if(this.name=null,this.creator=null,b!==null){this.name=b.name,this.creator=b.creator,ce(this,U,b.order);for(const f of b.groups)e(this,m).set(f.id,new $(f.name,f.intent));if(b.baseState==="OFF")for(const f of e(this,m).values())f._setVisible(q,!1);for(const f of b.on)e(this,m).get(f)._setVisible(q,!0);for(const f of b.off)e(this,m).get(f)._setVisible(q,!1);ce(this,j,this.getHash())}}isVisible(b){if(e(this,m).size===0)return!0;if(!b)return(0,n.warn)("Optional content group not defined."),!0;if(b.type==="OCG")return e(this,m).has(b.id)?e(this,m).get(b.id).visible:((0,n.warn)(`Optional content group not found: ${b.id}`),!0);if(b.type==="OCMD"){if(b.expression)return ee(this,v,Kt).call(this,b.expression);if(!b.policy||b.policy==="AnyOn"){for(const f of b.ids){if(!e(this,m).has(f))return(0,n.warn)(`Optional content group not found: ${f}`),!0;if(e(this,m).get(f).visible)return!0}return!1}else if(b.policy==="AllOn"){for(const f of b.ids){if(!e(this,m).has(f))return(0,n.warn)(`Optional content group not found: ${f}`),!0;if(!e(this,m).get(f).visible)return!1}return!0}else if(b.policy==="AnyOff"){for(const f of b.ids){if(!e(this,m).has(f))return(0,n.warn)(`Optional content group not found: ${f}`),!0;if(!e(this,m).get(f).visible)return!0}return!1}else if(b.policy==="AllOff"){for(const f of b.ids){if(!e(this,m).has(f))return(0,n.warn)(`Optional content group not found: ${f}`),!0;if(e(this,m).get(f).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${b.policy}.`),!0}return(0,n.warn)(`Unknown group type ${b.type}.`),!0}setVisibility(b,f=!0){if(!e(this,m).has(b)){(0,n.warn)(`Optional content group not found: ${b}`);return}e(this,m).get(b)._setVisible(q,!!f),ce(this,x,null)}get hasInitialVisibility(){return e(this,j)===null||this.getHash()===e(this,j)}getOrder(){return e(this,m).size?e(this,U)?e(this,U).slice():[...e(this,m).keys()]:null}getGroups(){return e(this,m).size>0?(0,n.objectFromMap)(e(this,m)):null}getGroup(b){return e(this,m).get(b)||null}getHash(){if(e(this,x)!==null)return e(this,x);const b=new c.MurmurHash3_64;for(const[f,A]of e(this,m))b.update(`${f}:${A.visible}`);return ce(this,x,b.hexdigest())}}x=new WeakMap,m=new WeakMap,j=new WeakMap,U=new WeakMap,v=new WeakSet,Kt=function(b){const f=b.length;if(f<2)return!0;const A=b[0];for(let O=1;O<f;O++){const _=b[O];let o;if(Array.isArray(_))o=ee(this,v,Kt).call(this,_);else if(e(this,m).has(_))o=e(this,m).get(_).visible;else return(0,n.warn)(`Optional content group not found: ${_}`),!0;switch(A){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return A==="And"},t.OptionalContentConfig=he},(P,t,k)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var n=k(1),c=k(6);class q{constructor({length:x,initialData:m,progressiveDone:j=!1,contentDispositionFilename:U=null,disableRange:v=!1,disableStream:y=!1},R){if((0,n.assert)(R,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=j,this._contentDispositionFilename=U,(m==null?void 0:m.length)>0){const b=m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength?m.buffer:new Uint8Array(m).buffer;this._queuedChunks.push(b)}this._pdfDataRangeTransport=R,this._isStreamingSupported=!y,this._isRangeSupported=!v,this._contentLength=x,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((b,f)=>{this._onReceiveData({begin:b,chunk:f})}),this._pdfDataRangeTransport.addProgressListener((b,f)=>{this._onProgress({loaded:b,total:f})}),this._pdfDataRangeTransport.addProgressiveReadListener(b=>{this._onReceiveData({chunk:b})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:x,chunk:m}){const j=m instanceof Uint8Array&&m.byteLength===m.buffer.byteLength?m.buffer:new Uint8Array(m).buffer;if(x===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(j):this._queuedChunks.push(j);else{const U=this._rangeReaders.some(function(v){return v._begin!==x?!1:(v._enqueue(j),!0)});(0,n.assert)(U,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var x;return((x=this._fullRequestReader)==null?void 0:x._loaded)??0}_onProgress(x){var m,j,U,v;x.total===void 0?(j=(m=this._rangeReaders[0])==null?void 0:m.onProgress)==null||j.call(m,{loaded:x.loaded}):(v=(U=this._fullRequestReader)==null?void 0:U.onProgress)==null||v.call(U,{loaded:x.loaded,total:x.total})}_onProgressiveDone(){var x;(x=this._fullRequestReader)==null||x.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(x){const m=this._rangeReaders.indexOf(x);m>=0&&this._rangeReaders.splice(m,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const x=this._queuedChunks;return this._queuedChunks=null,new $(this,x,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(x,m){if(m<=this._progressiveDataLength)return null;const j=new he(this,x,m);return this._pdfDataRangeTransport.requestDataRange(x,m),this._rangeReaders.push(j),j}cancelAllRequests(x){var m;(m=this._fullRequestReader)==null||m.cancel(x);for(const j of this._rangeReaders.slice(0))j.cancel(x);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=q;class ${constructor(x,m,j=!1,U=null){this._stream=x,this._done=j||!1,this._filename=(0,c.isPdfFile)(U)?U:null,this._queuedChunks=m||[],this._loaded=0;for(const v of this._queuedChunks)this._loaded+=v.byteLength;this._requests=[],this._headersReady=Promise.resolve(),x._fullRequestReader=this,this.onProgress=null}_enqueue(x){this._done||(this._requests.length>0?this._requests.shift().resolve({value:x,done:!1}):this._queuedChunks.push(x),this._loaded+=x.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const x=new n.PromiseCapability;return this._requests.push(x),x.promise}cancel(x){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class he{constructor(x,m,j){this._stream=x,this._begin=m,this._end=j,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(x){if(!this._done){if(this._requests.length===0)this._queuedChunk=x;else{this._requests.shift().resolve({value:x,done:!1});for(const j of this._requests)j.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const m=this._queuedChunk;return this._queuedChunk=null,{value:m,done:!1}}if(this._done)return{value:void 0,done:!0};const x=new n.PromiseCapability;return this._requests.push(x),x.promise}cancel(x){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(P,t,k)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var n=k(1),c=k(20);function q(j,U,v){return{method:"GET",headers:j,signal:v.signal,mode:"cors",credentials:U?"include":"same-origin",redirect:"follow"}}function $(j){const U=new Headers;for(const v in j){const y=j[v];y!==void 0&&U.append(v,y)}return U}function he(j){return j instanceof Uint8Array?j.buffer:j instanceof ArrayBuffer?j:((0,n.warn)(`getArrayBuffer - unexpected data format: ${j}`),new Uint8Array(j).buffer)}class C{constructor(U){this.source=U,this.isHttp=/^https?:/i.test(U.url),this.httpHeaders=this.isHttp&&U.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var U;return((U=this._fullRequestReader)==null?void 0:U._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new x(this),this._fullRequestReader}getRangeReader(U,v){if(v<=this._progressiveDataLength)return null;const y=new m(this,U,v);return this._rangeRequestReaders.push(y),y}cancelAllRequests(U){var v;(v=this._fullRequestReader)==null||v.cancel(U);for(const y of this._rangeRequestReaders.slice(0))y.cancel(U)}}t.PDFFetchStream=C;class x{constructor(U){this._stream=U,this._reader=null,this._loaded=0,this._filename=null;const v=U.source;this._withCredentials=v.withCredentials||!1,this._contentLength=v.length,this._headersCapability=new n.PromiseCapability,this._disableRange=v.disableRange||!1,this._rangeChunkSize=v.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!v.disableStream,this._isRangeSupported=!v.disableRange,this._headers=$(this._stream.httpHeaders);const y=v.url;fetch(y,q(this._headers,this._withCredentials,this._abortController)).then(R=>{if(!(0,c.validateResponseStatus)(R.status))throw(0,c.createResponseStatusError)(R.status,y);this._reader=R.body.getReader(),this._headersCapability.resolve();const b=O=>R.headers.get(O),{allowRangeRequests:f,suggestedLength:A}=(0,c.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=f,this._contentLength=A||this._contentLength,this._filename=(0,c.extractFilenameFromHeader)(b),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var y;await this._headersCapability.promise;const{value:U,done:v}=await this._reader.read();return v?{value:U,done:v}:(this._loaded+=U.byteLength,(y=this.onProgress)==null||y.call(this,{loaded:this._loaded,total:this._contentLength}),{value:he(U),done:!1})}cancel(U){var v;(v=this._reader)==null||v.cancel(U),this._abortController.abort()}}class m{constructor(U,v,y){this._stream=U,this._reader=null,this._loaded=0;const R=U.source;this._withCredentials=R.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!R.disableStream,this._abortController=new AbortController,this._headers=$(this._stream.httpHeaders),this._headers.append("Range",`bytes=${v}-${y-1}`);const b=R.url;fetch(b,q(this._headers,this._withCredentials,this._abortController)).then(f=>{if(!(0,c.validateResponseStatus)(f.status))throw(0,c.createResponseStatusError)(f.status,b);this._readCapability.resolve(),this._reader=f.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var y;await this._readCapability.promise;const{value:U,done:v}=await this._reader.read();return v?{value:U,done:v}:(this._loaded+=U.byteLength,(y=this.onProgress)==null||y.call(this,{loaded:this._loaded}),{value:he(U),done:!1})}cancel(U){var v;(v=this._reader)==null||v.cancel(U),this._abortController.abort()}}},(P,t,k)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=C,t.extractFilenameFromHeader=he,t.validateRangeRequestCapabilities=$,t.validateResponseStatus=x;var n=k(1),c=k(21),q=k(6);function $({getResponseHeader:m,isHttp:j,rangeChunkSize:U,disableRange:v}){const y={allowRangeRequests:!1,suggestedLength:void 0},R=parseInt(m("Content-Length"),10);return!Number.isInteger(R)||(y.suggestedLength=R,R<=2*U)||v||!j||m("Accept-Ranges")!=="bytes"||(m("Content-Encoding")||"identity")!=="identity"||(y.allowRangeRequests=!0),y}function he(m){const j=m("Content-Disposition");if(j){let U=(0,c.getFilenameFromContentDispositionHeader)(j);if(U.includes("%"))try{U=decodeURIComponent(U)}catch{}if((0,q.isPdfFile)(U))return U}return null}function C(m,j){return m===404||m===0&&j.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+j+'".'):new n.UnexpectedResponseException(`Unexpected server response (${m}) while retrieving PDF "${j}".`,m)}function x(m){return m===200||m===206}},(P,t,k)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=c;var n=k(1);function c(q){let $=!0,he=C("filename\\*","i").exec(q);if(he){he=he[1];let R=U(he);return R=unescape(R),R=v(R),R=y(R),m(R)}if(he=j(q),he){const R=y(he);return m(R)}if(he=C("filename","i").exec(q),he){he=he[1];let R=U(he);return R=y(R),m(R)}function C(R,b){return new RegExp("(?:^|;)\\s*"+R+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function x(R,b){if(R){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const f=new TextDecoder(R,{fatal:!0}),A=(0,n.stringToBytes)(b);b=f.decode(A),$=!1}catch{}}return b}function m(R){return $&&/[\x80-\xff]/.test(R)&&(R=x("utf-8",R),$&&(R=x("iso-8859-1",R))),R}function j(R){const b=[];let f;const A=C("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=A.exec(R))!==null;){let[,_,o,d]=f;if(_=parseInt(_,10),_ in b){if(_===0)break;continue}b[_]=[o,d]}const O=[];for(let _=0;_<b.length&&_ in b;++_){let[o,d]=b[_];d=U(d),o&&(d=unescape(d),_===0&&(d=v(d))),O.push(d)}return O.join("")}function U(R){if(R.startsWith('"')){const b=R.slice(1).split('\\"');for(let f=0;f<b.length;++f){const A=b[f].indexOf('"');A!==-1&&(b[f]=b[f].slice(0,A),b.length=f+1),b[f]=b[f].replaceAll(/\\(.)/g,"$1")}R=b.join('"')}return R}function v(R){const b=R.indexOf("'");if(b===-1)return R;const f=R.slice(0,b),O=R.slice(b+1).replace(/^[^']*'/,"");return x(f,O)}function y(R){return!R.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(R)?R:R.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,f,A,O){if(A==="q"||A==="Q")return O=O.replaceAll("_"," "),O=O.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,o){return String.fromCharCode(parseInt(o,16))}),x(f,O);try{O=atob(O)}catch{}return x(f,O)})}return""}},(P,t,k)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var n=k(1),c=k(20);const q=200,$=206;function he(U){const v=U.response;return typeof v!="string"?v:(0,n.stringToBytes)(v).buffer}class C{constructor(v,y={}){this.url=v,this.isHttp=/^https?:/i.test(v),this.httpHeaders=this.isHttp&&y.httpHeaders||Object.create(null),this.withCredentials=y.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(v,y,R){const b={begin:v,end:y};for(const f in R)b[f]=R[f];return this.request(b)}requestFull(v){return this.request(v)}request(v){const y=new XMLHttpRequest,R=this.currXhrId++,b=this.pendingRequests[R]={xhr:y};y.open("GET",this.url),y.withCredentials=this.withCredentials;for(const f in this.httpHeaders){const A=this.httpHeaders[f];A!==void 0&&y.setRequestHeader(f,A)}return this.isHttp&&"begin"in v&&"end"in v?(y.setRequestHeader("Range",`bytes=${v.begin}-${v.end-1}`),b.expectedStatus=$):b.expectedStatus=q,y.responseType="arraybuffer",v.onError&&(y.onerror=function(f){v.onError(y.status)}),y.onreadystatechange=this.onStateChange.bind(this,R),y.onprogress=this.onProgress.bind(this,R),b.onHeadersReceived=v.onHeadersReceived,b.onDone=v.onDone,b.onError=v.onError,b.onProgress=v.onProgress,y.send(null),R}onProgress(v,y){var b;const R=this.pendingRequests[v];R&&((b=R.onProgress)==null||b.call(R,y))}onStateChange(v,y){var _,o,d;const R=this.pendingRequests[v];if(!R)return;const b=R.xhr;if(b.readyState>=2&&R.onHeadersReceived&&(R.onHeadersReceived(),delete R.onHeadersReceived),b.readyState!==4||!(v in this.pendingRequests))return;if(delete this.pendingRequests[v],b.status===0&&this.isHttp){(_=R.onError)==null||_.call(R,b.status);return}const f=b.status||q;if(!(f===q&&R.expectedStatus===$)&&f!==R.expectedStatus){(o=R.onError)==null||o.call(R,b.status);return}const O=he(b);if(f===$){const l=b.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);R.onDone({begin:parseInt(h[1],10),chunk:O})}else O?R.onDone({begin:0,chunk:O}):(d=R.onError)==null||d.call(R,b.status)}getRequestXhr(v){return this.pendingRequests[v].xhr}isPendingRequest(v){return v in this.pendingRequests}abortRequest(v){const y=this.pendingRequests[v].xhr;delete this.pendingRequests[v],y.abort()}}class x{constructor(v){this._source=v,this._manager=new C(v.url,{httpHeaders:v.httpHeaders,withCredentials:v.withCredentials}),this._rangeChunkSize=v.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(v){const y=this._rangeRequestReaders.indexOf(v);y>=0&&this._rangeRequestReaders.splice(y,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new m(this._manager,this._source),this._fullRequestReader}getRangeReader(v,y){const R=new j(this._manager,v,y);return R.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(R),R}cancelAllRequests(v){var y;(y=this._fullRequestReader)==null||y.cancel(v);for(const R of this._rangeRequestReaders.slice(0))R.cancel(v)}}t.PDFNetworkStream=x;class m{constructor(v,y){this._manager=v;const R={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._fullRequestId=v.requestFull(R),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=y.disableRange||!1,this._contentLength=y.length,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const v=this._fullRequestId,y=this._manager.getRequestXhr(v),R=A=>y.getResponseHeader(A),{allowRangeRequests:b,suggestedLength:f}=(0,c.validateRangeRequestCapabilities)({getResponseHeader:R,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});b&&(this._isRangeSupported=!0),this._contentLength=f||this._contentLength,this._filename=(0,c.extractFilenameFromHeader)(R),this._isRangeSupported&&this._manager.abortRequest(v),this._headersReceivedCapability.resolve()}_onDone(v){if(v&&(this._requests.length>0?this._requests.shift().resolve({value:v.chunk,done:!1}):this._cachedChunks.push(v.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(v){this._storedError=(0,c.createResponseStatusError)(v,this._url),this._headersReceivedCapability.reject(this._storedError);for(const y of this._requests)y.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(v){var y;(y=this.onProgress)==null||y.call(this,{loaded:v.loaded,total:v.lengthComputable?v.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const v=new n.PromiseCapability;return this._requests.push(v),v.promise}cancel(v){this._done=!0,this._headersReceivedCapability.reject(v);for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class j{constructor(v,y,R){this._manager=v;const b={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=v.url,this._requestId=v.requestRange(y,R,b),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var v;(v=this.onClosed)==null||v.call(this,this)}_onDone(v){const y=v.chunk;this._requests.length>0?this._requests.shift().resolve({value:y,done:!1}):this._queuedChunk=y,this._done=!0;for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(v){this._storedError=(0,c.createResponseStatusError)(v,this._url);for(const y of this._requests)y.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(v){var y;this.isStreamingSupported||(y=this.onProgress)==null||y.call(this,{loaded:v.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const y=this._queuedChunk;return this._queuedChunk=null,{value:y,done:!1}}if(this._done)return{value:void 0,done:!0};const v=new n.PromiseCapability;return this._requests.push(v),v.promise}cancel(v){this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(P,t,k)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var n=k(1),c=k(20);const q=/^file:\/\/\/[a-zA-Z]:\//;function $(R){const b=require$$5,f=b.parse(R);return f.protocol==="file:"||f.host?f:/^[a-z]:[/\\]/i.test(R)?b.parse(`file:///${R}`):(f.host||(f.protocol="file:"),f)}class he{constructor(b){this.source=b,this.url=$(b.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var b;return((b=this._fullRequestReader)==null?void 0:b._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new v(this):new j(this),this._fullRequestReader}getRangeReader(b,f){if(f<=this._progressiveDataLength)return null;const A=this.isFsUrl?new y(this,b,f):new U(this,b,f);return this._rangeRequestReaders.push(A),A}cancelAllRequests(b){var f;(f=this._fullRequestReader)==null||f.cancel(b);for(const A of this._rangeRequestReaders.slice(0))A.cancel(b)}}t.PDFNodeStream=he;class C{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null;const f=b.source;this._contentLength=f.length,this._loaded=0,this._filename=null,this._disableRange=f.disableRange||!1,this._rangeChunkSize=f.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!f.disableStream,this._isRangeSupported=!f.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var A;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=b.length,(A=this.onProgress)==null||A.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",f=>{this._error(f)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class x{constructor(b){this._url=b.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const f=b.source;this._isStreamingSupported=!f.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var A;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const b=this._readableStream.read();return b===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=b.length,(A=this.onProgress)==null||A.call(this,{loaded:this._loaded}),{value:new Uint8Array(b).buffer,done:!1})}cancel(b){if(!this._readableStream){this._error(b);return}this._readableStream.destroy(b)}_error(b){this._storedError=b,this._readCapability.resolve()}_setReadableStream(b){this._readableStream=b,b.on("readable",()=>{this._readCapability.resolve()}),b.on("end",()=>{b.destroy(),this._done=!0,this._readCapability.resolve()}),b.on("error",f=>{this._error(f)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function m(R,b){return{protocol:R.protocol,auth:R.auth,host:R.hostname,port:R.port,path:R.path,method:"GET",headers:b}}class j extends C{constructor(b){super(b);const f=A=>{if(A.statusCode===404){const d=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=d,this._headersCapability.reject(d);return}this._headersCapability.resolve(),this._setReadableStream(A);const O=d=>this._readableStream.headers[d.toLowerCase()],{allowRangeRequests:_,suggestedLength:o}=(0,c.validateRangeRequestCapabilities)({getResponseHeader:O,isHttp:b.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=_,this._contentLength=o||this._contentLength,this._filename=(0,c.extractFilenameFromHeader)(O)};if(this._request=null,this._url.protocol==="http:"){const A=require$$5;this._request=A.request(m(this._url,b.httpHeaders),f)}else{const A=require$$5;this._request=A.request(m(this._url,b.httpHeaders),f)}this._request.on("error",A=>{this._storedError=A,this._headersCapability.reject(A)}),this._request.end()}}class U extends x{constructor(b,f,A){super(b),this._httpHeaders={};for(const _ in b.httpHeaders){const o=b.httpHeaders[_];o!==void 0&&(this._httpHeaders[_]=o)}this._httpHeaders.Range=`bytes=${f}-${A-1}`;const O=_=>{if(_.statusCode===404){const o=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(_)};if(this._request=null,this._url.protocol==="http:"){const _=require$$5;this._request=_.request(m(this._url,this._httpHeaders),O)}else{const _=require$$5;this._request=_.request(m(this._url,this._httpHeaders),O)}this._request.on("error",_=>{this._storedError=_}),this._request.end()}}class v extends C{constructor(b){super(b);let f=decodeURIComponent(this._url.path);q.test(this._url.href)&&(f=f.replace(/^\//,""));const A=require$$5;A.lstat(f,(O,_)=>{if(O){O.code==="ENOENT"&&(O=new n.MissingPDFException(`Missing PDF "${f}".`)),this._storedError=O,this._headersCapability.reject(O);return}this._contentLength=_.size,this._setReadableStream(A.createReadStream(f)),this._headersCapability.resolve()})}}class y extends x{constructor(b,f,A){super(b);let O=decodeURIComponent(this._url.path);q.test(this._url.href)&&(O=O.replace(/^\//,""));const _=require$$5;this._setReadableStream(_.createReadStream(O,{start:f,end:A-1}))}}},(P,t,k)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var n=k(6),c=k(1);const q={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},$="http://www.w3.org/XML/1998/namespace",he="http://www.w3.org/1999/xlink",C=["butt","round","square"],x=["miter","round","bevel"],m=function(_,o="",d=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!d)return URL.createObjectURL(new Blob([_],{type:o}));const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let h=`data:${o};base64,`;for(let u=0,I=_.length;u<I;u+=3){const a=_[u]&255,w=_[u+1]&255,g=_[u+2]&255,z=a>>2,V=(a&3)<<4|w>>4,X=u+1<I?(w&15)<<2|g>>6:64,W=u+2<I?g&63:64;h+=l[z]+l[V]+l[X]+l[W]}return h},j=function(){const _=new Uint8Array([137,80,78,71,13,10,26,10]),o=12,d=new Int32Array(256);for(let g=0;g<256;g++){let z=g;for(let V=0;V<8;V++)z=z&1?3988292384^z>>1&2147483647:z>>1&2147483647;d[g]=z}function l(g,z,V){let X=-1;for(let W=z;W<V;W++){const Q=(X^g[W])&255,T=d[Q];X=X>>>8^T}return X^-1}function h(g,z,V,X){let W=X;const Q=z.length;V[W]=Q>>24&255,V[W+1]=Q>>16&255,V[W+2]=Q>>8&255,V[W+3]=Q&255,W+=4,V[W]=g.charCodeAt(0)&255,V[W+1]=g.charCodeAt(1)&255,V[W+2]=g.charCodeAt(2)&255,V[W+3]=g.charCodeAt(3)&255,W+=4,V.set(z,W),W+=z.length;const T=l(V,X+4,W);V[W]=T>>24&255,V[W+1]=T>>16&255,V[W+2]=T>>8&255,V[W+3]=T&255}function u(g,z,V){let X=1,W=0;for(let Q=z;Q<V;++Q)X=(X+(g[Q]&255))%65521,W=(W+X)%65521;return W<<16|X}function I(g){if(!c.isNodeJS)return a(g);try{const z=parseInt(process.versions.node)>=8?g:Buffer.from(g),V=require$$5.deflateSync(z,{level:9});return V instanceof Uint8Array?V:new Uint8Array(V)}catch(z){(0,c.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+z)}return a(g)}function a(g){let z=g.length;const V=65535,X=Math.ceil(z/V),W=new Uint8Array(2+z+X*5+4);let Q=0;W[Q++]=120,W[Q++]=156;let T=0;for(;z>V;)W[Q++]=0,W[Q++]=255,W[Q++]=255,W[Q++]=0,W[Q++]=0,W.set(g.subarray(T,T+V),Q),Q+=V,T+=V,z-=V;W[Q++]=1,W[Q++]=z&255,W[Q++]=z>>8&255,W[Q++]=~z&65535&255,W[Q++]=(~z&65535)>>8&255,W.set(g.subarray(T),Q),Q+=g.length-T;const H=u(g,0,g.length);return W[Q++]=H>>24&255,W[Q++]=H>>16&255,W[Q++]=H>>8&255,W[Q++]=H&255,W}function w(g,z,V,X){const W=g.width,Q=g.height;let T,H,Y;const E=g.data;switch(z){case c.ImageKind.GRAYSCALE_1BPP:H=0,T=1,Y=W+7>>3;break;case c.ImageKind.RGB_24BPP:H=2,T=8,Y=W*3;break;case c.ImageKind.RGBA_32BPP:H=6,T=8,Y=W*4;break;default:throw new Error("invalid format")}const s=new Uint8Array((1+Y)*Q);let i=0,p=0;for(let de=0;de<Q;++de)s[i++]=0,s.set(E.subarray(p,p+Y),i),p+=Y,i+=Y;if(z===c.ImageKind.GRAYSCALE_1BPP&&X){i=0;for(let de=0;de<Q;de++){i++;for(let te=0;te<Y;te++)s[i++]^=255}}const M=new Uint8Array([W>>24&255,W>>16&255,W>>8&255,W&255,Q>>24&255,Q>>16&255,Q>>8&255,Q&255,T,H,0,0,0]),L=I(s),N=_.length+o*3+M.length+L.length,J=new Uint8Array(N);let re=0;return J.set(_,re),re+=_.length,h("IHDR",M,J,re),re+=o+M.length,h("IDATA",L,J,re),re+=o+L.length,h("IEND",new Uint8Array(0),J,re),m(J,"image/png",V)}return function(z,V,X){const W=z.kind===void 0?c.ImageKind.GRAYSCALE_1BPP:z.kind;return w(z,W,V,X)}}();class U{constructor(){this.fontSizeScale=1,this.fontWeight=q.fontWeight,this.fontSize=0,this.textMatrix=c.IDENTITY_MATRIX,this.fontMatrix=c.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=c.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=q.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(o,d){this.x=o,this.y=d}}function v(_){let o=[];const d=[];for(const l of _){if(l.fn==="save"){o.push({fnId:92,fn:"group",items:[]}),d.push(o),o=o.at(-1).items;continue}l.fn==="restore"?o=d.pop():o.push(l)}return o}function y(_){if(Number.isInteger(_))return _.toString();const o=_.toFixed(10);let d=o.length-1;if(o[d]!=="0")return o;do d--;while(o[d]==="0");return o.substring(0,o[d]==="."?d:d+1)}function R(_){if(_[4]===0&&_[5]===0){if(_[1]===0&&_[2]===0)return _[0]===1&&_[3]===1?"":`scale(${y(_[0])} ${y(_[3])})`;if(_[0]===_[3]&&_[1]===-_[2]){const o=Math.acos(_[0])*180/Math.PI;return`rotate(${y(o)})`}}else if(_[0]===1&&_[1]===0&&_[2]===0&&_[3]===1)return`translate(${y(_[4])} ${y(_[5])})`;return`matrix(${y(_[0])} ${y(_[1])} ${y(_[2])} ${y(_[3])} ${y(_[4])} ${y(_[5])})`}let b=0,f=0,A=0;class O{constructor(o,d,l=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new U,this.transformMatrix=c.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=o,this.objs=d,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!l,this._operatorIdMapping=[];for(const h in c.OPS)this._operatorIdMapping[c.OPS[h]]=h}getObject(o,d=null){return typeof o=="string"?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):d}save(){this.transformStack.push(this.transformMatrix);const o=this.current;this.extraStack.push(o),this.current=o.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(o){this.save(),this.executeOpTree(o),this.restore()}loadDependencies(o){const d=o.fnArray,l=o.argsArray;for(let h=0,u=d.length;h<u;h++)if(d[h]===c.OPS.dependency)for(const I of l[h]){const a=I.startsWith("g_")?this.commonObjs:this.objs,w=new Promise(g=>{a.get(I,g)});this.current.dependencies.push(w)}return Promise.all(this.current.dependencies)}transform(o,d,l,h,u,I){const a=[o,d,l,h,u,I];this.transformMatrix=c.Util.transform(this.transformMatrix,a),this.tgrp=null}getSVG(o,d){this.viewport=d;const l=this._initialize(d);return this.loadDependencies(o).then(()=>(this.transformMatrix=c.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(o)),l))}convertOpList(o){const d=this._operatorIdMapping,l=o.argsArray,h=o.fnArray,u=[];for(let I=0,a=h.length;I<a;I++){const w=h[I];u.push({fnId:w,fn:d[w],args:l[I]})}return v(u)}executeOpTree(o){for(const d of o){const l=d.fn,h=d.fnId,u=d.args;switch(h|0){case c.OPS.beginText:this.beginText();break;case c.OPS.dependency:break;case c.OPS.setLeading:this.setLeading(u);break;case c.OPS.setLeadingMoveText:this.setLeadingMoveText(u[0],u[1]);break;case c.OPS.setFont:this.setFont(u);break;case c.OPS.showText:this.showText(u[0]);break;case c.OPS.showSpacedText:this.showText(u[0]);break;case c.OPS.endText:this.endText();break;case c.OPS.moveText:this.moveText(u[0],u[1]);break;case c.OPS.setCharSpacing:this.setCharSpacing(u[0]);break;case c.OPS.setWordSpacing:this.setWordSpacing(u[0]);break;case c.OPS.setHScale:this.setHScale(u[0]);break;case c.OPS.setTextMatrix:this.setTextMatrix(u[0],u[1],u[2],u[3],u[4],u[5]);break;case c.OPS.setTextRise:this.setTextRise(u[0]);break;case c.OPS.setTextRenderingMode:this.setTextRenderingMode(u[0]);break;case c.OPS.setLineWidth:this.setLineWidth(u[0]);break;case c.OPS.setLineJoin:this.setLineJoin(u[0]);break;case c.OPS.setLineCap:this.setLineCap(u[0]);break;case c.OPS.setMiterLimit:this.setMiterLimit(u[0]);break;case c.OPS.setFillRGBColor:this.setFillRGBColor(u[0],u[1],u[2]);break;case c.OPS.setStrokeRGBColor:this.setStrokeRGBColor(u[0],u[1],u[2]);break;case c.OPS.setStrokeColorN:this.setStrokeColorN(u);break;case c.OPS.setFillColorN:this.setFillColorN(u);break;case c.OPS.shadingFill:this.shadingFill(u[0]);break;case c.OPS.setDash:this.setDash(u[0],u[1]);break;case c.OPS.setRenderingIntent:this.setRenderingIntent(u[0]);break;case c.OPS.setFlatness:this.setFlatness(u[0]);break;case c.OPS.setGState:this.setGState(u[0]);break;case c.OPS.fill:this.fill();break;case c.OPS.eoFill:this.eoFill();break;case c.OPS.stroke:this.stroke();break;case c.OPS.fillStroke:this.fillStroke();break;case c.OPS.eoFillStroke:this.eoFillStroke();break;case c.OPS.clip:this.clip("nonzero");break;case c.OPS.eoClip:this.clip("evenodd");break;case c.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case c.OPS.paintImageXObject:this.paintImageXObject(u[0]);break;case c.OPS.paintInlineImageXObject:this.paintInlineImageXObject(u[0]);break;case c.OPS.paintImageMaskXObject:this.paintImageMaskXObject(u[0]);break;case c.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(u[0],u[1]);break;case c.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case c.OPS.closePath:this.closePath();break;case c.OPS.closeStroke:this.closeStroke();break;case c.OPS.closeFillStroke:this.closeFillStroke();break;case c.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case c.OPS.nextLine:this.nextLine();break;case c.OPS.transform:this.transform(u[0],u[1],u[2],u[3],u[4],u[5]);break;case c.OPS.constructPath:this.constructPath(u[0],u[1]);break;case c.OPS.endPath:this.endPath();break;case 92:this.group(d.items);break;default:(0,c.warn)(`Unimplemented operator ${l}`);break}}}setWordSpacing(o){this.current.wordSpacing=o}setCharSpacing(o){this.current.charSpacing=o}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(o,d,l,h,u,I){const a=this.current;a.textMatrix=a.lineMatrix=[o,d,l,h,u,I],a.textMatrixScale=Math.hypot(o,d),a.x=a.lineX=0,a.y=a.lineY=0,a.xcoords=[],a.ycoords=[],a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${y(a.fontSize)}px`),a.tspan.setAttributeNS(null,"y",y(-a.y)),a.txtElement=this.svgFactory.createElement("svg:text"),a.txtElement.append(a.tspan)}beginText(){const o=this.current;o.x=o.lineX=0,o.y=o.lineY=0,o.textMatrix=c.IDENTITY_MATRIX,o.lineMatrix=c.IDENTITY_MATRIX,o.textMatrixScale=1,o.tspan=this.svgFactory.createElement("svg:tspan"),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtgrp=this.svgFactory.createElement("svg:g"),o.xcoords=[],o.ycoords=[]}moveText(o,d){const l=this.current;l.x=l.lineX+=o,l.y=l.lineY+=d,l.xcoords=[],l.ycoords=[],l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${y(l.fontSize)}px`),l.tspan.setAttributeNS(null,"y",y(-l.y))}showText(o){const d=this.current,l=d.font,h=d.fontSize;if(h===0)return;const u=d.fontSizeScale,I=d.charSpacing,a=d.wordSpacing,w=d.fontDirection,g=d.textHScale*w,z=l.vertical,V=z?1:-1,X=l.defaultVMetrics,W=h*d.fontMatrix[0];let Q=0;for(const Y of o){if(Y===null){Q+=w*a;continue}else if(typeof Y=="number"){Q+=V*Y*h/1e3;continue}const E=(Y.isSpace?a:0)+I,s=Y.fontChar;let i,p,M=Y.width;if(z){let N;const J=Y.vmetric||X;N=Y.vmetric?J[1]:M*.5,N=-N*W;const re=J[2]*W;M=J?-J[0]:M,i=N/u,p=(Q+re)/u}else i=Q/u,p=0;(Y.isInFont||l.missingFile)&&(d.xcoords.push(d.x+i),z&&d.ycoords.push(-d.y+p),d.tspan.textContent+=s);const L=z?M*W-E*w:M*W+E*w;Q+=L}d.tspan.setAttributeNS(null,"x",d.xcoords.map(y).join(" ")),z?d.tspan.setAttributeNS(null,"y",d.ycoords.map(y).join(" ")):d.tspan.setAttributeNS(null,"y",y(-d.y)),z?d.y-=Q:d.x+=Q*g,d.tspan.setAttributeNS(null,"font-family",d.fontFamily),d.tspan.setAttributeNS(null,"font-size",`${y(d.fontSize)}px`),d.fontStyle!==q.fontStyle&&d.tspan.setAttributeNS(null,"font-style",d.fontStyle),d.fontWeight!==q.fontWeight&&d.tspan.setAttributeNS(null,"font-weight",d.fontWeight);const T=d.textRenderingMode&c.TextRenderingMode.FILL_STROKE_MASK;if(T===c.TextRenderingMode.FILL||T===c.TextRenderingMode.FILL_STROKE?(d.fillColor!==q.fillColor&&d.tspan.setAttributeNS(null,"fill",d.fillColor),d.fillAlpha<1&&d.tspan.setAttributeNS(null,"fill-opacity",d.fillAlpha)):d.textRenderingMode===c.TextRenderingMode.ADD_TO_PATH?d.tspan.setAttributeNS(null,"fill","transparent"):d.tspan.setAttributeNS(null,"fill","none"),T===c.TextRenderingMode.STROKE||T===c.TextRenderingMode.FILL_STROKE){const Y=1/(d.textMatrixScale||1);this._setStrokeAttributes(d.tspan,Y)}let H=d.textMatrix;d.textRise!==0&&(H=H.slice(),H[5]+=d.textRise),d.txtElement.setAttributeNS(null,"transform",`${R(H)} scale(${y(g)}, -1)`),d.txtElement.setAttributeNS($,"xml:space","preserve"),d.txtElement.append(d.tspan),d.txtgrp.append(d.txtElement),this._ensureTransformGroup().append(d.txtElement)}setLeadingMoveText(o,d){this.setLeading(-d),this.moveText(o,d)}addFontStyle(o){if(!o.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const d=m(o.data,o.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${o.loadedName}"; src: url(${d}); }
`}setFont(o){const d=this.current,l=this.commonObjs.get(o[0]);let h=o[1];d.font=l,this.embedFonts&&!l.missingFile&&!this.embeddedFonts[l.loadedName]&&(this.addFontStyle(l),this.embeddedFonts[l.loadedName]=l),d.fontMatrix=l.fontMatrix||c.FONT_IDENTITY_MATRIX;let u="normal";l.black?u="900":l.bold&&(u="bold");const I=l.italic?"italic":"normal";h<0?(h=-h,d.fontDirection=-1):d.fontDirection=1,d.fontSize=h,d.fontFamily=l.loadedName,d.fontWeight=u,d.fontStyle=I,d.tspan=this.svgFactory.createElement("svg:tspan"),d.tspan.setAttributeNS(null,"y",y(-d.y)),d.xcoords=[],d.ycoords=[]}endText(){var d;const o=this.current;o.textRenderingMode&c.TextRenderingMode.ADD_TO_PATH_FLAG&&((d=o.txtElement)!=null&&d.hasChildNodes())&&(o.element=o.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(o){o>0&&(this.current.lineWidth=o)}setLineCap(o){this.current.lineCap=C[o]}setLineJoin(o){this.current.lineJoin=x[o]}setMiterLimit(o){this.current.miterLimit=o}setStrokeAlpha(o){this.current.strokeAlpha=o}setStrokeRGBColor(o,d,l){this.current.strokeColor=c.Util.makeHexColor(o,d,l)}setFillAlpha(o){this.current.fillAlpha=o}setFillRGBColor(o,d,l){this.current.fillColor=c.Util.makeHexColor(o,d,l),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(o){this.current.strokeColor=this._makeColorN_Pattern(o)}setFillColorN(o){this.current.fillColor=this._makeColorN_Pattern(o)}shadingFill(o){const{width:d,height:l}=this.viewport,h=c.Util.inverseTransform(this.transformMatrix),[u,I,a,w]=c.Util.getAxialAlignedBoundingBox([0,0,d,l],h),g=this.svgFactory.createElement("svg:rect");g.setAttributeNS(null,"x",u),g.setAttributeNS(null,"y",I),g.setAttributeNS(null,"width",a-u),g.setAttributeNS(null,"height",w-I),g.setAttributeNS(null,"fill",this._makeShadingPattern(o)),this.current.fillAlpha<1&&g.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(g)}_makeColorN_Pattern(o){return o[0]==="TilingPattern"?this._makeTilingPattern(o):this._makeShadingPattern(o)}_makeTilingPattern(o){const d=o[1],l=o[2],h=o[3]||c.IDENTITY_MATRIX,[u,I,a,w]=o[4],g=o[5],z=o[6],V=o[7],X=`shading${A++}`,[W,Q,T,H]=c.Util.normalizeRect([...c.Util.applyTransform([u,I],h),...c.Util.applyTransform([a,w],h)]),[Y,E]=c.Util.singularValueDecompose2dScale(h),s=g*Y,i=z*E,p=this.svgFactory.createElement("svg:pattern");p.setAttributeNS(null,"id",X),p.setAttributeNS(null,"patternUnits","userSpaceOnUse"),p.setAttributeNS(null,"width",s),p.setAttributeNS(null,"height",i),p.setAttributeNS(null,"x",`${W}`),p.setAttributeNS(null,"y",`${Q}`);const M=this.svg,L=this.transformMatrix,N=this.current.fillColor,J=this.current.strokeColor,re=this.svgFactory.create(T-W,H-Q);if(this.svg=re,this.transformMatrix=h,V===2){const de=c.Util.makeHexColor(...d);this.current.fillColor=de,this.current.strokeColor=de}return this.executeOpTree(this.convertOpList(l)),this.svg=M,this.transformMatrix=L,this.current.fillColor=N,this.current.strokeColor=J,p.append(re.childNodes[0]),this.defs.append(p),`url(#${X})`}_makeShadingPattern(o){switch(typeof o=="string"&&(o=this.objs.get(o)),o[0]){case"RadialAxial":const d=`shading${A++}`,l=o[3];let h;switch(o[1]){case"axial":const u=o[4],I=o[5];h=this.svgFactory.createElement("svg:linearGradient"),h.setAttributeNS(null,"id",d),h.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),h.setAttributeNS(null,"x1",u[0]),h.setAttributeNS(null,"y1",u[1]),h.setAttributeNS(null,"x2",I[0]),h.setAttributeNS(null,"y2",I[1]);break;case"radial":const a=o[4],w=o[5],g=o[6],z=o[7];h=this.svgFactory.createElement("svg:radialGradient"),h.setAttributeNS(null,"id",d),h.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),h.setAttributeNS(null,"cx",w[0]),h.setAttributeNS(null,"cy",w[1]),h.setAttributeNS(null,"r",z),h.setAttributeNS(null,"fx",a[0]),h.setAttributeNS(null,"fy",a[1]),h.setAttributeNS(null,"fr",g);break;default:throw new Error(`Unknown RadialAxial type: ${o[1]}`)}for(const u of l){const I=this.svgFactory.createElement("svg:stop");I.setAttributeNS(null,"offset",u[0]),I.setAttributeNS(null,"stop-color",u[1]),h.append(I)}return this.defs.append(h),`url(#${d})`;case"Mesh":return(0,c.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${o[0]}`)}}setDash(o,d){this.current.dashArray=o,this.current.dashPhase=d}constructPath(o,d){const l=this.current;let h=l.x,u=l.y,I=[],a=0;for(const w of o)switch(w|0){case c.OPS.rectangle:h=d[a++],u=d[a++];const g=d[a++],z=d[a++],V=h+g,X=u+z;I.push("M",y(h),y(u),"L",y(V),y(u),"L",y(V),y(X),"L",y(h),y(X),"Z");break;case c.OPS.moveTo:h=d[a++],u=d[a++],I.push("M",y(h),y(u));break;case c.OPS.lineTo:h=d[a++],u=d[a++],I.push("L",y(h),y(u));break;case c.OPS.curveTo:h=d[a+4],u=d[a+5],I.push("C",y(d[a]),y(d[a+1]),y(d[a+2]),y(d[a+3]),y(h),y(u)),a+=6;break;case c.OPS.curveTo2:I.push("C",y(h),y(u),y(d[a]),y(d[a+1]),y(d[a+2]),y(d[a+3])),h=d[a+2],u=d[a+3],a+=4;break;case c.OPS.curveTo3:h=d[a+2],u=d[a+3],I.push("C",y(d[a]),y(d[a+1]),y(h),y(u),y(h),y(u)),a+=4;break;case c.OPS.closePath:I.push("Z");break}I=I.join(" "),l.path&&o.length>0&&o[0]!==c.OPS.rectangle&&o[0]!==c.OPS.moveTo?I=l.path.getAttributeNS(null,"d")+I:(l.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(l.path)),l.path.setAttributeNS(null,"d",I),l.path.setAttributeNS(null,"fill","none"),l.element=l.path,l.setCurrentPoint(h,u)}endPath(){const o=this.current;if(o.path=null,!this.pendingClip)return;if(!o.element){this.pendingClip=null;return}const d=`clippath${b++}`,l=this.svgFactory.createElement("svg:clipPath");l.setAttributeNS(null,"id",d),l.setAttributeNS(null,"transform",R(this.transformMatrix));const h=o.element.cloneNode(!0);if(this.pendingClip==="evenodd"?h.setAttributeNS(null,"clip-rule","evenodd"):h.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,l.append(h),this.defs.append(l),o.activeClipUrl){o.clipGroup=null;for(const u of this.extraStack)u.clipGroup=null;l.setAttributeNS(null,"clip-path",o.activeClipUrl)}o.activeClipUrl=`url(#${d})`,this.tgrp=null}clip(o){this.pendingClip=o}closePath(){const o=this.current;if(o.path){const d=`${o.path.getAttributeNS(null,"d")}Z`;o.path.setAttributeNS(null,"d",d)}}setLeading(o){this.current.leading=-o}setTextRise(o){this.current.textRise=o}setTextRenderingMode(o){this.current.textRenderingMode=o}setHScale(o){this.current.textHScale=o/100}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(const[d,l]of o)switch(d){case"LW":this.setLineWidth(l);break;case"LC":this.setLineCap(l);break;case"LJ":this.setLineJoin(l);break;case"ML":this.setMiterLimit(l);break;case"D":this.setDash(l[0],l[1]);break;case"RI":this.setRenderingIntent(l);break;case"FL":this.setFlatness(l);break;case"Font":this.setFont(l);break;case"CA":this.setStrokeAlpha(l);break;case"ca":this.setFillAlpha(l);break;default:(0,c.warn)(`Unimplemented graphic state operator ${d}`);break}}fill(){const o=this.current;o.element&&(o.element.setAttributeNS(null,"fill",o.fillColor),o.element.setAttributeNS(null,"fill-opacity",o.fillAlpha),this.endPath())}stroke(){const o=this.current;o.element&&(this._setStrokeAttributes(o.element),o.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(o,d=1){const l=this.current;let h=l.dashArray;d!==1&&h.length>0&&(h=h.map(function(u){return d*u})),o.setAttributeNS(null,"stroke",l.strokeColor),o.setAttributeNS(null,"stroke-opacity",l.strokeAlpha),o.setAttributeNS(null,"stroke-miterlimit",y(l.miterLimit)),o.setAttributeNS(null,"stroke-linecap",l.lineCap),o.setAttributeNS(null,"stroke-linejoin",l.lineJoin),o.setAttributeNS(null,"stroke-width",y(d*l.lineWidth)+"px"),o.setAttributeNS(null,"stroke-dasharray",h.map(y).join(" ")),o.setAttributeNS(null,"stroke-dashoffset",y(d*l.dashPhase)+"px")}eoFill(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var o;(o=this.current.element)==null||o.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width","1px"),o.setAttributeNS(null,"height","1px"),o.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(o)}paintImageXObject(o){const d=this.getObject(o);if(!d){(0,c.warn)(`Dependent image with object ID ${o} is not ready yet`);return}this.paintInlineImageXObject(d)}paintInlineImageXObject(o,d){const l=o.width,h=o.height,u=j(o,this.forceDataSchema,!!d),I=this.svgFactory.createElement("svg:rect");I.setAttributeNS(null,"x","0"),I.setAttributeNS(null,"y","0"),I.setAttributeNS(null,"width",y(l)),I.setAttributeNS(null,"height",y(h)),this.current.element=I,this.clip("nonzero");const a=this.svgFactory.createElement("svg:image");a.setAttributeNS(he,"xlink:href",u),a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y",y(-h)),a.setAttributeNS(null,"width",y(l)+"px"),a.setAttributeNS(null,"height",y(h)+"px"),a.setAttributeNS(null,"transform",`scale(${y(1/l)} ${y(-1/h)})`),d?d.append(a):this._ensureTransformGroup().append(a)}paintImageMaskXObject(o){const d=this.getObject(o.data,o);if(d.bitmap){(0,c.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const l=this.current,h=d.width,u=d.height,I=l.fillColor;l.maskId=`mask${f++}`;const a=this.svgFactory.createElement("svg:mask");a.setAttributeNS(null,"id",l.maskId);const w=this.svgFactory.createElement("svg:rect");w.setAttributeNS(null,"x","0"),w.setAttributeNS(null,"y","0"),w.setAttributeNS(null,"width",y(h)),w.setAttributeNS(null,"height",y(u)),w.setAttributeNS(null,"fill",I),w.setAttributeNS(null,"mask",`url(#${l.maskId})`),this.defs.append(a),this._ensureTransformGroup().append(w),this.paintInlineImageXObject(d,a)}paintFormXObjectBegin(o,d){if(Array.isArray(o)&&o.length===6&&this.transform(o[0],o[1],o[2],o[3],o[4],o[5]),d){const l=d[2]-d[0],h=d[3]-d[1],u=this.svgFactory.createElement("svg:rect");u.setAttributeNS(null,"x",d[0]),u.setAttributeNS(null,"y",d[1]),u.setAttributeNS(null,"width",y(l)),u.setAttributeNS(null,"height",y(h)),this.current.element=u,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(o){const d=this.svgFactory.create(o.width,o.height),l=this.svgFactory.createElement("svg:defs");d.append(l),this.defs=l;const h=this.svgFactory.createElement("svg:g");return h.setAttributeNS(null,"transform",R(o.transform)),d.append(h),this.svg=h,d}_ensureClipGroup(){if(!this.current.clipGroup){const o=this.svgFactory.createElement("svg:g");o.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(o),this.current.clipGroup=o}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",R(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=O},(P,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class k{static textContent(c){const q=[],$={items:q,styles:Object.create(null)};function he(C){var j;if(!C)return;let x=null;const m=C.name;if(m==="#text")x=C.value;else if(k.shouldBuildText(m))(j=C==null?void 0:C.attributes)!=null&&j.textContent?x=C.attributes.textContent:C.value&&(x=C.value);else return;if(x!==null&&q.push({str:x}),!!C.children)for(const U of C.children)he(U)}return he(c),$}static shouldBuildText(c){return!(c==="textarea"||c==="input"||c==="option"||c==="select")}}t.XfaText=k},(P,t,k)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=R,t.updateTextLayer=b;var n=k(1),c=k(6);const q=1e5,$=30,he=.8,C=new Map;function x(f,A){let O;if(A&&n.FeatureTest.isOffscreenCanvasSupported)O=new OffscreenCanvas(f,f).getContext("2d",{alpha:!1});else{const _=document.createElement("canvas");_.width=_.height=f,O=_.getContext("2d",{alpha:!1})}return O}function m(f,A){const O=C.get(f);if(O)return O;const _=x($,A);_.font=`${$}px ${f}`;const o=_.measureText("");let d=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);if(d){const u=d/(d+l);return C.set(f,u),_.canvas.width=_.canvas.height=0,u}_.strokeStyle="red",_.clearRect(0,0,$,$),_.strokeText("g",0,0);let h=_.getImageData(0,0,$,$).data;l=0;for(let u=h.length-1-3;u>=0;u-=4)if(h[u]>0){l=Math.ceil(u/4/$);break}_.clearRect(0,0,$,$),_.strokeText("A",0,$),h=_.getImageData(0,0,$,$).data,d=0;for(let u=0,I=h.length;u<I;u+=4)if(h[u]>0){d=$-Math.floor(u/4/$);break}if(_.canvas.width=_.canvas.height=0,d){const u=d/(d+l);return C.set(f,u),u}return C.set(f,he),he}function j(f,A,O){const _=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:A.str!=="",hasEOL:A.hasEOL,fontSize:0};f._textDivs.push(_);const d=n.Util.transform(f._transform,A.transform);let l=Math.atan2(d[1],d[0]);const h=O[A.fontName];h.vertical&&(l+=Math.PI/2);const u=Math.hypot(d[2],d[3]),I=u*m(h.fontFamily,f._isOffscreenCanvasSupported);let a,w;l===0?(a=d[4],w=d[5]-I):(a=d[4]+I*Math.sin(l),w=d[5]-I*Math.cos(l));const g="calc(var(--scale-factor)*",z=_.style;f._container===f._rootContainer?(z.left=`${(100*a/f._pageWidth).toFixed(2)}%`,z.top=`${(100*w/f._pageHeight).toFixed(2)}%`):(z.left=`${g}${a.toFixed(2)}px)`,z.top=`${g}${w.toFixed(2)}px)`),z.fontSize=`${g}${u.toFixed(2)}px)`,z.fontFamily=h.fontFamily,o.fontSize=u,_.setAttribute("role","presentation"),_.textContent=A.str,_.dir=A.dir,f._fontInspectorEnabled&&(_.dataset.fontName=A.fontName),l!==0&&(o.angle=l*(180/Math.PI));let V=!1;if(A.str.length>1)V=!0;else if(A.str!==" "&&A.transform[0]!==A.transform[3]){const X=Math.abs(A.transform[0]),W=Math.abs(A.transform[3]);X!==W&&Math.max(X,W)/Math.min(X,W)>1.5&&(V=!0)}V&&(o.canvasWidth=h.vertical?A.height:A.width),f._textDivProperties.set(_,o),f._isReadableStream&&f._layoutText(_)}function U(f){const{div:A,scale:O,properties:_,ctx:o,prevFontSize:d,prevFontFamily:l}=f,{style:h}=A;let u="";if(_.canvasWidth!==0&&_.hasText){const{fontFamily:I}=h,{canvasWidth:a,fontSize:w}=_;(d!==w||l!==I)&&(o.font=`${w*O}px ${I}`,f.prevFontSize=w,f.prevFontFamily=I);const{width:g}=o.measureText(A.textContent);g>0&&(u=`scaleX(${a*O/g})`)}_.angle!==0&&(u=`rotate(${_.angle}deg) ${u}`),u.length>0&&(h.transform=u)}function v(f){if(f._canceled)return;const A=f._textDivs,O=f._capability;if(A.length>q){O.resolve();return}if(!f._isReadableStream)for(const o of A)f._layoutText(o);O.resolve()}class y{constructor({textContentSource:A,container:O,viewport:_,textDivs:o,textDivProperties:d,textContentItemsStr:l,isOffscreenCanvasSupported:h}){var g;this._textContentSource=A,this._isReadableStream=A instanceof ReadableStream,this._container=this._rootContainer=O,this._textDivs=o||[],this._textContentItemsStr=l||[],this._isOffscreenCanvasSupported=h,this._fontInspectorEnabled=!!((g=globalThis.FontInspector)!=null&&g.enabled),this._reader=null,this._textDivProperties=d||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:_.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:x(0,h)};const{pageWidth:u,pageHeight:I,pageX:a,pageY:w}=_.rawDims;this._transform=[1,0,0,-1,-a,w+I],this._pageWidth=u,this._pageHeight=I,(0,c.setLayerDimensions)(O,_),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(A,O){for(const _ of A){if(_.str===void 0){if(_.type==="beginMarkedContentProps"||_.type==="beginMarkedContent"){const o=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),_.id!==null&&this._container.setAttribute("id",`${_.id}`),o.append(this._container)}else _.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(_.str),j(this,_,O)}}_layoutText(A){const O=this._layoutTextParams.properties=this._textDivProperties.get(A);if(this._layoutTextParams.div=A,U(this._layoutTextParams),O.hasText&&this._container.append(A),O.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),this._container.append(_)}}_render(){const A=new n.PromiseCapability;let O=Object.create(null);if(this._isReadableStream){const _=()=>{this._reader.read().then(({value:o,done:d})=>{if(d){A.resolve();return}Object.assign(O,o.styles),this._processItems(o.items,O),_()},A.reject)};this._reader=this._textContentSource.getReader(),_()}else if(this._textContentSource){const{items:_,styles:o}=this._textContentSource;this._processItems(_,o),A.resolve()}else throw new Error('No "textContentSource" parameter specified.');A.promise.then(()=>{O=null,v(this)},this._capability.reject)}}t.TextLayerRenderTask=y;function R(f){!f.textContentSource&&(f.textContent||f.textContentStream)&&((0,c.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),f.textContentSource=f.textContent||f.textContentStream);const{container:A,viewport:O}=f,_=getComputedStyle(A),o=_.getPropertyValue("visibility"),d=parseFloat(_.getPropertyValue("--scale-factor"));o==="visible"&&(!d||Math.abs(d-O.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const l=new y(f);return l._render(),l}function b({container:f,viewport:A,textDivs:O,textDivProperties:_,isOffscreenCanvasSupported:o,mustRotate:d=!0,mustRescale:l=!0}){if(d&&(0,c.setLayerDimensions)(f,{rotation:A.rotation}),l){const h=x(0,o),I={prevFontSize:null,prevFontFamily:null,div:null,scale:A.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:h};for(const a of O)I.properties=_.get(a),I.div=a,U(I)}}},(P,t,k)=>{var m,j,U,v,y,R,b,f,A,O,_,Jt,wt,Qt,Zt;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var n=k(1),c=k(4),q=k(28),$=k(33),he=k(6),C=k(34);const u=class u{constructor({uiManager:a,pageIndex:w,div:g,accessibilityManager:z,annotationLayer:V,viewport:X,l10n:W}){oe(this,_);oe(this,m);oe(this,j,!1);oe(this,U,null);oe(this,v,this.pointerup.bind(this));oe(this,y,this.pointerdown.bind(this));oe(this,R,new Map);oe(this,b,!1);oe(this,f,!1);oe(this,A,!1);oe(this,O);const Q=[q.FreeTextEditor,$.InkEditor,C.StampEditor];if(!u._initialized){u._initialized=!0;for(const T of Q)T.initialize(W)}a.registerEditorTypes(Q),ce(this,O,a),this.pageIndex=w,this.div=g,ce(this,m,z),ce(this,U,V),this.viewport=X,e(this,O).addLayer(this)}get isEmpty(){return e(this,R).size===0}updateToolbar(a){e(this,O).updateToolbar(a)}updateMode(a=e(this,O).getMode()){ee(this,_,Zt).call(this),a===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),a!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",a===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",a===n.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",a===n.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(a){if(!a&&e(this,O).getMode()!==n.AnnotationEditorType.INK)return;if(!a){for(const g of e(this,R).values())if(g.isEmpty()){g.setInBackground();return}}ee(this,_,wt).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(a){e(this,O).setEditingState(a)}addCommands(a){e(this,O).addCommands(a)}enable(){this.div.style.pointerEvents="auto";const a=new Set;for(const g of e(this,R).values())g.enableEditing(),g.annotationElementId&&a.add(g.annotationElementId);if(!e(this,U))return;const w=e(this,U).getEditableAnnotations();for(const g of w){if(g.hide(),e(this,O).isDeletedAnnotationElement(g.data.id)||a.has(g.data.id))continue;const z=this.deserialize(g);z&&(this.addOrRebuild(z),z.enableEditing())}}disable(){var w;ce(this,A,!0),this.div.style.pointerEvents="none";const a=new Set;for(const g of e(this,R).values()){if(g.disableEditing(),!g.annotationElementId||g.serialize()!==null){a.add(g.annotationElementId);continue}(w=this.getEditableAnnotation(g.annotationElementId))==null||w.show(),g.remove()}if(e(this,U)){const g=e(this,U).getEditableAnnotations();for(const z of g){const{id:V}=z.data;a.has(V)||e(this,O).isDeletedAnnotationElement(V)||z.show()}}ee(this,_,Zt).call(this),this.isEmpty&&(this.div.hidden=!0),ce(this,A,!1)}getEditableAnnotation(a){var w;return((w=e(this,U))==null?void 0:w.getEditableAnnotation(a))||null}setActiveEditor(a){e(this,O).getActive()!==a&&e(this,O).setActiveEditor(a)}enableClick(){this.div.addEventListener("pointerdown",e(this,y)),this.div.addEventListener("pointerup",e(this,v))}disableClick(){this.div.removeEventListener("pointerdown",e(this,y)),this.div.removeEventListener("pointerup",e(this,v))}attach(a){e(this,R).set(a.id,a);const{annotationElementId:w}=a;w&&e(this,O).isDeletedAnnotationElement(w)&&e(this,O).removeDeletedAnnotationElement(a)}detach(a){var w;e(this,R).delete(a.id),(w=e(this,m))==null||w.removePointerInTextLayer(a.contentDiv),!e(this,A)&&a.annotationElementId&&e(this,O).addDeletedAnnotationElement(a)}remove(a){this.detach(a),e(this,O).removeEditor(a),a.div.contains(document.activeElement)&&setTimeout(()=>{e(this,O).focusMainContainer()},0),a.div.remove(),a.isAttachedToDOM=!1,e(this,f)||this.addInkEditorIfNeeded(!1)}changeParent(a){var w;a.parent!==this&&(a.annotationElementId&&(e(this,O).addDeletedAnnotationElement(a.annotationElementId),c.AnnotationEditor.deleteAnnotationElement(a),a.annotationElementId=null),this.attach(a),(w=a.parent)==null||w.detach(a),a.setParent(this),a.div&&a.isAttachedToDOM&&(a.div.remove(),this.div.append(a.div)))}add(a){if(this.changeParent(a),e(this,O).addEditor(a),this.attach(a),!a.isAttachedToDOM){const w=a.render();this.div.append(w),a.isAttachedToDOM=!0}a.fixAndSetPosition(),a.onceAdded(),e(this,O).addToAnnotationStorage(a)}moveEditorInDOM(a){var g;if(!a.isAttachedToDOM)return;const{activeElement:w}=document;a.div.contains(w)&&(a._focusEventsAllowed=!1,setTimeout(()=>{a.div.contains(document.activeElement)?a._focusEventsAllowed=!0:(a.div.addEventListener("focusin",()=>{a._focusEventsAllowed=!0},{once:!0}),w.focus())},0)),a._structTreeParentId=(g=e(this,m))==null?void 0:g.moveElementInDOM(this.div,a.div,a.contentDiv,!0)}addOrRebuild(a){a.needsToBeRebuilt()?a.rebuild():this.add(a)}addUndoableEditor(a){const w=()=>a._uiManager.rebuild(a),g=()=>{a.remove()};this.addCommands({cmd:w,undo:g,mustExec:!1})}getNextId(){return e(this,O).getId()}pasteEditor(a,w){e(this,O).updateToolbar(a),e(this,O).updateMode(a);const{offsetX:g,offsetY:z}=ee(this,_,Qt).call(this),V=this.getNextId(),X=ee(this,_,Jt).call(this,{parent:this,id:V,x:g,y:z,uiManager:e(this,O),isCentered:!0,...w});X&&this.add(X)}deserialize(a){switch(a.annotationType??a.annotationEditorType){case n.AnnotationEditorType.FREETEXT:return q.FreeTextEditor.deserialize(a,this,e(this,O));case n.AnnotationEditorType.INK:return $.InkEditor.deserialize(a,this,e(this,O));case n.AnnotationEditorType.STAMP:return C.StampEditor.deserialize(a,this,e(this,O))}return null}addNewEditor(){ee(this,_,wt).call(this,ee(this,_,Qt).call(this),!0)}setSelected(a){e(this,O).setSelected(a)}toggleSelected(a){e(this,O).toggleSelected(a)}isSelected(a){return e(this,O).isSelected(a)}unselect(a){e(this,O).unselect(a)}pointerup(a){const{isMac:w}=n.FeatureTest.platform;if(!(a.button!==0||a.ctrlKey&&w)&&a.target===this.div&&e(this,b)){if(ce(this,b,!1),!e(this,j)){ce(this,j,!0);return}if(e(this,O).getMode()===n.AnnotationEditorType.STAMP){e(this,O).unselectAll();return}ee(this,_,wt).call(this,a,!1)}}pointerdown(a){if(e(this,b)){ce(this,b,!1);return}const{isMac:w}=n.FeatureTest.platform;if(a.button!==0||a.ctrlKey&&w||a.target!==this.div)return;ce(this,b,!0);const g=e(this,O).getActive();ce(this,j,!g||g.isEmpty())}findNewParent(a,w,g){const z=e(this,O).findParent(w,g);return z===null||z===this?!1:(z.changeParent(a),!0)}destroy(){var a,w;((a=e(this,O).getActive())==null?void 0:a.parent)===this&&(e(this,O).commitOrRemove(),e(this,O).setActiveEditor(null));for(const g of e(this,R).values())(w=e(this,m))==null||w.removePointerInTextLayer(g.contentDiv),g.setParent(null),g.isAttachedToDOM=!1,g.div.remove();this.div=null,e(this,R).clear(),e(this,O).removeLayer(this)}render({viewport:a}){this.viewport=a,(0,he.setLayerDimensions)(this.div,a);for(const w of e(this,O).getEditors(this.pageIndex))this.add(w);this.updateMode()}update({viewport:a}){e(this,O).commitOrRemove(),this.viewport=a,(0,he.setLayerDimensions)(this.div,{rotation:a.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:a,pageHeight:w}=this.viewport.rawDims;return[a,w]}};m=new WeakMap,j=new WeakMap,U=new WeakMap,v=new WeakMap,y=new WeakMap,R=new WeakMap,b=new WeakMap,f=new WeakMap,A=new WeakMap,O=new WeakMap,_=new WeakSet,Jt=function(a){switch(e(this,O).getMode()){case n.AnnotationEditorType.FREETEXT:return new q.FreeTextEditor(a);case n.AnnotationEditorType.INK:return new $.InkEditor(a);case n.AnnotationEditorType.STAMP:return new C.StampEditor(a)}return null},wt=function(a,w){const g=this.getNextId(),z=ee(this,_,Jt).call(this,{parent:this,id:g,x:a.offsetX,y:a.offsetY,uiManager:e(this,O),isCentered:w});return z&&this.add(z),z},Qt=function(){const{x:a,y:w,width:g,height:z}=this.div.getBoundingClientRect(),V=Math.max(0,a),X=Math.max(0,w),W=Math.min(window.innerWidth,a+g),Q=Math.min(window.innerHeight,w+z),T=(V+W)/2-a,H=(X+Q)/2-w,[Y,E]=this.viewport.rotation%180===0?[T,H]:[H,T];return{offsetX:Y,offsetY:E}},Zt=function(){ce(this,f,!0);for(const a of e(this,R).values())a.isEmpty()&&a.remove();ce(this,f,!1)},Je(u,"_initialized",!1);let x=u;t.AnnotationEditorLayer=x},(P,t,k)=>{var C,x,m,j,U,v,y,R,b,f,Cn,Rn,kn,mt,en,Fn,tn;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var n=k(1),c=k(5),q=k(4),$=k(29);const u=class u extends q.AnnotationEditor{constructor(w){super({...w,name:"freeTextEditor"});oe(this,f);oe(this,C,this.editorDivBlur.bind(this));oe(this,x,this.editorDivFocus.bind(this));oe(this,m,this.editorDivInput.bind(this));oe(this,j,this.editorDivKeydown.bind(this));oe(this,U);oe(this,v,"");oe(this,y,`${this.id}-editor`);oe(this,R);oe(this,b,null);ce(this,U,w.color||u._defaultColor||q.AnnotationEditor._defaultLineColor),ce(this,R,w.fontSize||u._defaultFontSize)}static get _keyboardManager(){const w=u.prototype,g=X=>X.isEmpty(),z=c.AnnotationEditorUIManager.TRANSLATE_SMALL,V=c.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,n.shadow)(this,"_keyboardManager",new c.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],w.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],w.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],w._translateEmpty,{args:[-z,0],checker:g}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],w._translateEmpty,{args:[-V,0],checker:g}],[["ArrowRight","mac+ArrowRight"],w._translateEmpty,{args:[z,0],checker:g}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],w._translateEmpty,{args:[V,0],checker:g}],[["ArrowUp","mac+ArrowUp"],w._translateEmpty,{args:[0,-z],checker:g}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],w._translateEmpty,{args:[0,-V],checker:g}],[["ArrowDown","mac+ArrowDown"],w._translateEmpty,{args:[0,z],checker:g}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],w._translateEmpty,{args:[0,V],checker:g}]]))}static initialize(w){q.AnnotationEditor.initialize(w,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const g=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(g.getPropertyValue("--freetext-padding"))}static updateDefaultParams(w,g){switch(w){case n.AnnotationEditorParamsType.FREETEXT_SIZE:u._defaultFontSize=g;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:u._defaultColor=g;break}}updateParams(w,g){switch(w){case n.AnnotationEditorParamsType.FREETEXT_SIZE:ee(this,f,Cn).call(this,g);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:ee(this,f,Rn).call(this,g);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,u._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,u._defaultColor||q.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,e(this,R)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,e(this,U)]]}_translateEmpty(w,g){this._uiManager.translateSelectedEditors(w,g,!0)}getInitialTranslation(){const w=this.parentScale;return[-u._internalPadding*w,-(u._internalPadding+e(this,R))*w]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",e(this,j)),this.editorDiv.addEventListener("focus",e(this,x)),this.editorDiv.addEventListener("blur",e(this,C)),this.editorDiv.addEventListener("input",e(this,m)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",e(this,y)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",e(this,j)),this.editorDiv.removeEventListener("focus",e(this,x)),this.editorDiv.removeEventListener("blur",e(this,C)),this.editorDiv.removeEventListener("input",e(this,m)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(w){this._focusEventsAllowed&&(super.focusin(w),w.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var w;if(this.width){ee(this,f,tn).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(w=this._initialOptions)!=null&&w.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const w=e(this,v),g=ce(this,v,ee(this,f,kn).call(this).trimEnd());if(w===g)return;const z=V=>{if(ce(this,v,V),!V){this.remove();return}ee(this,f,en).call(this),this._uiManager.rebuild(this),ee(this,f,mt).call(this)};this.addCommands({cmd:()=>{z(g)},undo:()=>{z(w)},mustExec:!1}),ee(this,f,mt).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(w){this.enterInEditMode()}keydown(w){w.target===this.div&&w.key==="Enter"&&(this.enterInEditMode(),w.preventDefault())}editorDivKeydown(w){u._keyboardManager.exec(this,w)}editorDivFocus(w){this.isEditing=!0}editorDivBlur(w){this.isEditing=!1}editorDivInput(w){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let w,g;this.width&&(w=this.x,g=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",e(this,y)),this.enableEditing(),q.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(V=>{var X;return(X=this.editorDiv)==null?void 0:X.setAttribute("aria-label",V)}),q.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(V=>{var X;return(X=this.editorDiv)==null?void 0:X.setAttribute("default-content",V)}),this.editorDiv.contentEditable=!0;const{style:z}=this.editorDiv;if(z.fontSize=`calc(${e(this,R)}px * var(--scale-factor))`,z.color=e(this,U),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,c.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[V,X]=this.parentDimensions;if(this.annotationElementId){const{position:W}=e(this,b);let[Q,T]=this.getInitialTranslation();[Q,T]=this.pageTranslationToScreen(Q,T);const[H,Y]=this.pageDimensions,[E,s]=this.pageTranslation;let i,p;switch(this.rotation){case 0:i=w+(W[0]-E)/H,p=g+this.height-(W[1]-s)/Y;break;case 90:i=w+(W[0]-E)/H,p=g-(W[1]-s)/Y,[Q,T]=[T,-Q];break;case 180:i=w-this.width+(W[0]-E)/H,p=g-(W[1]-s)/Y,[Q,T]=[-Q,-T];break;case 270:i=w+(W[0]-E-this.height*Y)/H,p=g+(W[1]-s-this.width*H)/Y,[Q,T]=[-T,Q];break}this.setAt(i*V,p*X,Q,T)}else this.setAt(w*V,g*X,this.width*V,this.height*X);ee(this,f,en).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(w,g,z){let V=null;if(w instanceof $.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:W,fontColor:Q},rect:T,rotation:H,id:Y},textContent:E,textPosition:s,parent:{page:{pageNumber:i}}}=w;if(!E||E.length===0)return null;V=w={annotationType:n.AnnotationEditorType.FREETEXT,color:Array.from(Q),fontSize:W,value:E.join(`
`),position:s,pageIndex:i-1,rect:T,rotation:H,id:Y,deleted:!1}}const X=super.deserialize(w,g,z);return ce(X,R,w.fontSize),ce(X,U,n.Util.makeHexColor(...w.color)),ce(X,v,w.value),X.annotationElementId=w.id||null,ce(X,b,V),X}serialize(w=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const g=u._internalPadding*this.parentScale,z=this.getRect(g,g),V=q.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:e(this,U)),X={annotationType:n.AnnotationEditorType.FREETEXT,color:V,fontSize:e(this,R),value:e(this,v),pageIndex:this.pageIndex,rect:z,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return w?X:this.annotationElementId&&!ee(this,f,Fn).call(this,X)?null:(X.id=this.annotationElementId,X)}};C=new WeakMap,x=new WeakMap,m=new WeakMap,j=new WeakMap,U=new WeakMap,v=new WeakMap,y=new WeakMap,R=new WeakMap,b=new WeakMap,f=new WeakSet,Cn=function(w){const g=V=>{this.editorDiv.style.fontSize=`calc(${V}px * var(--scale-factor))`,this.translate(0,-(V-e(this,R))*this.parentScale),ce(this,R,V),ee(this,f,mt).call(this)},z=e(this,R);this.addCommands({cmd:()=>{g(w)},undo:()=>{g(z)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Rn=function(w){const g=e(this,U);this.addCommands({cmd:()=>{ce(this,U,this.editorDiv.style.color=w)},undo:()=>{ce(this,U,this.editorDiv.style.color=g)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},kn=function(){const w=this.editorDiv.getElementsByTagName("div");if(w.length===0)return this.editorDiv.innerText;const g=[];for(const z of w)g.push(z.innerText.replace(/\r\n?|\n/,""));return g.join(`
`)},mt=function(){const[w,g]=this.parentDimensions;let z;if(this.isAttachedToDOM)z=this.div.getBoundingClientRect();else{const{currentLayer:V,div:X}=this,W=X.style.display;X.style.display="hidden",V.div.append(this.div),z=X.getBoundingClientRect(),X.remove(),X.style.display=W}this.rotation%180===this.parentRotation%180?(this.width=z.width/w,this.height=z.height/g):(this.width=z.height/w,this.height=z.width/g),this.fixAndSetPosition()},en=function(){if(this.editorDiv.replaceChildren(),!!e(this,v))for(const w of e(this,v).split(`
`)){const g=document.createElement("div");g.append(w?document.createTextNode(w):document.createElement("br")),this.editorDiv.append(g)}},Fn=function(w){const{value:g,fontSize:z,color:V,rect:X,pageIndex:W}=e(this,b);return w.value!==g||w.fontSize!==z||w.rect.some((Q,T)=>Math.abs(Q-X[T])>=1)||w.color.some((Q,T)=>Q!==V[T])||w.pageIndex!==W},tn=function(w=!1){if(!this.annotationElementId)return;if(ee(this,f,mt).call(this),!w&&(this.width===0||this.height===0)){setTimeout(()=>ee(this,f,tn).call(this,!0),0);return}const g=u._internalPadding*this.parentScale;e(this,b).rect=this.getRect(g,g)},Je(u,"_freeTextDefaultContent",""),Je(u,"_internalPadding",0),Je(u,"_defaultColor",null),Je(u,"_defaultFontSize",10),Je(u,"_type","freetext");let he=u;t.FreeTextEditor=he},(P,t,k)=>{var p,L,rt,Mn,re,de,te,ye,me,_e,ne,se,S,B,Z,ae,ge,Se,Ae,ie,Pe,we,Dn,Pt,nn,sn,Ie,He,Xe,Ee,le,ue,ke,rn,Ve,G,be,xe,On,an;Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var n=k(1),c=k(6),q=k(3),$=k(30),he=k(31),C=k(32);const x=1e3,m=9,j=new WeakSet;function U(Re){return{width:Re[2]-Re[0],height:Re[3]-Re[1]}}class v{static create(D){switch(D.data.annotationType){case n.AnnotationType.LINK:return new R(D);case n.AnnotationType.TEXT:return new b(D);case n.AnnotationType.WIDGET:switch(D.data.fieldType){case"Tx":return new A(D);case"Btn":return D.data.radioButton?new o(D):D.data.checkBox?new _(D):new d(D);case"Ch":return new l(D);case"Sig":return new O(D)}return new f(D);case n.AnnotationType.POPUP:return new h(D);case n.AnnotationType.FREETEXT:return new I(D);case n.AnnotationType.LINE:return new a(D);case n.AnnotationType.SQUARE:return new w(D);case n.AnnotationType.CIRCLE:return new g(D);case n.AnnotationType.POLYLINE:return new z(D);case n.AnnotationType.CARET:return new X(D);case n.AnnotationType.INK:return new W(D);case n.AnnotationType.POLYGON:return new V(D);case n.AnnotationType.HIGHLIGHT:return new Q(D);case n.AnnotationType.UNDERLINE:return new T(D);case n.AnnotationType.SQUIGGLY:return new H(D);case n.AnnotationType.STRIKEOUT:return new Y(D);case n.AnnotationType.STAMP:return new E(D);case n.AnnotationType.FILEATTACHMENT:return new s(D);default:return new y(D)}}}const M=class M{constructor(D,{isRenderable:F=!1,ignoreBorder:K=!1,createQuadrilaterals:fe=!1}={}){oe(this,p,!1);this.isRenderable=F,this.data=D.data,this.layer=D.layer,this.linkService=D.linkService,this.downloadManager=D.downloadManager,this.imageResourcesPath=D.imageResourcesPath,this.renderForms=D.renderForms,this.svgFactory=D.svgFactory,this.annotationStorage=D.annotationStorage,this.enableScripting=D.enableScripting,this.hasJSActions=D.hasJSActions,this._fieldObjects=D.fieldObjects,this.parent=D.parent,F&&(this.container=this._createContainer(K)),fe&&this._createQuadrilaterals()}static _hasPopupData({titleObj:D,contentsObj:F,richText:K}){return!!(D!=null&&D.str||F!=null&&F.str||K!=null&&K.str)}get hasPopupData(){return M._hasPopupData(this.data)}_createContainer(D){const{data:F,parent:{page:K,viewport:fe}}=this,pe=document.createElement("section");pe.setAttribute("data-annotation-id",F.id),this instanceof f||(pe.tabIndex=x),pe.style.zIndex=this.parent.zIndex++,this.data.popupRef&&pe.setAttribute("aria-haspopup","dialog"),F.noRotate&&pe.classList.add("norotate");const{pageWidth:ve,pageHeight:Te,pageX:Le,pageY:Me}=fe.rawDims;if(!F.rect||this instanceof h){const{rotation:Be}=F;return!F.hasOwnCanvas&&Be!==0&&this.setRotation(Be,pe),pe}const{width:Ce,height:$e}=U(F.rect),De=n.Util.normalizeRect([F.rect[0],K.view[3]-F.rect[1]+K.view[1],F.rect[2],K.view[3]-F.rect[3]+K.view[1]]);if(!D&&F.borderStyle.width>0){pe.style.borderWidth=`${F.borderStyle.width}px`;const Be=F.borderStyle.horizontalCornerRadius,Ge=F.borderStyle.verticalCornerRadius;if(Be>0||Ge>0){const Ke=`calc(${Be}px * var(--scale-factor)) / calc(${Ge}px * var(--scale-factor))`;pe.style.borderRadius=Ke}else if(this instanceof o){const Ke=`calc(${Ce}px * var(--scale-factor)) / calc(${$e}px * var(--scale-factor))`;pe.style.borderRadius=Ke}switch(F.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:pe.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:pe.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:pe.style.borderBottomStyle="solid";break}const Ye=F.borderColor||null;Ye?(ce(this,p,!0),pe.style.borderColor=n.Util.makeHexColor(Ye[0]|0,Ye[1]|0,Ye[2]|0)):pe.style.borderWidth=0}pe.style.left=`${100*(De[0]-Le)/ve}%`,pe.style.top=`${100*(De[1]-Me)/Te}%`;const{rotation:Ne}=F;return F.hasOwnCanvas||Ne===0?(pe.style.width=`${100*Ce/ve}%`,pe.style.height=`${100*$e/Te}%`):this.setRotation(Ne,pe),pe}setRotation(D,F=this.container){if(!this.data.rect)return;const{pageWidth:K,pageHeight:fe}=this.parent.viewport.rawDims,{width:pe,height:ve}=U(this.data.rect);let Te,Le;D%180===0?(Te=100*pe/K,Le=100*ve/fe):(Te=100*ve/K,Le=100*pe/fe),F.style.width=`${Te}%`,F.style.height=`${Le}%`,F.setAttribute("data-main-rotation",(360-D)%360)}get _commonActions(){const D=(F,K,fe)=>{const pe=fe.detail[F],ve=pe[0],Te=pe.slice(1);fe.target.style[K]=$.ColorConverters[`${ve}_HTML`](Te),this.annotationStorage.setValue(this.data.id,{[K]:$.ColorConverters[`${ve}_rgb`](Te)})};return(0,n.shadow)(this,"_commonActions",{display:F=>{const{display:K}=F.detail,fe=K%2===1;this.container.style.visibility=fe?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:fe,noPrint:K===1||K===2})},print:F=>{this.annotationStorage.setValue(this.data.id,{noPrint:!F.detail.print})},hidden:F=>{const{hidden:K}=F.detail;this.container.style.visibility=K?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:K,noView:K})},focus:F=>{setTimeout(()=>F.target.focus({preventScroll:!1}),0)},userName:F=>{F.target.title=F.detail.userName},readonly:F=>{F.target.disabled=F.detail.readonly},required:F=>{this._setRequired(F.target,F.detail.required)},bgColor:F=>{D("bgColor","backgroundColor",F)},fillColor:F=>{D("fillColor","backgroundColor",F)},fgColor:F=>{D("fgColor","color",F)},textColor:F=>{D("textColor","color",F)},borderColor:F=>{D("borderColor","borderColor",F)},strokeColor:F=>{D("strokeColor","borderColor",F)},rotation:F=>{const K=F.detail.rotation;this.setRotation(K),this.annotationStorage.setValue(this.data.id,{rotation:K})}})}_dispatchEventFromSandbox(D,F){const K=this._commonActions;for(const fe of Object.keys(F.detail)){const pe=D[fe]||K[fe];pe==null||pe(F)}}_setDefaultPropertiesFromJS(D){if(!this.enableScripting)return;const F=this.annotationStorage.getRawValue(this.data.id);if(!F)return;const K=this._commonActions;for(const[fe,pe]of Object.entries(F)){const ve=K[fe];if(ve){const Te={detail:{[fe]:pe},target:D};ve(Te),delete F[fe]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:D}=this.data;if(!D)return;const[F,K,fe,pe]=this.data.rect;if(D.length===1){const[,{x:Ge,y:Ye},{x:Ke,y:Ze}]=D[0];if(fe===Ge&&pe===Ye&&F===Ke&&K===Ze)return}const{style:ve}=this.container;let Te;if(e(this,p)){const{borderColor:Ge,borderWidth:Ye}=ve;ve.borderWidth=0,Te=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ge}" stroke-width="${Ye}">`],this.container.classList.add("hasBorder")}const Le=fe-F,Me=pe-K,{svgFactory:Ce}=this,$e=Ce.createElement("svg");$e.classList.add("quadrilateralsContainer"),$e.setAttribute("width",0),$e.setAttribute("height",0);const De=Ce.createElement("defs");$e.append(De);const Ne=Ce.createElement("clipPath"),Be=`clippath_${this.data.id}`;Ne.setAttribute("id",Be),Ne.setAttribute("clipPathUnits","objectBoundingBox"),De.append(Ne);for(const[,{x:Ge,y:Ye},{x:Ke,y:Ze}]of D){const Qe=Ce.createElement("rect"),tt=(Ke-F)/Le,st=(pe-Ye)/Me,it=(Ge-Ke)/Le,gn=(Ye-Ze)/Me;Qe.setAttribute("x",tt),Qe.setAttribute("y",st),Qe.setAttribute("width",it),Qe.setAttribute("height",gn),Ne.append(Qe),Te==null||Te.push(`<rect vector-effect="non-scaling-stroke" x="${tt}" y="${st}" width="${it}" height="${gn}"/>`)}e(this,p)&&(Te.push("</g></svg>')"),ve.backgroundImage=Te.join("")),this.container.append($e),this.container.style.clipPath=`url(#${Be})`}_createPopup(){const{container:D,data:F}=this;D.setAttribute("aria-haspopup","dialog");const K=new h({data:{color:F.color,titleObj:F.titleObj,modificationDate:F.modificationDate,contentsObj:F.contentsObj,richText:F.richText,parentRect:F.rect,borderStyle:0,id:`popup_${F.id}`,rotation:F.rotation},parent:this.parent,elements:[this]});this.parent.div.append(K.render())}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(D,F=null){const K=[];if(this._fieldObjects){const fe=this._fieldObjects[D];if(fe)for(const{page:pe,id:ve,exportValues:Te}of fe){if(pe===-1||ve===F)continue;const Le=typeof Te=="string"?Te:null,Me=document.querySelector(`[data-element-id="${ve}"]`);if(Me&&!j.has(Me)){(0,n.warn)(`_getElementsByName - element not allowed: ${ve}`);continue}K.push({id:ve,exportValue:Le,domElement:Me})}return K}for(const fe of document.getElementsByName(D)){const{exportValue:pe}=fe,ve=fe.getAttribute("data-element-id");ve!==F&&j.has(fe)&&K.push({id:ve,exportValue:pe,domElement:fe})}return K}show(){var D;this.container&&(this.container.hidden=!1),(D=this.popup)==null||D.maybeShow()}hide(){var D;this.container&&(this.container.hidden=!0),(D=this.popup)==null||D.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const D=this.getElementsToTriggerPopup();if(Array.isArray(D))for(const F of D)F.classList.add("highlightArea");else D.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:D,data:{id:F}}=this;this.container.addEventListener("dblclick",()=>{var K;(K=this.linkService.eventBus)==null||K.dispatch("switchannotationeditormode",{source:this,mode:D,editId:F})})}};p=new WeakMap;let y=M;class R extends y{constructor(F,K=null){super(F,{isRenderable:!0,ignoreBorder:!!(K!=null&&K.ignoreBorder),createQuadrilaterals:!0});oe(this,L);this.isTooltipOnly=F.data.isTooltipOnly}render(){const{data:F,linkService:K}=this,fe=document.createElement("a");fe.setAttribute("data-element-id",F.id);let pe=!1;return F.url?(K.addLinkAttributes(fe,F.url,F.newWindow),pe=!0):F.action?(this._bindNamedAction(fe,F.action),pe=!0):F.attachment?(this._bindAttachment(fe,F.attachment),pe=!0):F.setOCGState?(ee(this,L,Mn).call(this,fe,F.setOCGState),pe=!0):F.dest?(this._bindLink(fe,F.dest),pe=!0):(F.actions&&(F.actions.Action||F.actions["Mouse Up"]||F.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(fe,F),pe=!0),F.resetForm?(this._bindResetFormAction(fe,F.resetForm),pe=!0):this.isTooltipOnly&&!pe&&(this._bindLink(fe,""),pe=!0)),this.container.classList.add("linkAnnotation"),pe&&this.container.append(fe),this.container}_bindLink(F,K){F.href=this.linkService.getDestinationHash(K),F.onclick=()=>(K&&this.linkService.goToDestination(K),!1),(K||K==="")&&ee(this,L,rt).call(this)}_bindNamedAction(F,K){F.href=this.linkService.getAnchorUrl(""),F.onclick=()=>(this.linkService.executeNamedAction(K),!1),ee(this,L,rt).call(this)}_bindAttachment(F,K){F.href=this.linkService.getAnchorUrl(""),F.onclick=()=>{var fe;return(fe=this.downloadManager)==null||fe.openOrDownloadData(this.container,K.content,K.filename),!1},ee(this,L,rt).call(this)}_bindJSAction(F,K){F.href=this.linkService.getAnchorUrl("");const fe=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const pe of Object.keys(K.actions)){const ve=fe.get(pe);ve&&(F[ve]=()=>{var Te;return(Te=this.linkService.eventBus)==null||Te.dispatch("dispatcheventinsandbox",{source:this,detail:{id:K.id,name:pe}}),!1})}F.onclick||(F.onclick=()=>!1),ee(this,L,rt).call(this)}_bindResetFormAction(F,K){const fe=F.onclick;if(fe||(F.href=this.linkService.getAnchorUrl("")),ee(this,L,rt).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),fe||(F.onclick=()=>!1);return}F.onclick=()=>{var $e;fe==null||fe();const{fields:pe,refs:ve,include:Te}=K,Le=[];if(pe.length!==0||ve.length!==0){const De=new Set(ve);for(const Ne of pe){const Be=this._fieldObjects[Ne]||[];for(const{id:Ge}of Be)De.add(Ge)}for(const Ne of Object.values(this._fieldObjects))for(const Be of Ne)De.has(Be.id)===Te&&Le.push(Be)}else for(const De of Object.values(this._fieldObjects))Le.push(...De);const Me=this.annotationStorage,Ce=[];for(const De of Le){const{id:Ne}=De;switch(Ce.push(Ne),De.type){case"text":{const Ge=De.defaultValue||"";Me.setValue(Ne,{value:Ge});break}case"checkbox":case"radiobutton":{const Ge=De.defaultValue===De.exportValues;Me.setValue(Ne,{value:Ge});break}case"combobox":case"listbox":{const Ge=De.defaultValue||"";Me.setValue(Ne,{value:Ge});break}default:continue}const Be=document.querySelector(`[data-element-id="${Ne}"]`);if(Be){if(!j.has(Be)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${Ne}`);continue}}else continue;Be.dispatchEvent(new Event("resetform"))}return this.enableScripting&&(($e=this.linkService.eventBus)==null||$e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Ce,name:"ResetForm"}})),!1}}}L=new WeakSet,rt=function(){this.container.setAttribute("data-internal-link","")},Mn=function(F,K){F.href=this.linkService.getAnchorUrl(""),F.onclick=()=>(this.linkService.executeSetOCGState(K),!1),ee(this,L,rt).call(this)};class b extends y{constructor(D){super(D,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const D=document.createElement("img");return D.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",D.alt="[{{type}} Annotation]",D.dataset.l10nId="text_annotation_type",D.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(D),this.container}}class f extends y{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(D){var F;this.data.hasOwnCanvas&&(((F=D.previousSibling)==null?void 0:F.nodeName)==="CANVAS"&&(D.previousSibling.hidden=!0),D.hidden=!1)}_getKeyModifier(D){const{isWin:F,isMac:K}=n.FeatureTest.platform;return F&&D.ctrlKey||K&&D.metaKey}_setEventListener(D,F,K,fe,pe){K.includes("mouse")?D.addEventListener(K,ve=>{var Te;(Te=this.linkService.eventBus)==null||Te.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:fe,value:pe(ve),shift:ve.shiftKey,modifier:this._getKeyModifier(ve)}})}):D.addEventListener(K,ve=>{var Te;if(K==="blur"){if(!F.focused||!ve.relatedTarget)return;F.focused=!1}else if(K==="focus"){if(F.focused)return;F.focused=!0}pe&&((Te=this.linkService.eventBus)==null||Te.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:fe,value:pe(ve)}}))})}_setEventListeners(D,F,K,fe){var pe,ve,Te;for(const[Le,Me]of K)(Me==="Action"||(pe=this.data.actions)!=null&&pe[Me])&&((Me==="Focus"||Me==="Blur")&&(F||(F={focused:!1})),this._setEventListener(D,F,Le,Me,fe),Me==="Focus"&&!((ve=this.data.actions)!=null&&ve.Blur)?this._setEventListener(D,F,"blur","Blur",null):Me==="Blur"&&!((Te=this.data.actions)!=null&&Te.Focus)&&this._setEventListener(D,F,"focus","Focus",null))}_setBackgroundColor(D){const F=this.data.backgroundColor||null;D.style.backgroundColor=F===null?"transparent":n.Util.makeHexColor(F[0],F[1],F[2])}_setTextStyle(D){const F=["left","center","right"],{fontColor:K}=this.data.defaultAppearanceData,fe=this.data.defaultAppearanceData.fontSize||m,pe=D.style;let ve;const Te=2,Le=Me=>Math.round(10*Me)/10;if(this.data.multiLine){const Me=Math.abs(this.data.rect[3]-this.data.rect[1]-Te),Ce=Math.round(Me/(n.LINE_FACTOR*fe))||1,$e=Me/Ce;ve=Math.min(fe,Le($e/n.LINE_FACTOR))}else{const Me=Math.abs(this.data.rect[3]-this.data.rect[1]-Te);ve=Math.min(fe,Le(Me/n.LINE_FACTOR))}pe.fontSize=`calc(${ve}px * var(--scale-factor))`,pe.color=n.Util.makeHexColor(K[0],K[1],K[2]),this.data.textAlignment!==null&&(pe.textAlign=F[this.data.textAlignment])}_setRequired(D,F){F?D.setAttribute("required",!0):D.removeAttribute("required"),D.setAttribute("aria-required",F)}}class A extends f{constructor(D){const F=D.renderForms||!D.data.hasAppearance&&!!D.data.fieldValue;super(D,{isRenderable:F})}setPropertyOnSiblings(D,F,K,fe){const pe=this.annotationStorage;for(const ve of this._getElementsByName(D.name,D.id))ve.domElement&&(ve.domElement[F]=K),pe.setValue(ve.id,{[fe]:K})}render(){var fe,pe;const D=this.annotationStorage,F=this.data.id;this.container.classList.add("textWidgetAnnotation");let K=null;if(this.renderForms){const ve=D.getValue(F,{value:this.data.fieldValue});let Te=ve.value||"";const Le=D.getValue(F,{charLimit:this.data.maxLen}).charLimit;Le&&Te.length>Le&&(Te=Te.slice(0,Le));let Me=ve.formattedValue||((fe=this.data.textContent)==null?void 0:fe.join(`
`))||null;Me&&this.data.comb&&(Me=Me.replaceAll(/\s+/g,""));const Ce={userValue:Te,formattedValue:Me,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(K=document.createElement("textarea"),K.textContent=Me??Te,this.data.doNotScroll&&(K.style.overflowY="hidden")):(K=document.createElement("input"),K.type="text",K.setAttribute("value",Me??Te),this.data.doNotScroll&&(K.style.overflowX="hidden")),this.data.hasOwnCanvas&&(K.hidden=!0),j.add(K),K.setAttribute("data-element-id",F),K.disabled=this.data.readOnly,K.name=this.data.fieldName,K.tabIndex=x,this._setRequired(K,this.data.required),Le&&(K.maxLength=Le),K.addEventListener("input",De=>{D.setValue(F,{value:De.target.value}),this.setPropertyOnSiblings(K,"value",De.target.value,"value"),Ce.formattedValue=null}),K.addEventListener("resetform",De=>{const Ne=this.data.defaultFieldValue??"";K.value=Ce.userValue=Ne,Ce.formattedValue=null});let $e=De=>{const{formattedValue:Ne}=Ce;Ne!=null&&(De.target.value=Ne),De.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){K.addEventListener("focus",Ne=>{if(Ce.focused)return;const{target:Be}=Ne;Ce.userValue&&(Be.value=Ce.userValue),Ce.lastCommittedValue=Be.value,Ce.commitKey=1,Ce.focused=!0}),K.addEventListener("updatefromsandbox",Ne=>{this.showElementAndHideCanvas(Ne.target);const Be={value(Ge){Ce.userValue=Ge.detail.value??"",D.setValue(F,{value:Ce.userValue.toString()}),Ge.target.value=Ce.userValue},formattedValue(Ge){const{formattedValue:Ye}=Ge.detail;Ce.formattedValue=Ye,Ye!=null&&Ge.target!==document.activeElement&&(Ge.target.value=Ye),D.setValue(F,{formattedValue:Ye})},selRange(Ge){Ge.target.setSelectionRange(...Ge.detail.selRange)},charLimit:Ge=>{var Qe;const{charLimit:Ye}=Ge.detail,{target:Ke}=Ge;if(Ye===0){Ke.removeAttribute("maxLength");return}Ke.setAttribute("maxLength",Ye);let Ze=Ce.userValue;!Ze||Ze.length<=Ye||(Ze=Ze.slice(0,Ye),Ke.value=Ce.userValue=Ze,D.setValue(F,{value:Ze}),(Qe=this.linkService.eventBus)==null||Qe.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F,name:"Keystroke",value:Ze,willCommit:!0,commitKey:1,selStart:Ke.selectionStart,selEnd:Ke.selectionEnd}}))}};this._dispatchEventFromSandbox(Be,Ne)}),K.addEventListener("keydown",Ne=>{var Ye;Ce.commitKey=1;let Be=-1;if(Ne.key==="Escape"?Be=0:Ne.key==="Enter"&&!this.data.multiLine?Be=2:Ne.key==="Tab"&&(Ce.commitKey=3),Be===-1)return;const{value:Ge}=Ne.target;Ce.lastCommittedValue!==Ge&&(Ce.lastCommittedValue=Ge,Ce.userValue=Ge,(Ye=this.linkService.eventBus)==null||Ye.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F,name:"Keystroke",value:Ge,willCommit:!0,commitKey:Be,selStart:Ne.target.selectionStart,selEnd:Ne.target.selectionEnd}}))});const De=$e;$e=null,K.addEventListener("blur",Ne=>{var Ge;if(!Ce.focused||!Ne.relatedTarget)return;Ce.focused=!1;const{value:Be}=Ne.target;Ce.userValue=Be,Ce.lastCommittedValue!==Be&&((Ge=this.linkService.eventBus)==null||Ge.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F,name:"Keystroke",value:Be,willCommit:!0,commitKey:Ce.commitKey,selStart:Ne.target.selectionStart,selEnd:Ne.target.selectionEnd}})),De(Ne)}),(pe=this.data.actions)!=null&&pe.Keystroke&&K.addEventListener("beforeinput",Ne=>{var st;Ce.lastCommittedValue=null;const{data:Be,target:Ge}=Ne,{value:Ye,selectionStart:Ke,selectionEnd:Ze}=Ge;let Qe=Ke,tt=Ze;switch(Ne.inputType){case"deleteWordBackward":{const it=Ye.substring(0,Ke).match(/\w*[^\w]*$/);it&&(Qe-=it[0].length);break}case"deleteWordForward":{const it=Ye.substring(Ke).match(/^[^\w]*\w*/);it&&(tt+=it[0].length);break}case"deleteContentBackward":Ke===Ze&&(Qe-=1);break;case"deleteContentForward":Ke===Ze&&(tt+=1);break}Ne.preventDefault(),(st=this.linkService.eventBus)==null||st.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F,name:"Keystroke",value:Ye,change:Be||"",willCommit:!1,selStart:Qe,selEnd:tt}})}),this._setEventListeners(K,Ce,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ne=>Ne.target.value)}if($e&&K.addEventListener("blur",$e),this.data.comb){const Ne=(this.data.rect[2]-this.data.rect[0])/Le;K.classList.add("comb"),K.style.letterSpacing=`calc(${Ne}px * var(--scale-factor) - 1ch)`}}else K=document.createElement("div"),K.textContent=this.data.fieldValue,K.style.verticalAlign="middle",K.style.display="table-cell";return this._setTextStyle(K),this._setBackgroundColor(K),this._setDefaultPropertiesFromJS(K),this.container.append(K),this.container}}class O extends f{constructor(D){super(D,{isRenderable:!!D.data.hasOwnCanvas})}}class _ extends f{constructor(D){super(D,{isRenderable:D.renderForms})}render(){const D=this.annotationStorage,F=this.data,K=F.id;let fe=D.getValue(K,{value:F.exportValue===F.fieldValue}).value;typeof fe=="string"&&(fe=fe!=="Off",D.setValue(K,{value:fe})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const pe=document.createElement("input");return j.add(pe),pe.setAttribute("data-element-id",K),pe.disabled=F.readOnly,this._setRequired(pe,this.data.required),pe.type="checkbox",pe.name=F.fieldName,fe&&pe.setAttribute("checked",!0),pe.setAttribute("exportValue",F.exportValue),pe.tabIndex=x,pe.addEventListener("change",ve=>{const{name:Te,checked:Le}=ve.target;for(const Me of this._getElementsByName(Te,K)){const Ce=Le&&Me.exportValue===F.exportValue;Me.domElement&&(Me.domElement.checked=Ce),D.setValue(Me.id,{value:Ce})}D.setValue(K,{value:Le})}),pe.addEventListener("resetform",ve=>{const Te=F.defaultFieldValue||"Off";ve.target.checked=Te===F.exportValue}),this.enableScripting&&this.hasJSActions&&(pe.addEventListener("updatefromsandbox",ve=>{const Te={value(Le){Le.target.checked=Le.detail.value!=="Off",D.setValue(K,{value:Le.target.checked})}};this._dispatchEventFromSandbox(Te,ve)}),this._setEventListeners(pe,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ve=>ve.target.checked)),this._setBackgroundColor(pe),this._setDefaultPropertiesFromJS(pe),this.container.append(pe),this.container}}class o extends f{constructor(D){super(D,{isRenderable:D.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const D=this.annotationStorage,F=this.data,K=F.id;let fe=D.getValue(K,{value:F.fieldValue===F.buttonValue}).value;typeof fe=="string"&&(fe=fe!==F.buttonValue,D.setValue(K,{value:fe}));const pe=document.createElement("input");if(j.add(pe),pe.setAttribute("data-element-id",K),pe.disabled=F.readOnly,this._setRequired(pe,this.data.required),pe.type="radio",pe.name=F.fieldName,fe&&pe.setAttribute("checked",!0),pe.tabIndex=x,pe.addEventListener("change",ve=>{const{name:Te,checked:Le}=ve.target;for(const Me of this._getElementsByName(Te,K))D.setValue(Me.id,{value:!1});D.setValue(K,{value:Le})}),pe.addEventListener("resetform",ve=>{const Te=F.defaultFieldValue;ve.target.checked=Te!=null&&Te===F.buttonValue}),this.enableScripting&&this.hasJSActions){const ve=F.buttonValue;pe.addEventListener("updatefromsandbox",Te=>{const Le={value:Me=>{const Ce=ve===Me.detail.value;for(const $e of this._getElementsByName(Me.target.name)){const De=Ce&&$e.id===K;$e.domElement&&($e.domElement.checked=De),D.setValue($e.id,{value:De})}}};this._dispatchEventFromSandbox(Le,Te)}),this._setEventListeners(pe,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Te=>Te.target.checked)}return this._setBackgroundColor(pe),this._setDefaultPropertiesFromJS(pe),this.container.append(pe),this.container}}class d extends R{constructor(D){super(D,{ignoreBorder:D.data.hasAppearance})}render(){const D=super.render();D.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(D.title=this.data.alternativeText);const F=D.lastChild;return this.enableScripting&&this.hasJSActions&&F&&(this._setDefaultPropertiesFromJS(F),F.addEventListener("updatefromsandbox",K=>{this._dispatchEventFromSandbox({},K)})),D}}class l extends f{constructor(D){super(D,{isRenderable:D.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const D=this.annotationStorage,F=this.data.id,K=D.getValue(F,{value:this.data.fieldValue}),fe=document.createElement("select");j.add(fe),fe.setAttribute("data-element-id",F),fe.disabled=this.data.readOnly,this._setRequired(fe,this.data.required),fe.name=this.data.fieldName,fe.tabIndex=x;let pe=this.data.combo&&this.data.options.length>0;this.data.combo||(fe.size=this.data.options.length,this.data.multiSelect&&(fe.multiple=!0)),fe.addEventListener("resetform",Ce=>{const $e=this.data.defaultFieldValue;for(const De of fe.options)De.selected=De.value===$e});for(const Ce of this.data.options){const $e=document.createElement("option");$e.textContent=Ce.displayValue,$e.value=Ce.exportValue,K.value.includes(Ce.exportValue)&&($e.setAttribute("selected",!0),pe=!1),fe.append($e)}let ve=null;if(pe){const Ce=document.createElement("option");Ce.value=" ",Ce.setAttribute("hidden",!0),Ce.setAttribute("selected",!0),fe.prepend(Ce),ve=()=>{Ce.remove(),fe.removeEventListener("input",ve),ve=null},fe.addEventListener("input",ve)}const Te=Ce=>{const $e=Ce?"value":"textContent",{options:De,multiple:Ne}=fe;return Ne?Array.prototype.filter.call(De,Be=>Be.selected).map(Be=>Be[$e]):De.selectedIndex===-1?null:De[De.selectedIndex][$e]};let Le=Te(!1);const Me=Ce=>{const $e=Ce.target.options;return Array.prototype.map.call($e,De=>({displayValue:De.textContent,exportValue:De.value}))};return this.enableScripting&&this.hasJSActions?(fe.addEventListener("updatefromsandbox",Ce=>{const $e={value(De){ve==null||ve();const Ne=De.detail.value,Be=new Set(Array.isArray(Ne)?Ne:[Ne]);for(const Ge of fe.options)Ge.selected=Be.has(Ge.value);D.setValue(F,{value:Te(!0)}),Le=Te(!1)},multipleSelection(De){fe.multiple=!0},remove(De){const Ne=fe.options,Be=De.detail.remove;Ne[Be].selected=!1,fe.remove(Be),Ne.length>0&&Array.prototype.findIndex.call(Ne,Ye=>Ye.selected)===-1&&(Ne[0].selected=!0),D.setValue(F,{value:Te(!0),items:Me(De)}),Le=Te(!1)},clear(De){for(;fe.length!==0;)fe.remove(0);D.setValue(F,{value:null,items:[]}),Le=Te(!1)},insert(De){const{index:Ne,displayValue:Be,exportValue:Ge}=De.detail.insert,Ye=fe.children[Ne],Ke=document.createElement("option");Ke.textContent=Be,Ke.value=Ge,Ye?Ye.before(Ke):fe.append(Ke),D.setValue(F,{value:Te(!0),items:Me(De)}),Le=Te(!1)},items(De){const{items:Ne}=De.detail;for(;fe.length!==0;)fe.remove(0);for(const Be of Ne){const{displayValue:Ge,exportValue:Ye}=Be,Ke=document.createElement("option");Ke.textContent=Ge,Ke.value=Ye,fe.append(Ke)}fe.options.length>0&&(fe.options[0].selected=!0),D.setValue(F,{value:Te(!0),items:Me(De)}),Le=Te(!1)},indices(De){const Ne=new Set(De.detail.indices);for(const Be of De.target.options)Be.selected=Ne.has(Be.index);D.setValue(F,{value:Te(!0)}),Le=Te(!1)},editable(De){De.target.disabled=!De.detail.editable}};this._dispatchEventFromSandbox($e,Ce)}),fe.addEventListener("input",Ce=>{var De;const $e=Te(!0);D.setValue(F,{value:$e}),Ce.preventDefault(),(De=this.linkService.eventBus)==null||De.dispatch("dispatcheventinsandbox",{source:this,detail:{id:F,name:"Keystroke",value:Le,changeEx:$e,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(fe,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Ce=>Ce.target.value)):fe.addEventListener("input",function(Ce){D.setValue(F,{value:Te(!0)})}),this.data.combo&&this._setTextStyle(fe),this._setBackgroundColor(fe),this._setDefaultPropertiesFromJS(fe),this.container.append(fe),this.container}}class h extends y{constructor(D){const{data:F,elements:K}=D;super(D,{isRenderable:y._hasPopupData(F)}),this.elements=K}render(){this.container.classList.add("popupAnnotation");const D=new u({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),F=[];for(const K of this.elements)K.popup=D,F.push(K.data.id),K.addHighlightArea();return this.container.setAttribute("aria-controls",F.map(K=>`${n.AnnotationPrefix}${K}`).join(",")),this.container}}class u{constructor({container:D,color:F,elements:K,titleObj:fe,modificationDate:pe,contentsObj:ve,richText:Te,parent:Le,rect:Me,parentRect:Ce,open:$e}){oe(this,we);oe(this,re,null);oe(this,de,ee(this,we,Dn).bind(this));oe(this,te,ee(this,we,sn).bind(this));oe(this,ye,ee(this,we,nn).bind(this));oe(this,me,ee(this,we,Pt).bind(this));oe(this,_e,null);oe(this,ne,null);oe(this,se,null);oe(this,S,null);oe(this,B,null);oe(this,Z,null);oe(this,ae,!1);oe(this,ge,null);oe(this,Se,null);oe(this,Ae,null);oe(this,ie,null);oe(this,Pe,!1);var Ne;ce(this,ne,D),ce(this,ie,fe),ce(this,se,ve),ce(this,Ae,Te),ce(this,B,Le),ce(this,_e,F),ce(this,Se,Me),ce(this,Z,Ce),ce(this,S,K);const De=c.PDFDateString.toDateObject(pe);De&&ce(this,re,Le.l10n.get("annotation_date_string",{date:De.toLocaleDateString(),time:De.toLocaleTimeString()})),this.trigger=K.flatMap(Be=>Be.getElementsToTriggerPopup());for(const Be of this.trigger)Be.addEventListener("click",e(this,me)),Be.addEventListener("mouseenter",e(this,ye)),Be.addEventListener("mouseleave",e(this,te)),Be.classList.add("popupTriggerArea");for(const Be of K)(Ne=Be.container)==null||Ne.addEventListener("keydown",e(this,de));e(this,ne).hidden=!0,$e&&ee(this,we,Pt).call(this)}render(){if(e(this,ge))return;const{page:{view:D},viewport:{rawDims:{pageWidth:F,pageHeight:K,pageX:fe,pageY:pe}}}=e(this,B),ve=ce(this,ge,document.createElement("div"));if(ve.className="popup",e(this,_e)){const Qe=ve.style.outlineColor=n.Util.makeHexColor(...e(this,_e));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?ve.style.backgroundColor=`color-mix(in srgb, ${Qe} 30%, white)`:ve.style.backgroundColor=n.Util.makeHexColor(...e(this,_e).map(st=>Math.floor(.7*(255-st)+st)))}const Te=document.createElement("span");Te.className="header";const Le=document.createElement("h1");if(Te.append(Le),{dir:Le.dir,str:Le.textContent}=e(this,ie),ve.append(Te),e(this,re)){const Qe=document.createElement("span");Qe.classList.add("popupDate"),e(this,re).then(tt=>{Qe.textContent=tt}),Te.append(Qe)}const Me=e(this,se),Ce=e(this,Ae);if(Ce!=null&&Ce.str&&(!(Me!=null&&Me.str)||Me.str===Ce.str))C.XfaLayer.render({xfaHtml:Ce.html,intent:"richText",div:ve}),ve.lastChild.classList.add("richText","popupContent");else{const Qe=this._formatContents(Me);ve.append(Qe)}let $e=!!e(this,Z),De=$e?e(this,Z):e(this,Se);for(const Qe of e(this,S))if(!De||n.Util.intersect(Qe.data.rect,De)!==null){De=Qe.data.rect,$e=!0;break}const Ne=n.Util.normalizeRect([De[0],D[3]-De[1]+D[1],De[2],D[3]-De[3]+D[1]]),Ge=$e?De[2]-De[0]+5:0,Ye=Ne[0]+Ge,Ke=Ne[1],{style:Ze}=e(this,ne);Ze.left=`${100*(Ye-fe)/F}%`,Ze.top=`${100*(Ke-pe)/K}%`,e(this,ne).append(ve)}_formatContents({str:D,dir:F}){const K=document.createElement("p");K.classList.add("popupContent"),K.dir=F;const fe=D.split(/(?:\r\n?|\n)/);for(let pe=0,ve=fe.length;pe<ve;++pe){const Te=fe[pe];K.append(document.createTextNode(Te)),pe<ve-1&&K.append(document.createElement("br"))}return K}forceHide(){ce(this,Pe,this.isVisible),e(this,Pe)&&(e(this,ne).hidden=!0)}maybeShow(){e(this,Pe)&&(ce(this,Pe,!1),e(this,ne).hidden=!1)}get isVisible(){return e(this,ne).hidden===!1}}re=new WeakMap,de=new WeakMap,te=new WeakMap,ye=new WeakMap,me=new WeakMap,_e=new WeakMap,ne=new WeakMap,se=new WeakMap,S=new WeakMap,B=new WeakMap,Z=new WeakMap,ae=new WeakMap,ge=new WeakMap,Se=new WeakMap,Ae=new WeakMap,ie=new WeakMap,Pe=new WeakMap,we=new WeakSet,Dn=function(D){D.altKey||D.shiftKey||D.ctrlKey||D.metaKey||(D.key==="Enter"||D.key==="Escape"&&e(this,ae))&&ee(this,we,Pt).call(this)},Pt=function(){ce(this,ae,!e(this,ae)),e(this,ae)?(ee(this,we,nn).call(this),e(this,ne).addEventListener("click",e(this,me)),e(this,ne).addEventListener("keydown",e(this,de))):(ee(this,we,sn).call(this),e(this,ne).removeEventListener("click",e(this,me)),e(this,ne).removeEventListener("keydown",e(this,de)))},nn=function(){e(this,ge)||this.render(),this.isVisible?e(this,ae)&&e(this,ne).classList.add("focused"):(e(this,ne).hidden=!1,e(this,ne).style.zIndex=parseInt(e(this,ne).style.zIndex)+1e3)},sn=function(){e(this,ne).classList.remove("focused"),!(e(this,ae)||!this.isVisible)&&(e(this,ne).hidden=!0,e(this,ne).style.zIndex=parseInt(e(this,ne).style.zIndex)-1e3)};class I extends y{constructor(D){super(D,{isRenderable:!0,ignoreBorder:!0}),this.textContent=D.data.textContent,this.textPosition=D.data.textPosition,this.annotationEditorType=n.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const D=document.createElement("div");D.classList.add("annotationTextContent"),D.setAttribute("role","comment");for(const F of this.textContent){const K=document.createElement("span");K.textContent=F,D.append(K)}this.container.append(D)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=I;class a extends y{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0});oe(this,Ie,null)}render(){this.container.classList.add("lineAnnotation");const F=this.data,{width:K,height:fe}=U(F.rect),pe=this.svgFactory.create(K,fe,!0),ve=ce(this,Ie,this.svgFactory.createElement("svg:line"));return ve.setAttribute("x1",F.rect[2]-F.lineCoordinates[0]),ve.setAttribute("y1",F.rect[3]-F.lineCoordinates[1]),ve.setAttribute("x2",F.rect[2]-F.lineCoordinates[2]),ve.setAttribute("y2",F.rect[3]-F.lineCoordinates[3]),ve.setAttribute("stroke-width",F.borderStyle.width||1),ve.setAttribute("stroke","transparent"),ve.setAttribute("fill","transparent"),pe.append(ve),this.container.append(pe),!F.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,Ie)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ie=new WeakMap;class w extends y{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0});oe(this,He,null)}render(){this.container.classList.add("squareAnnotation");const F=this.data,{width:K,height:fe}=U(F.rect),pe=this.svgFactory.create(K,fe,!0),ve=F.borderStyle.width,Te=ce(this,He,this.svgFactory.createElement("svg:rect"));return Te.setAttribute("x",ve/2),Te.setAttribute("y",ve/2),Te.setAttribute("width",K-ve),Te.setAttribute("height",fe-ve),Te.setAttribute("stroke-width",ve||1),Te.setAttribute("stroke","transparent"),Te.setAttribute("fill","transparent"),pe.append(Te),this.container.append(pe),!F.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,He)}addHighlightArea(){this.container.classList.add("highlightArea")}}He=new WeakMap;class g extends y{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0});oe(this,Xe,null)}render(){this.container.classList.add("circleAnnotation");const F=this.data,{width:K,height:fe}=U(F.rect),pe=this.svgFactory.create(K,fe,!0),ve=F.borderStyle.width,Te=ce(this,Xe,this.svgFactory.createElement("svg:ellipse"));return Te.setAttribute("cx",K/2),Te.setAttribute("cy",fe/2),Te.setAttribute("rx",K/2-ve/2),Te.setAttribute("ry",fe/2-ve/2),Te.setAttribute("stroke-width",ve||1),Te.setAttribute("stroke","transparent"),Te.setAttribute("fill","transparent"),pe.append(Te),this.container.append(pe),!F.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,Xe)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xe=new WeakMap;class z extends y{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0});oe(this,Ee,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const F=this.data,{width:K,height:fe}=U(F.rect),pe=this.svgFactory.create(K,fe,!0);let ve=[];for(const Le of F.vertices){const Me=Le.x-F.rect[0],Ce=F.rect[3]-Le.y;ve.push(Me+","+Ce)}ve=ve.join(" ");const Te=ce(this,Ee,this.svgFactory.createElement(this.svgElementName));return Te.setAttribute("points",ve),Te.setAttribute("stroke-width",F.borderStyle.width||1),Te.setAttribute("stroke","transparent"),Te.setAttribute("fill","transparent"),pe.append(Te),this.container.append(pe),!F.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return e(this,Ee)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ee=new WeakMap;class V extends z{constructor(D){super(D),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class X extends y{constructor(D){super(D,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class W extends y{constructor(F){super(F,{isRenderable:!0,ignoreBorder:!0});oe(this,le,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=n.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const F=this.data,{width:K,height:fe}=U(F.rect),pe=this.svgFactory.create(K,fe,!0);for(const ve of F.inkLists){let Te=[];for(const Me of ve){const Ce=Me.x-F.rect[0],$e=F.rect[3]-Me.y;Te.push(`${Ce},${$e}`)}Te=Te.join(" ");const Le=this.svgFactory.createElement(this.svgElementName);e(this,le).push(Le),Le.setAttribute("points",Te),Le.setAttribute("stroke-width",F.borderStyle.width||1),Le.setAttribute("stroke","transparent"),Le.setAttribute("fill","transparent"),!F.popupRef&&this.hasPopupData&&this._createPopup(),pe.append(Le)}return this.container.append(pe),this.container}getElementsToTriggerPopup(){return e(this,le)}addHighlightArea(){this.container.classList.add("highlightArea")}}le=new WeakMap,t.InkAnnotationElement=W;class Q extends y{constructor(D){super(D,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class T extends y{constructor(D){super(D,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class H extends y{constructor(D){super(D,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Y extends y{constructor(D){super(D,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class E extends y{constructor(D){super(D,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=E;class s extends y{constructor(F){var pe;super(F,{isRenderable:!0});oe(this,ke);oe(this,ue,null);const{filename:K,content:fe}=this.data.file;this.filename=(0,c.getFilenameFromUrl)(K,!0),this.content=fe,(pe=this.linkService.eventBus)==null||pe.dispatch("fileattachmentannotation",{source:this,filename:K,content:fe})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:F,data:K}=this;let fe;K.hasAppearance||K.fillAlpha===0?fe=document.createElement("div"):(fe=document.createElement("img"),fe.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(K.name)?"paperclip":"pushpin"}.svg`,K.fillAlpha&&K.fillAlpha<1&&(fe.style=`filter: opacity(${Math.round(K.fillAlpha*100)}%);`)),fe.addEventListener("dblclick",ee(this,ke,rn).bind(this)),ce(this,ue,fe);const{isMac:pe}=n.FeatureTest.platform;return F.addEventListener("keydown",ve=>{ve.key==="Enter"&&(pe?ve.metaKey:ve.ctrlKey)&&ee(this,ke,rn).call(this)}),!K.popupRef&&this.hasPopupData?this._createPopup():fe.classList.add("popupTriggerArea"),F.append(fe),F}getElementsToTriggerPopup(){return e(this,ue)}addHighlightArea(){this.container.classList.add("highlightArea")}}ue=new WeakMap,ke=new WeakSet,rn=function(){var F;(F=this.downloadManager)==null||F.openOrDownloadData(this.container,this.content,this.filename)};class i{constructor({div:D,accessibilityManager:F,annotationCanvasMap:K,l10n:fe,page:pe,viewport:ve}){oe(this,xe);oe(this,Ve,null);oe(this,G,null);oe(this,be,new Map);this.div=D,ce(this,Ve,F),ce(this,G,K),this.l10n=fe,this.page=pe,this.viewport=ve,this.zIndex=0,this.l10n||(this.l10n=he.NullL10n)}async render(D){const{annotations:F}=D,K=this.div;(0,c.setLayerDimensions)(K,this.viewport);const fe=new Map,pe={data:null,layer:K,linkService:D.linkService,downloadManager:D.downloadManager,imageResourcesPath:D.imageResourcesPath||"",renderForms:D.renderForms!==!1,svgFactory:new c.DOMSVGFactory,annotationStorage:D.annotationStorage||new q.AnnotationStorage,enableScripting:D.enableScripting===!0,hasJSActions:D.hasJSActions,fieldObjects:D.fieldObjects,parent:this,elements:null};for(const ve of F){if(ve.noHTML)continue;const Te=ve.annotationType===n.AnnotationType.POPUP;if(Te){const Ce=fe.get(ve.id);if(!Ce)continue;pe.elements=Ce}else{const{width:Ce,height:$e}=U(ve.rect);if(Ce<=0||$e<=0)continue}pe.data=ve;const Le=v.create(pe);if(!Le.isRenderable)continue;if(!Te&&ve.popupRef){const Ce=fe.get(ve.popupRef);Ce?Ce.push(Le):fe.set(ve.popupRef,[Le])}Le.annotationEditorType>0&&e(this,be).set(Le.data.id,Le);const Me=Le.render();ve.hidden&&(Me.style.visibility="hidden"),ee(this,xe,On).call(this,Me,ve.id)}ee(this,xe,an).call(this),await this.l10n.translate(K)}update({viewport:D}){const F=this.div;this.viewport=D,(0,c.setLayerDimensions)(F,{rotation:D.rotation}),ee(this,xe,an).call(this),F.hidden=!1}getEditableAnnotations(){return Array.from(e(this,be).values())}getEditableAnnotation(D){return e(this,be).get(D)}}Ve=new WeakMap,G=new WeakMap,be=new WeakMap,xe=new WeakSet,On=function(D,F){var fe;const K=D.firstChild||D;K.id=`${n.AnnotationPrefix}${F}`,this.div.append(D),(fe=e(this,Ve))==null||fe.moveElementInDOM(this.div,D,K,!1)},an=function(){if(!e(this,G))return;const D=this.div;for(const[F,K]of e(this,G)){const fe=D.querySelector(`[data-annotation-id="${F}"]`);if(!fe)continue;const{firstChild:pe}=fe;pe?pe.nodeName==="CANVAS"?pe.replaceWith(K):pe.before(K):fe.append(K)}e(this,G).clear()},t.AnnotationLayer=i},(P,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function k(q){return Math.floor(Math.max(0,Math.min(1,q))*255).toString(16).padStart(2,"0")}function n(q){return Math.max(0,Math.min(255,255*q))}class c{static CMYK_G([$,he,C,x]){return["G",1-Math.min(1,.3*$+.59*C+.11*he+x)]}static G_CMYK([$]){return["CMYK",0,0,0,1-$]}static G_RGB([$]){return["RGB",$,$,$]}static G_rgb([$]){return $=n($),[$,$,$]}static G_HTML([$]){const he=k($);return`#${he}${he}${he}`}static RGB_G([$,he,C]){return["G",.3*$+.59*he+.11*C]}static RGB_rgb($){return $.map(n)}static RGB_HTML($){return`#${$.map(k).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([$,he,C,x]){return["RGB",1-Math.min(1,$+x),1-Math.min(1,C+x),1-Math.min(1,he+x)]}static CMYK_rgb([$,he,C,x]){return[n(1-Math.min(1,$+x)),n(1-Math.min(1,C+x)),n(1-Math.min(1,he+x))]}static CMYK_HTML($){const he=this.CMYK_RGB($).slice(1);return this.RGB_HTML(he)}static RGB_CMYK([$,he,C]){const x=1-$,m=1-he,j=1-C,U=Math.min(x,m,j);return["CMYK",x,m,j,U]}}t.ColorConverters=c},(P,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=n;const k={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};k.print_progress_percent="{{progress}}%";function n($,he){switch($){case"find_match_count":$=`find_match_count[${he.total===1?"one":"other"}]`;break;case"find_match_count_limit":$=`find_match_count_limit[${he.limit===1?"one":"other"}]`;break}return k[$]||""}function c($,he){return he?$.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(C,x)=>x in he?he[x]:"{{"+x+"}}"):$}const q={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get($,he=null,C=n($,he)){return c(C,he)},async translate($){}};t.NullL10n=q},(P,t,k)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var n=k(25);class c{static setupStorage($,he,C,x,m){const j=x.getValue(he,{value:null});switch(C.name){case"textarea":if(j.value!==null&&($.textContent=j.value),m==="print")break;$.addEventListener("input",U=>{x.setValue(he,{value:U.target.value})});break;case"input":if(C.attributes.type==="radio"||C.attributes.type==="checkbox"){if(j.value===C.attributes.xfaOn?$.setAttribute("checked",!0):j.value===C.attributes.xfaOff&&$.removeAttribute("checked"),m==="print")break;$.addEventListener("change",U=>{x.setValue(he,{value:U.target.checked?U.target.getAttribute("xfaOn"):U.target.getAttribute("xfaOff")})})}else{if(j.value!==null&&$.setAttribute("value",j.value),m==="print")break;$.addEventListener("input",U=>{x.setValue(he,{value:U.target.value})})}break;case"select":if(j.value!==null){$.setAttribute("value",j.value);for(const U of C.children)U.attributes.value===j.value?U.attributes.selected=!0:U.attributes.hasOwnProperty("selected")&&delete U.attributes.selected}$.addEventListener("input",U=>{const v=U.target.options,y=v.selectedIndex===-1?"":v[v.selectedIndex].value;x.setValue(he,{value:y})});break}}static setAttributes({html:$,element:he,storage:C=null,intent:x,linkService:m}){const{attributes:j}=he,U=$ instanceof HTMLAnchorElement;j.type==="radio"&&(j.name=`${j.name}-${x}`);for(const[v,y]of Object.entries(j))if(y!=null)switch(v){case"class":y.length&&$.setAttribute(v,y.join(" "));break;case"dataId":break;case"id":$.setAttribute("data-element-id",y);break;case"style":Object.assign($.style,y);break;case"textContent":$.textContent=y;break;default:(!U||v!=="href"&&v!=="newWindow")&&$.setAttribute(v,y)}U&&m.addLinkAttributes($,j.href,j.newWindow),C&&j.dataId&&this.setupStorage($,j.dataId,he,C)}static render($){var R;const he=$.annotationStorage,C=$.linkService,x=$.xfaHtml,m=$.intent||"display",j=document.createElement(x.name);x.attributes&&this.setAttributes({html:j,element:x,intent:m,linkService:C});const U=[[x,-1,j]],v=$.div;if(v.append(j),$.viewport){const b=`matrix(${$.viewport.transform.join(",")})`;v.style.transform=b}m!=="richText"&&v.setAttribute("class","xfaLayer xfaFont");const y=[];for(;U.length>0;){const[b,f,A]=U.at(-1);if(f+1===b.children.length){U.pop();continue}const O=b.children[++U.at(-1)[1]];if(O===null)continue;const{name:_}=O;if(_==="#text"){const d=document.createTextNode(O.value);y.push(d),A.append(d);continue}const o=(R=O==null?void 0:O.attributes)!=null&&R.xmlns?document.createElementNS(O.attributes.xmlns,_):document.createElement(_);if(A.append(o),O.attributes&&this.setAttributes({html:o,element:O,storage:he,intent:m,linkService:C}),O.children&&O.children.length>0)U.push([O,-1,o]);else if(O.value){const d=document.createTextNode(O.value);n.XfaText.shouldBuildText(_)&&y.push(d),o.append(d)}}for(const b of v.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:y}}static update($){const he=`matrix(${$.viewport.transform.join(",")})`;$.div.style.transform=he,$.div.hidden=!1}}t.XfaLayer=c},(P,t,k)=>{var x,m,j,U,v,y,R,b,f,A,O,_,o,d,l,Ln,In,Nn,jn,on,Un,ln,Bn,Wn,$n,Hn,Gn,nt,cn,xt,Ct,ct,hn,Rt,L,Vn,un,zn,qn,dn,kt,ht;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var n=k(1),c=k(4),q=k(29),$=k(6),he=k(5);const _e=class _e extends c.AnnotationEditor{constructor(S){super({...S,name:"inkEditor"});oe(this,l);oe(this,x,0);oe(this,m,0);oe(this,j,this.canvasPointermove.bind(this));oe(this,U,this.canvasPointerleave.bind(this));oe(this,v,this.canvasPointerup.bind(this));oe(this,y,this.canvasPointerdown.bind(this));oe(this,R,new Path2D);oe(this,b,!1);oe(this,f,!1);oe(this,A,!1);oe(this,O,null);oe(this,_,0);oe(this,o,0);oe(this,d,null);this.color=S.color||null,this.thickness=S.thickness||null,this.opacity=S.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(S){c.AnnotationEditor.initialize(S,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(S,B){switch(S){case n.AnnotationEditorParamsType.INK_THICKNESS:_e._defaultThickness=B;break;case n.AnnotationEditorParamsType.INK_COLOR:_e._defaultColor=B;break;case n.AnnotationEditorParamsType.INK_OPACITY:_e._defaultOpacity=B/100;break}}updateParams(S,B){switch(S){case n.AnnotationEditorParamsType.INK_THICKNESS:ee(this,l,Ln).call(this,B);break;case n.AnnotationEditorParamsType.INK_COLOR:ee(this,l,In).call(this,B);break;case n.AnnotationEditorParamsType.INK_OPACITY:ee(this,l,Nn).call(this,B);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,_e._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,_e._defaultColor||c.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(_e._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||_e._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||_e._defaultColor||c.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??_e._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(ee(this,l,xt).call(this),ee(this,l,Ct).call(this)),this.isAttachedToDOM||(this.parent.add(this),ee(this,l,ct).call(this)),ee(this,l,ht).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,e(this,O).disconnect(),ce(this,O,null),super.remove())}setParent(S){!this.parent&&S?this._uiManager.removeShouldRescale(this):this.parent&&S===null&&this._uiManager.addShouldRescale(this),super.setParent(S)}onScaleChanging(){const[S,B]=this.parentDimensions,Z=this.width*S,ae=this.height*B;this.setDimensions(Z,ae)}enableEditMode(){e(this,b)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",e(this,y)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",e(this,y)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){e(this,b)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ce(this,b,!0),this.div.classList.add("disabled"),ee(this,l,ht).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(S){this._focusEventsAllowed&&(super.focusin(S),this.enableEditMode())}canvasPointerdown(S){S.button!==0||!this.isInEditMode()||e(this,b)||(this.setInForeground(),S.preventDefault(),S.type!=="mouse"&&this.div.focus(),ee(this,l,Un).call(this,S.offsetX,S.offsetY))}canvasPointermove(S){S.preventDefault(),ee(this,l,ln).call(this,S.offsetX,S.offsetY)}canvasPointerup(S){S.preventDefault(),ee(this,l,cn).call(this,S)}canvasPointerleave(S){ee(this,l,cn).call(this,S)}get isResizable(){return!this.isEmpty()&&e(this,b)}render(){if(this.div)return this.div;let S,B;this.width&&(S=this.x,B=this.y),super.render(),c.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Ae=>{var ie;return(ie=this.div)==null?void 0:ie.setAttribute("aria-label",Ae)});const[Z,ae,ge,Se]=ee(this,l,jn).call(this);if(this.setAt(Z,ae,0,0),this.setDims(ge,Se),ee(this,l,xt).call(this),this.width){const[Ae,ie]=this.parentDimensions;this.setAspectRatio(this.width*Ae,this.height*ie),this.setAt(S*Ae,B*ie,this.width*Ae,this.height*ie),ce(this,A,!0),ee(this,l,ct).call(this),this.setDims(this.width*Ae,this.height*ie),ee(this,l,nt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ee(this,l,Ct).call(this),this.div}setDimensions(S,B){const Z=Math.round(S),ae=Math.round(B);if(e(this,_)===Z&&e(this,o)===ae)return;ce(this,_,Z),ce(this,o,ae),this.canvas.style.visibility="hidden";const[ge,Se]=this.parentDimensions;this.width=S/ge,this.height=B/Se,this.fixAndSetPosition(),e(this,b)&&ee(this,l,hn).call(this,S,B),ee(this,l,ct).call(this),ee(this,l,nt).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(S,B,Z){var Ie,He,Xe;if(S instanceof q.InkAnnotationElement)return null;const ae=super.deserialize(S,B,Z);ae.thickness=S.thickness,ae.color=n.Util.makeHexColor(...S.color),ae.opacity=S.opacity;const[ge,Se]=ae.pageDimensions,Ae=ae.width*ge,ie=ae.height*Se,Pe=ae.parentScale,we=S.thickness/2;ce(ae,b,!0),ce(ae,_,Math.round(Ae)),ce(ae,o,Math.round(ie));const{paths:We,rect:Ue,rotation:ze}=S;for(let{bezier:Ee}of We){Ee=ee(Ie=_e,L,zn).call(Ie,Ee,Ue,ze);const le=[];ae.paths.push(le);let ue=Pe*(Ee[0]-we),ke=Pe*(Ee[1]-we);for(let Ve=2,G=Ee.length;Ve<G;Ve+=6){const be=Pe*(Ee[Ve]-we),xe=Pe*(Ee[Ve+1]-we),Oe=Pe*(Ee[Ve+2]-we),je=Pe*(Ee[Ve+3]-we),Re=Pe*(Ee[Ve+4]-we),D=Pe*(Ee[Ve+5]-we);le.push([[ue,ke],[be,xe],[Oe,je],[Re,D]]),ue=Re,ke=D}const qe=ee(this,L,Vn).call(this,le);ae.bezierPath2D.push(qe)}const Fe=ee(He=ae,l,dn).call(He);return ce(ae,m,Math.max(c.AnnotationEditor.MIN_SIZE,Fe[2]-Fe[0])),ce(ae,x,Math.max(c.AnnotationEditor.MIN_SIZE,Fe[3]-Fe[1])),ee(Xe=ae,l,hn).call(Xe,Ae,ie),ae}serialize(){if(this.isEmpty())return null;const S=this.getRect(0,0),B=c.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:B,thickness:this.thickness,opacity:this.opacity,paths:ee(this,l,qn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,S),pageIndex:this.pageIndex,rect:S,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};x=new WeakMap,m=new WeakMap,j=new WeakMap,U=new WeakMap,v=new WeakMap,y=new WeakMap,R=new WeakMap,b=new WeakMap,f=new WeakMap,A=new WeakMap,O=new WeakMap,_=new WeakMap,o=new WeakMap,d=new WeakMap,l=new WeakSet,Ln=function(S){const B=this.thickness;this.addCommands({cmd:()=>{this.thickness=S,ee(this,l,ht).call(this)},undo:()=>{this.thickness=B,ee(this,l,ht).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},In=function(S){const B=this.color;this.addCommands({cmd:()=>{this.color=S,ee(this,l,nt).call(this)},undo:()=>{this.color=B,ee(this,l,nt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Nn=function(S){S/=100;const B=this.opacity;this.addCommands({cmd:()=>{this.opacity=S,ee(this,l,nt).call(this)},undo:()=>{this.opacity=B,ee(this,l,nt).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},jn=function(){const{parentRotation:S,parentDimensions:[B,Z]}=this;switch(S){case 90:return[0,Z,Z,B];case 180:return[B,Z,B,Z];case 270:return[B,0,Z,B];default:return[0,0,B,Z]}},on=function(){const{ctx:S,color:B,opacity:Z,thickness:ae,parentScale:ge,scaleFactor:Se}=this;S.lineWidth=ae*ge/Se,S.lineCap="round",S.lineJoin="round",S.miterLimit=10,S.strokeStyle=`${B}${(0,he.opacityToHex)(Z)}`},Un=function(S,B){this.canvas.addEventListener("contextmenu",$.noContextMenu),this.canvas.addEventListener("pointerleave",e(this,U)),this.canvas.addEventListener("pointermove",e(this,j)),this.canvas.addEventListener("pointerup",e(this,v)),this.canvas.removeEventListener("pointerdown",e(this,y)),this.isEditing=!0,e(this,A)||(ce(this,A,!0),ee(this,l,ct).call(this),this.thickness||(this.thickness=_e._defaultThickness),this.color||(this.color=_e._defaultColor||c.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=_e._defaultOpacity)),this.currentPath.push([S,B]),ce(this,f,!1),ee(this,l,on).call(this),ce(this,d,()=>{ee(this,l,$n).call(this),e(this,d)&&window.requestAnimationFrame(e(this,d))}),window.requestAnimationFrame(e(this,d))},ln=function(S,B){const[Z,ae]=this.currentPath.at(-1);if(this.currentPath.length>1&&S===Z&&B===ae)return;const ge=this.currentPath;let Se=e(this,R);if(ge.push([S,B]),ce(this,f,!0),ge.length<=2){Se.moveTo(...ge[0]),Se.lineTo(S,B);return}ge.length===3&&(ce(this,R,Se=new Path2D),Se.moveTo(...ge[0])),ee(this,l,Hn).call(this,Se,...ge.at(-3),...ge.at(-2),S,B)},Bn=function(){if(this.currentPath.length===0)return;const S=this.currentPath.at(-1);e(this,R).lineTo(...S)},Wn=function(S,B){ce(this,d,null),S=Math.min(Math.max(S,0),this.canvas.width),B=Math.min(Math.max(B,0),this.canvas.height),ee(this,l,ln).call(this,S,B),ee(this,l,Bn).call(this);let Z;if(this.currentPath.length!==1)Z=ee(this,l,Gn).call(this);else{const ie=[S,B];Z=[[ie,ie.slice(),ie.slice(),ie]]}const ae=e(this,R),ge=this.currentPath;this.currentPath=[],ce(this,R,new Path2D);const Se=()=>{this.allRawPaths.push(ge),this.paths.push(Z),this.bezierPath2D.push(ae),this.rebuild()},Ae=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ee(this,l,xt).call(this),ee(this,l,Ct).call(this)),ee(this,l,ht).call(this))};this.addCommands({cmd:Se,undo:Ae,mustExec:!0})},$n=function(){if(!e(this,f))return;ce(this,f,!1);const S=Math.ceil(this.thickness*this.parentScale),B=this.currentPath.slice(-3),Z=B.map(Se=>Se[0]),ae=B.map(Se=>Se[1]);Math.min(...Z)-S,Math.max(...Z)+S,Math.min(...ae)-S,Math.max(...ae)+S;const{ctx:ge}=this;ge.save(),ge.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Se of this.bezierPath2D)ge.stroke(Se);ge.stroke(e(this,R)),ge.restore()},Hn=function(S,B,Z,ae,ge,Se,Ae){const ie=(B+ae)/2,Pe=(Z+ge)/2,we=(ae+Se)/2,We=(ge+Ae)/2;S.bezierCurveTo(ie+2*(ae-ie)/3,Pe+2*(ge-Pe)/3,we+2*(ae-we)/3,We+2*(ge-We)/3,we,We)},Gn=function(){const S=this.currentPath;if(S.length<=2)return[[S[0],S[0],S.at(-1),S.at(-1)]];const B=[];let Z,[ae,ge]=S[0];for(Z=1;Z<S.length-2;Z++){const[Ue,ze]=S[Z],[Fe,Ie]=S[Z+1],He=(Ue+Fe)/2,Xe=(ze+Ie)/2,Ee=[ae+2*(Ue-ae)/3,ge+2*(ze-ge)/3],le=[He+2*(Ue-He)/3,Xe+2*(ze-Xe)/3];B.push([[ae,ge],Ee,le,[He,Xe]]),[ae,ge]=[He,Xe]}const[Se,Ae]=S[Z],[ie,Pe]=S[Z+1],we=[ae+2*(Se-ae)/3,ge+2*(Ae-ge)/3],We=[ie+2*(Se-ie)/3,Pe+2*(Ae-Pe)/3];return B.push([[ae,ge],we,We,[ie,Pe]]),B},nt=function(){if(this.isEmpty()){ee(this,l,Rt).call(this);return}ee(this,l,on).call(this);const{canvas:S,ctx:B}=this;B.setTransform(1,0,0,1,0,0),B.clearRect(0,0,S.width,S.height),ee(this,l,Rt).call(this);for(const Z of this.bezierPath2D)B.stroke(Z)},cn=function(S){this.canvas.removeEventListener("pointerleave",e(this,U)),this.canvas.removeEventListener("pointermove",e(this,j)),this.canvas.removeEventListener("pointerup",e(this,v)),this.canvas.addEventListener("pointerdown",e(this,y)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",$.noContextMenu)},10),ee(this,l,Wn).call(this,S.offsetX,S.offsetY),this.addToAnnotationStorage(),this.setInBackground()},xt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",c.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(S=>{var B;return(B=this.canvas)==null?void 0:B.setAttribute("aria-label",S)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Ct=function(){ce(this,O,new ResizeObserver(S=>{const B=S[0].contentRect;B.width&&B.height&&this.setDimensions(B.width,B.height)})),e(this,O).observe(this.div)},ct=function(){if(!e(this,A))return;const[S,B]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*S),this.canvas.height=Math.ceil(this.height*B),ee(this,l,Rt).call(this)},hn=function(S,B){const Z=ee(this,l,kt).call(this),ae=(S-Z)/e(this,m),ge=(B-Z)/e(this,x);this.scaleFactor=Math.min(ae,ge)},Rt=function(){const S=ee(this,l,kt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+S,this.translationY*this.scaleFactor+S)},L=new WeakSet,Vn=function(S){const B=new Path2D;for(let Z=0,ae=S.length;Z<ae;Z++){const[ge,Se,Ae,ie]=S[Z];Z===0&&B.moveTo(...ge),B.bezierCurveTo(Se[0],Se[1],Ae[0],Ae[1],ie[0],ie[1])}return B},un=function(S,B,Z){const[ae,ge,Se,Ae]=B;switch(Z){case 0:for(let ie=0,Pe=S.length;ie<Pe;ie+=2)S[ie]+=ae,S[ie+1]=Ae-S[ie+1];break;case 90:for(let ie=0,Pe=S.length;ie<Pe;ie+=2){const we=S[ie];S[ie]=S[ie+1]+ae,S[ie+1]=we+ge}break;case 180:for(let ie=0,Pe=S.length;ie<Pe;ie+=2)S[ie]=Se-S[ie],S[ie+1]+=ge;break;case 270:for(let ie=0,Pe=S.length;ie<Pe;ie+=2){const we=S[ie];S[ie]=Se-S[ie+1],S[ie+1]=Ae-we}break;default:throw new Error("Invalid rotation")}return S},zn=function(S,B,Z){const[ae,ge,Se,Ae]=B;switch(Z){case 0:for(let ie=0,Pe=S.length;ie<Pe;ie+=2)S[ie]-=ae,S[ie+1]=Ae-S[ie+1];break;case 90:for(let ie=0,Pe=S.length;ie<Pe;ie+=2){const we=S[ie];S[ie]=S[ie+1]-ge,S[ie+1]=we-ae}break;case 180:for(let ie=0,Pe=S.length;ie<Pe;ie+=2)S[ie]=Se-S[ie],S[ie+1]-=ge;break;case 270:for(let ie=0,Pe=S.length;ie<Pe;ie+=2){const we=S[ie];S[ie]=Ae-S[ie+1],S[ie+1]=Se-we}break;default:throw new Error("Invalid rotation")}return S},qn=function(S,B,Z,ae){var Pe,we;const ge=[],Se=this.thickness/2,Ae=S*B+Se,ie=S*Z+Se;for(const We of this.paths){const Ue=[],ze=[];for(let Fe=0,Ie=We.length;Fe<Ie;Fe++){const[He,Xe,Ee,le]=We[Fe],ue=S*He[0]+Ae,ke=S*He[1]+ie,qe=S*Xe[0]+Ae,Ve=S*Xe[1]+ie,G=S*Ee[0]+Ae,be=S*Ee[1]+ie,xe=S*le[0]+Ae,Oe=S*le[1]+ie;Fe===0&&(Ue.push(ue,ke),ze.push(ue,ke)),Ue.push(qe,Ve,G,be,xe,Oe),ze.push(qe,Ve),Fe===Ie-1&&ze.push(xe,Oe)}ge.push({bezier:ee(Pe=_e,L,un).call(Pe,Ue,ae,this.rotation),points:ee(we=_e,L,un).call(we,ze,ae,this.rotation)})}return ge},dn=function(){let S=1/0,B=-1/0,Z=1/0,ae=-1/0;for(const ge of this.paths)for(const[Se,Ae,ie,Pe]of ge){const we=n.Util.bezierBoundingBox(...Se,...Ae,...ie,...Pe);S=Math.min(S,we[0]),Z=Math.min(Z,we[1]),B=Math.max(B,we[2]),ae=Math.max(ae,we[3])}return[S,Z,B,ae]},kt=function(){return e(this,b)?Math.ceil(this.thickness*this.parentScale):0},ht=function(S=!1){if(this.isEmpty())return;if(!e(this,b)){ee(this,l,nt).call(this);return}const B=ee(this,l,dn).call(this),Z=ee(this,l,kt).call(this);ce(this,m,Math.max(c.AnnotationEditor.MIN_SIZE,B[2]-B[0])),ce(this,x,Math.max(c.AnnotationEditor.MIN_SIZE,B[3]-B[1]));const ae=Math.ceil(Z+e(this,m)*this.scaleFactor),ge=Math.ceil(Z+e(this,x)*this.scaleFactor),[Se,Ae]=this.parentDimensions;this.width=ae/Se,this.height=ge/Ae,this.setAspectRatio(ae,ge);const ie=this.translationX,Pe=this.translationY;this.translationX=-B[0],this.translationY=-B[1],ee(this,l,ct).call(this),ee(this,l,nt).call(this),ce(this,_,ae),ce(this,o,ge),this.setDims(ae,ge);const we=S?Z/this.scaleFactor/2:0;this.translate(ie-this.translationX-we,Pe-this.translationY-we)},oe(_e,L),Je(_e,"_defaultColor",null),Je(_e,"_defaultOpacity",1),Je(_e,"_defaultThickness",1),Je(_e,"_type","ink");let C=_e;t.InkEditor=C},(P,t,k)=>{var C,x,m,j,U,v,y,R,b,f,A,bt,yt,Ft,fn,Xn,Yn,pn,Mt,Kn;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var n=k(1),c=k(4),q=k(6),$=k(29);const w=class w extends c.AnnotationEditor{constructor(V){super({...V,name:"stampEditor"});oe(this,A);oe(this,C,null);oe(this,x,null);oe(this,m,null);oe(this,j,null);oe(this,U,null);oe(this,v,null);oe(this,y,null);oe(this,R,null);oe(this,b,!1);oe(this,f,!1);ce(this,j,V.bitmapUrl),ce(this,U,V.bitmapFile)}static initialize(V){c.AnnotationEditor.initialize(V)}static get supportedTypes(){const V=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,n.shadow)(this,"supportedTypes",V.map(X=>`image/${X}`))}static get supportedTypesStr(){return(0,n.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(V){return this.supportedTypes.includes(V)}static paste(V,X){X.pasteEditor(n.AnnotationEditorType.STAMP,{bitmapFile:V.getAsFile()})}remove(){var V,X;e(this,x)&&(ce(this,C,null),this._uiManager.imageManager.deleteId(e(this,x)),(V=e(this,v))==null||V.remove(),ce(this,v,null),(X=e(this,y))==null||X.disconnect(),ce(this,y,null)),super.remove()}rebuild(){if(!this.parent){e(this,x)&&ee(this,A,Ft).call(this);return}super.rebuild(),this.div!==null&&(e(this,x)&&ee(this,A,Ft).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(e(this,m)||e(this,C)||e(this,j)||e(this,U))}get isResizable(){return!0}render(){if(this.div)return this.div;let V,X;if(this.width&&(V=this.x,X=this.y),super.render(),this.div.hidden=!0,e(this,C)?ee(this,A,fn).call(this):ee(this,A,Ft).call(this),this.width){const[W,Q]=this.parentDimensions;this.setAt(V*W,X*Q,this.width*W,this.height*Q)}return this.div}static deserialize(V,X,W){if(V instanceof $.StampAnnotationElement)return null;const Q=super.deserialize(V,X,W),{rect:T,bitmapUrl:H,bitmapId:Y,isSvg:E,accessibilityData:s}=V;Y&&W.imageManager.isValidId(Y)?ce(Q,x,Y):ce(Q,j,H),ce(Q,b,E);const[i,p]=Q.pageDimensions;return Q.width=(T[2]-T[0])/i,Q.height=(T[3]-T[1])/p,s&&(Q.altTextData=s),Q}serialize(V=!1,X=null){if(this.isEmpty())return null;const W={annotationType:n.AnnotationEditorType.STAMP,bitmapId:e(this,x),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:e(this,b),structTreeParentId:this._structTreeParentId};if(V)return W.bitmapUrl=ee(this,A,Mt).call(this,!0),W.accessibilityData=this.altTextData,W;const{decorative:Q,altText:T}=this.altTextData;if(!Q&&T&&(W.accessibilityData={type:"Figure",alt:T}),X===null)return W;X.stamps||(X.stamps=new Map);const H=e(this,b)?(W.rect[2]-W.rect[0])*(W.rect[3]-W.rect[1]):null;if(!X.stamps.has(e(this,x)))X.stamps.set(e(this,x),{area:H,serialized:W}),W.bitmap=ee(this,A,Mt).call(this,!1);else if(e(this,b)){const Y=X.stamps.get(e(this,x));H>Y.area&&(Y.area=H,Y.serialized.bitmap.close(),Y.serialized.bitmap=ee(this,A,Mt).call(this,!1))}return W}};C=new WeakMap,x=new WeakMap,m=new WeakMap,j=new WeakMap,U=new WeakMap,v=new WeakMap,y=new WeakMap,R=new WeakMap,b=new WeakMap,f=new WeakMap,A=new WeakSet,bt=function(V,X=!1){if(!V){this.remove();return}ce(this,C,V.bitmap),X||(ce(this,x,V.id),ce(this,b,V.isSvg)),ee(this,A,fn).call(this)},yt=function(){ce(this,m,null),this._uiManager.enableWaiting(!1),e(this,v)&&this.div.focus()},Ft=function(){if(e(this,x)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(e(this,x)).then(X=>ee(this,A,bt).call(this,X,!0)).finally(()=>ee(this,A,yt).call(this));return}if(e(this,j)){const X=e(this,j);ce(this,j,null),this._uiManager.enableWaiting(!0),ce(this,m,this._uiManager.imageManager.getFromUrl(X).then(W=>ee(this,A,bt).call(this,W)).finally(()=>ee(this,A,yt).call(this)));return}if(e(this,U)){const X=e(this,U);ce(this,U,null),this._uiManager.enableWaiting(!0),ce(this,m,this._uiManager.imageManager.getFromFile(X).then(W=>ee(this,A,bt).call(this,W)).finally(()=>ee(this,A,yt).call(this)));return}const V=document.createElement("input");V.type="file",V.accept=w.supportedTypesStr,ce(this,m,new Promise(X=>{V.addEventListener("change",async()=>{if(!V.files||V.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const W=await this._uiManager.imageManager.getFromFile(V.files[0]);ee(this,A,bt).call(this,W)}X()}),V.addEventListener("cancel",()=>{this.remove(),X()})}).finally(()=>ee(this,A,yt).call(this))),V.click()},fn=function(){const{div:V}=this;let{width:X,height:W}=e(this,C);const[Q,T]=this.pageDimensions,H=.75;if(this.width)X=this.width*Q,W=this.height*T;else if(X>H*Q||W>H*T){const i=Math.min(H*Q/X,H*T/W);X*=i,W*=i}const[Y,E]=this.parentDimensions;this.setDims(X*Y/Q,W*E/T),this._uiManager.enableWaiting(!1);const s=ce(this,v,document.createElement("canvas"));V.append(s),V.hidden=!1,ee(this,A,pn).call(this,X,W),ee(this,A,Kn).call(this),e(this,f)||(this.parent.addUndoableEditor(this),ce(this,f,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Xn=function(V,X){var H;const[W,Q]=this.parentDimensions;this.width=V/W,this.height=X/Q,this.setDims(V,X),(H=this._initialOptions)!=null&&H.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,e(this,R)!==null&&clearTimeout(e(this,R)),ce(this,R,setTimeout(()=>{ce(this,R,null),ee(this,A,pn).call(this,V,X)},200))},Yn=function(V,X){const{width:W,height:Q}=e(this,C);let T=W,H=Q,Y=e(this,C);for(;T>2*V||H>2*X;){const E=T,s=H;T>2*V&&(T=T>=16384?Math.floor(T/2)-1:Math.ceil(T/2)),H>2*X&&(H=H>=16384?Math.floor(H/2)-1:Math.ceil(H/2));const i=new OffscreenCanvas(T,H);i.getContext("2d").drawImage(Y,0,0,E,s,0,0,T,H),Y=i.transferToImageBitmap()}return Y},pn=function(V,X){V=Math.ceil(V),X=Math.ceil(X);const W=e(this,v);if(!W||W.width===V&&W.height===X)return;W.width=V,W.height=X;const Q=e(this,b)?e(this,C):ee(this,A,Yn).call(this,V,X),T=W.getContext("2d");T.filter=this._uiManager.hcmFilter,T.drawImage(Q,0,0,Q.width,Q.height,0,0,V,X)},Mt=function(V){if(V){if(e(this,b)){const Q=this._uiManager.imageManager.getSvgUrl(e(this,x));if(Q)return Q}const X=document.createElement("canvas");return{width:X.width,height:X.height}=e(this,C),X.getContext("2d").drawImage(e(this,C),0,0),X.toDataURL()}if(e(this,b)){const[X,W]=this.pageDimensions,Q=Math.round(this.width*X*q.PixelsPerInch.PDF_TO_CSS_UNITS),T=Math.round(this.height*W*q.PixelsPerInch.PDF_TO_CSS_UNITS),H=new OffscreenCanvas(Q,T);return H.getContext("2d").drawImage(e(this,C),0,0,e(this,C).width,e(this,C).height,0,0,Q,T),H.transferToImageBitmap()}return structuredClone(e(this,C))},Kn=function(){ce(this,y,new ResizeObserver(V=>{const X=V[0].contentRect;X.width&&X.height&&ee(this,A,Xn).call(this,X.width,X.height)})),e(this,y).observe(this.div)},Je(w,"_type","stamp");let he=w;t.StampEditor=he}],__webpack_module_cache__={};function __w_pdfjs_require__(P){var t=__webpack_module_cache__[P];if(t!==void 0)return t.exports;var k=__webpack_module_cache__[P]={exports:{}};return __webpack_modules__[P](k,k.exports,__w_pdfjs_require__),k.exports}var __webpack_exports__={};return(()=>{var P=__webpack_exports__;Object.defineProperty(P,"__esModule",{value:!0}),Object.defineProperty(P,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(P,"AnnotationEditorLayer",{enumerable:!0,get:function(){return q.AnnotationEditorLayer}}),Object.defineProperty(P,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(P,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(P,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return $.AnnotationEditorUIManager}}),Object.defineProperty(P,"AnnotationLayer",{enumerable:!0,get:function(){return he.AnnotationLayer}}),Object.defineProperty(P,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(P,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(P,"DOMSVGFactory",{enumerable:!0,get:function(){return n.DOMSVGFactory}}),Object.defineProperty(P,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(P,"GlobalWorkerOptions",{enumerable:!0,get:function(){return C.GlobalWorkerOptions}}),Object.defineProperty(P,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(P,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(P,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(P,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(P,"PDFDataRangeTransport",{enumerable:!0,get:function(){return k.PDFDataRangeTransport}}),Object.defineProperty(P,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(P,"PDFWorker",{enumerable:!0,get:function(){return k.PDFWorker}}),Object.defineProperty(P,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(P,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(P,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(P,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(P,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(P,"SVGGraphics",{enumerable:!0,get:function(){return k.SVGGraphics}}),Object.defineProperty(P,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(P,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(P,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(P,"XfaLayer",{enumerable:!0,get:function(){return x.XfaLayer}}),Object.defineProperty(P,"build",{enumerable:!0,get:function(){return k.build}}),Object.defineProperty(P,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(P,"getDocument",{enumerable:!0,get:function(){return k.getDocument}}),Object.defineProperty(P,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(P,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(P,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(P,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(P,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(P,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(P,"noContextMenu",{enumerable:!0,get:function(){return n.noContextMenu}}),Object.defineProperty(P,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(P,"renderTextLayer",{enumerable:!0,get:function(){return c.renderTextLayer}}),Object.defineProperty(P,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(P,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(P,"updateTextLayer",{enumerable:!0,get:function(){return c.updateTextLayer}}),Object.defineProperty(P,"version",{enumerable:!0,get:function(){return k.version}});var t=__w_pdfjs_require__(1),k=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),c=__w_pdfjs_require__(26),q=__w_pdfjs_require__(27),$=__w_pdfjs_require__(5),he=__w_pdfjs_require__(29),C=__w_pdfjs_require__(14),x=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule;var propTypes={exports:{}},reactIs={exports:{}},reactIs_development={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var P=typeof Symbol=="function"&&Symbol.for,t=P?Symbol.for("react.element"):60103,k=P?Symbol.for("react.portal"):60106,n=P?Symbol.for("react.fragment"):60107,c=P?Symbol.for("react.strict_mode"):60108,q=P?Symbol.for("react.profiler"):60114,$=P?Symbol.for("react.provider"):60109,he=P?Symbol.for("react.context"):60110,C=P?Symbol.for("react.async_mode"):60111,x=P?Symbol.for("react.concurrent_mode"):60111,m=P?Symbol.for("react.forward_ref"):60112,j=P?Symbol.for("react.suspense"):60113,U=P?Symbol.for("react.suspense_list"):60120,v=P?Symbol.for("react.memo"):60115,y=P?Symbol.for("react.lazy"):60116,R=P?Symbol.for("react.block"):60121,b=P?Symbol.for("react.fundamental"):60117,f=P?Symbol.for("react.responder"):60118,A=P?Symbol.for("react.scope"):60119;function O(te){return typeof te=="string"||typeof te=="function"||te===n||te===x||te===q||te===c||te===j||te===U||typeof te=="object"&&te!==null&&(te.$$typeof===y||te.$$typeof===v||te.$$typeof===$||te.$$typeof===he||te.$$typeof===m||te.$$typeof===b||te.$$typeof===f||te.$$typeof===A||te.$$typeof===R)}function _(te){if(typeof te=="object"&&te!==null){var ye=te.$$typeof;switch(ye){case t:var me=te.type;switch(me){case C:case x:case n:case q:case c:case j:return me;default:var _e=me&&me.$$typeof;switch(_e){case he:case m:case y:case v:case $:return _e;default:return ye}}case k:return ye}}}var o=C,d=x,l=he,h=$,u=t,I=m,a=n,w=y,g=v,z=k,V=q,X=c,W=j,Q=!1;function T(te){return Q||(Q=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),H(te)||_(te)===C}function H(te){return _(te)===x}function Y(te){return _(te)===he}function E(te){return _(te)===$}function s(te){return typeof te=="object"&&te!==null&&te.$$typeof===t}function i(te){return _(te)===m}function p(te){return _(te)===n}function M(te){return _(te)===y}function L(te){return _(te)===v}function N(te){return _(te)===k}function J(te){return _(te)===q}function re(te){return _(te)===c}function de(te){return _(te)===j}reactIs_development.AsyncMode=o,reactIs_development.ConcurrentMode=d,reactIs_development.ContextConsumer=l,reactIs_development.ContextProvider=h,reactIs_development.Element=u,reactIs_development.ForwardRef=I,reactIs_development.Fragment=a,reactIs_development.Lazy=w,reactIs_development.Memo=g,reactIs_development.Portal=z,reactIs_development.Profiler=V,reactIs_development.StrictMode=X,reactIs_development.Suspense=W,reactIs_development.isAsyncMode=T,reactIs_development.isConcurrentMode=H,reactIs_development.isContextConsumer=Y,reactIs_development.isContextProvider=E,reactIs_development.isElement=s,reactIs_development.isForwardRef=i,reactIs_development.isFragment=p,reactIs_development.isLazy=M,reactIs_development.isMemo=L,reactIs_development.isPortal=N,reactIs_development.isProfiler=J,reactIs_development.isStrictMode=re,reactIs_development.isSuspense=de,reactIs_development.isValidElementType=O,reactIs_development.typeOf=_})();reactIs.exports=reactIs_development;var reactIsExports=reactIs.exports;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(P){if(P==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(P)}function shouldUseNative(){try{if(!Object.assign)return!1;var P=new String("abc");if(P[5]="de",Object.getOwnPropertyNames(P)[0]==="5")return!1;for(var t={},k=0;k<10;k++)t["_"+String.fromCharCode(k)]=k;var n=Object.getOwnPropertyNames(t).map(function(q){return t[q]});if(n.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(q){c[q]=q}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(P,t){for(var k,n=toObject(P),c,q=1;q<arguments.length;q++){k=Object(arguments[q]);for(var $ in k)hasOwnProperty.call(k,$)&&(n[$]=k[$]);if(getOwnPropertySymbols){c=getOwnPropertySymbols(k);for(var he=0;he<c.length;he++)propIsEnumerable.call(k,c[he])&&(n[c[he]]=k[c[he]])}}return n},ReactPropTypesSecret$2="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$2,has$3=Function.call.bind(Object.prototype.hasOwnProperty),printWarning$2=function(){};{var ReactPropTypesSecret$1=ReactPropTypesSecret_1,loggedTypeFailures={},has$2=has$3;printWarning$2=function(P){var t="Warning: "+P;typeof console<"u"&&console.error(t);try{throw new Error(t)}catch{}}}function checkPropTypes$1(P,t,k,n,c){for(var q in P)if(has$2(P,q)){var $;try{if(typeof P[q]!="function"){var he=Error((n||"React class")+": "+k+" type `"+q+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof P[q]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw he.name="Invariant Violation",he}$=P[q](t,q,n,k,null,ReactPropTypesSecret$1)}catch(x){$=x}if($&&!($ instanceof Error)&&printWarning$2((n||"React class")+": type specification of "+k+" `"+q+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof $+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),$ instanceof Error&&!($.message in loggedTypeFailures)){loggedTypeFailures[$.message]=!0;var C=c?c():"";printWarning$2("Failed "+k+" type: "+$.message+(C??""))}}}checkPropTypes$1.resetWarningCache=function(){loggedTypeFailures={}};var checkPropTypes_1=checkPropTypes$1,ReactIs$1=reactIsExports,assign=objectAssign,ReactPropTypesSecret=ReactPropTypesSecret_1,has$1=has$3,checkPropTypes=checkPropTypes_1,printWarning$1=function(){};printWarning$1=function(P){var t="Warning: "+P;typeof console<"u"&&console.error(t);try{throw new Error(t)}catch{}};function emptyFunctionThatReturnsNull(){return null}var factoryWithTypeCheckers=function(P,t){var k=typeof Symbol=="function"&&Symbol.iterator,n="@@iterator";function c(g){var z=g&&(k&&g[k]||g[n]);if(typeof z=="function")return z}var q="<<anonymous>>",$={array:m("array"),bigint:m("bigint"),bool:m("boolean"),func:m("function"),number:m("number"),object:m("object"),string:m("string"),symbol:m("symbol"),any:j(),arrayOf:U,element:v(),elementType:y(),instanceOf:R,node:O(),objectOf:f,oneOf:b,oneOfType:A,shape:o,exact:d};function he(g,z){return g===z?g!==0||1/g===1/z:g!==g&&z!==z}function C(g,z){this.message=g,this.data=z&&typeof z=="object"?z:{},this.stack=""}C.prototype=Error.prototype;function x(g){var z={},V=0;function X(Q,T,H,Y,E,s,i){if(Y=Y||q,s=s||H,i!==ReactPropTypesSecret){if(t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}else if(typeof console<"u"){var M=Y+":"+H;!z[M]&&V<3&&(printWarning$1("You are manually calling a React.PropTypes validation function for the `"+s+"` prop on `"+Y+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),z[M]=!0,V++)}}return T[H]==null?Q?T[H]===null?new C("The "+E+" `"+s+"` is marked as required "+("in `"+Y+"`, but its value is `null`.")):new C("The "+E+" `"+s+"` is marked as required in "+("`"+Y+"`, but its value is `undefined`.")):null:g(T,H,Y,E,s)}var W=X.bind(null,!1);return W.isRequired=X.bind(null,!0),W}function m(g){function z(V,X,W,Q,T,H){var Y=V[X],E=u(Y);if(E!==g){var s=I(Y);return new C("Invalid "+Q+" `"+T+"` of type "+("`"+s+"` supplied to `"+W+"`, expected ")+("`"+g+"`."),{expectedType:g})}return null}return x(z)}function j(){return x(emptyFunctionThatReturnsNull)}function U(g){function z(V,X,W,Q,T){if(typeof g!="function")return new C("Property `"+T+"` of component `"+W+"` has invalid PropType notation inside arrayOf.");var H=V[X];if(!Array.isArray(H)){var Y=u(H);return new C("Invalid "+Q+" `"+T+"` of type "+("`"+Y+"` supplied to `"+W+"`, expected an array."))}for(var E=0;E<H.length;E++){var s=g(H,E,W,Q,T+"["+E+"]",ReactPropTypesSecret);if(s instanceof Error)return s}return null}return x(z)}function v(){function g(z,V,X,W,Q){var T=z[V];if(!P(T)){var H=u(T);return new C("Invalid "+W+" `"+Q+"` of type "+("`"+H+"` supplied to `"+X+"`, expected a single ReactElement."))}return null}return x(g)}function y(){function g(z,V,X,W,Q){var T=z[V];if(!ReactIs$1.isValidElementType(T)){var H=u(T);return new C("Invalid "+W+" `"+Q+"` of type "+("`"+H+"` supplied to `"+X+"`, expected a single ReactElement type."))}return null}return x(g)}function R(g){function z(V,X,W,Q,T){if(!(V[X]instanceof g)){var H=g.name||q,Y=w(V[X]);return new C("Invalid "+Q+" `"+T+"` of type "+("`"+Y+"` supplied to `"+W+"`, expected ")+("instance of `"+H+"`."))}return null}return x(z)}function b(g){if(!Array.isArray(g))return arguments.length>1?printWarning$1("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):printWarning$1("Invalid argument supplied to oneOf, expected an array."),emptyFunctionThatReturnsNull;function z(V,X,W,Q,T){for(var H=V[X],Y=0;Y<g.length;Y++)if(he(H,g[Y]))return null;var E=JSON.stringify(g,function(i,p){var M=I(p);return M==="symbol"?String(p):p});return new C("Invalid "+Q+" `"+T+"` of value `"+String(H)+"` "+("supplied to `"+W+"`, expected one of "+E+"."))}return x(z)}function f(g){function z(V,X,W,Q,T){if(typeof g!="function")return new C("Property `"+T+"` of component `"+W+"` has invalid PropType notation inside objectOf.");var H=V[X],Y=u(H);if(Y!=="object")return new C("Invalid "+Q+" `"+T+"` of type "+("`"+Y+"` supplied to `"+W+"`, expected an object."));for(var E in H)if(has$1(H,E)){var s=g(H,E,W,Q,T+"."+E,ReactPropTypesSecret);if(s instanceof Error)return s}return null}return x(z)}function A(g){if(!Array.isArray(g))return printWarning$1("Invalid argument supplied to oneOfType, expected an instance of array."),emptyFunctionThatReturnsNull;for(var z=0;z<g.length;z++){var V=g[z];if(typeof V!="function")return printWarning$1("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+a(V)+" at index "+z+"."),emptyFunctionThatReturnsNull}function X(W,Q,T,H,Y){for(var E=[],s=0;s<g.length;s++){var i=g[s],p=i(W,Q,T,H,Y,ReactPropTypesSecret);if(p==null)return null;p.data&&has$1(p.data,"expectedType")&&E.push(p.data.expectedType)}var M=E.length>0?", expected one of type ["+E.join(", ")+"]":"";return new C("Invalid "+H+" `"+Y+"` supplied to "+("`"+T+"`"+M+"."))}return x(X)}function O(){function g(z,V,X,W,Q){return l(z[V])?null:new C("Invalid "+W+" `"+Q+"` supplied to "+("`"+X+"`, expected a ReactNode."))}return x(g)}function _(g,z,V,X,W){return new C((g||"React class")+": "+z+" type `"+V+"."+X+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+W+"`.")}function o(g){function z(V,X,W,Q,T){var H=V[X],Y=u(H);if(Y!=="object")return new C("Invalid "+Q+" `"+T+"` of type `"+Y+"` "+("supplied to `"+W+"`, expected `object`."));for(var E in g){var s=g[E];if(typeof s!="function")return _(W,Q,T,E,I(s));var i=s(H,E,W,Q,T+"."+E,ReactPropTypesSecret);if(i)return i}return null}return x(z)}function d(g){function z(V,X,W,Q,T){var H=V[X],Y=u(H);if(Y!=="object")return new C("Invalid "+Q+" `"+T+"` of type `"+Y+"` "+("supplied to `"+W+"`, expected `object`."));var E=assign({},V[X],g);for(var s in E){var i=g[s];if(has$1(g,s)&&typeof i!="function")return _(W,Q,T,s,I(i));if(!i)return new C("Invalid "+Q+" `"+T+"` key `"+s+"` supplied to `"+W+"`.\nBad object: "+JSON.stringify(V[X],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(g),null,"  "));var p=i(H,s,W,Q,T+"."+s,ReactPropTypesSecret);if(p)return p}return null}return x(z)}function l(g){switch(typeof g){case"number":case"string":case"undefined":return!0;case"boolean":return!g;case"object":if(Array.isArray(g))return g.every(l);if(g===null||P(g))return!0;var z=c(g);if(z){var V=z.call(g),X;if(z!==g.entries){for(;!(X=V.next()).done;)if(!l(X.value))return!1}else for(;!(X=V.next()).done;){var W=X.value;if(W&&!l(W[1]))return!1}}else return!1;return!0;default:return!1}}function h(g,z){return g==="symbol"?!0:z?z["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&z instanceof Symbol:!1}function u(g){var z=typeof g;return Array.isArray(g)?"array":g instanceof RegExp?"object":h(z,g)?"symbol":z}function I(g){if(typeof g>"u"||g===null)return""+g;var z=u(g);if(z==="object"){if(g instanceof Date)return"date";if(g instanceof RegExp)return"regexp"}return z}function a(g){var z=I(g);switch(z){case"array":case"object":return"an "+z;case"boolean":case"date":case"regexp":return"a "+z;default:return z}}function w(g){return!g.constructor||!g.constructor.name?q:g.constructor.name}return $.checkPropTypes=checkPropTypes,$.resetWarningCache=checkPropTypes.resetWarningCache,$.PropTypes=$,$};{var ReactIs=reactIsExports,throwOnDirectAccess=!0;propTypes.exports=factoryWithTypeCheckers(ReactIs.isElement,throwOnDirectAccess)}var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var __spreadArray=function(P,t,k){if(k||arguments.length===2)for(var n=0,c=t.length,q;n<c;n++)(q||!(n in t))&&(q||(q=Array.prototype.slice.call(t,0,n)),q[n]=t[n]);return P.concat(q||Array.prototype.slice.call(t))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(P,t){var k={};return allEvents.forEach(function(n){var c=P[n];c&&(t?k[n]=function(q){return c(q,t(n))}:k[n]=c)}),k}function makeCancellablePromise(P){var t=!1,k=new Promise(function(n,c){P.then(function(q){return!t&&n(q)}).catch(function(q){return!t&&c(q)})});return{promise:k,cancel:function(){t=!0}}}function r(P){var t,k,n="";if(typeof P=="string"||typeof P=="number")n+=P;else if(typeof P=="object")if(Array.isArray(P)){var c=P.length;for(t=0;t<c;t++)P[t]&&(k=r(P[t]))&&(n&&(n+=" "),n+=k)}else for(k in P)P[k]&&(n&&(n+=" "),n+=k);return n}function clsx(){for(var P,t,k=0,n="",c=arguments.length;k<c;k++)(P=arguments[k])&&(t=r(P))&&(n&&(n+=" "),n+=t);return n}var prefix="Invariant failed";function invariant(P,t){if(!P){var k=typeof t=="function"?t():t,n=k?"".concat(prefix,": ").concat(k):prefix;throw new Error(n)}}var warning=function(){};{var printWarning=function(t,k){var n=arguments.length;k=new Array(n>1?n-1:0);for(var c=1;c<n;c++)k[c-1]=arguments[c];var q=0,$="Warning: "+t.replace(/%s/g,function(){return k[q++]});typeof console<"u"&&console.error($);try{throw new Error($)}catch{}};warning=function(P,t,k){var n=arguments.length;k=new Array(n>2?n-2:0);for(var c=2;c<n;c++)k[c-2]=arguments[c];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");P||printWarning.apply(null,[t].concat(k))}}var warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(P,t,k){for(k of P.keys())if(dequal(k,t))return k}function dequal(P,t){var k,n,c;if(P===t)return!0;if(P&&t&&(k=P.constructor)===t.constructor){if(k===Date)return P.getTime()===t.getTime();if(k===RegExp)return P.toString()===t.toString();if(k===Array){if((n=P.length)===t.length)for(;n--&&dequal(P[n],t[n]););return n===-1}if(k===Set){if(P.size!==t.size)return!1;for(n of P)if(c=n,c&&typeof c=="object"&&(c=find(t,c),!c)||!t.has(c))return!1;return!0}if(k===Map){if(P.size!==t.size)return!1;for(n of P)if(c=n[0],c&&typeof c=="object"&&(c=find(t,c),!c)||!dequal(n[1],t.get(c)))return!1;return!0}if(k===ArrayBuffer)P=new Uint8Array(P),t=new Uint8Array(t);else if(k===DataView){if((n=P.byteLength)===t.byteLength)for(;n--&&P.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(P)){if((n=P.byteLength)===t.byteLength)for(;n--&&P[n]===t[n];);return n===-1}if(!k||typeof P=="object"){n=0;for(k in P)if(has.call(P,k)&&++n&&!has.call(t,k)||!(k in t)||!dequal(P[k],t[k]))return!1;return Object.keys(t).length===n}}return P!==P&&t!==t}const DocumentContext=reactExports.createContext(null);function Message({children:P,type:t}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${t}`},P)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(t){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(k=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(t,"Destination is not specified."),typeof t=="string"?this.pdfDocument.getDestination(t).then(k):Array.isArray(t)?k(t):t.then(k)}).then(k=>{invariant(Array.isArray(k),`"${k}" is not a valid destination array.`);const n=k[0];new Promise(c=>{invariant(this.pdfDocument,"PDF document not loaded."),n instanceof Object?this.pdfDocument.getPageIndex(n).then(q=>{c(q)}).catch(()=>{invariant(!1,`"${n}" is not a valid page reference.`)}):typeof n=="number"?c(n):invariant(!1,`"${n}" is not a valid destination reference.`)}).then(c=>{const q=c+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(q>=1&&q<=this.pagesCount,`"${q}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:k,pageIndex:c,pageNumber:q})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const k=t-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(t>=1&&t<=this.pagesCount,`"${t}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:k,pageNumber:t})}addLinkAttributes(t,k,n){t.href=k,t.rel=this.externalLinkRel||DEFAULT_LINK_REL,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(P){return typeof P<"u"}function isProvided(P){return isDefined(P)&&P!==null}function isString(P){return typeof P=="string"}function isArrayBuffer(P){return P instanceof ArrayBuffer}function isBlob(P){return invariant(isBrowser,"isBlob can only be used in a browser environment"),P instanceof Blob}function isDataURI(P){return isString(P)&&/^data:/.test(P)}function dataURItoByteString(P){invariant(isDataURI(P),"Invalid data URI.");const[t="",k=""]=P.split(",");return t.split(";").indexOf("base64")!==-1?atob(k):unescape(k)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(P){P&&P.cancel&&P.cancel()}function makePageCallback(P,t){return Object.defineProperty(P,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(P,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(P,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(P,"originalHeight",{get(){return this.view[3]},configurable:!0}),P}function isCancelException(P){return P.name==="RenderingCancelledException"}function loadFromFile(P){return new Promise((t,k)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return k(new Error("Error while reading a file."));t(n.result)},n.onerror=c=>{if(!c.target)return k(new Error("Error while reading a file."));const{error:q}=c.target;if(!q)return k(new Error("Error while reading a file."));switch(q.code){case q.NOT_FOUND_ERR:return k(new Error("Error while reading a file: File not found."));case q.SECURITY_ERR:return k(new Error("Error while reading a file: Security error."));case q.ABORT_ERR:return k(new Error("Error while reading a file: Aborted."));default:return k(new Error("Error while reading a file."))}},n.readAsArrayBuffer(P)})}function reducer(P,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return P}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs,eventProps=(()=>{const P={};return allEvents.forEach(t=>{P[t]=PropTypes.func}),P})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function P(t,k,n){const{[k]:c,pageNumber:q,pdf:$}=t;if(!isDefined($))return null;if(isDefined(c)){if(typeof c!="number")return new Error(`\`${k}\` of type \`${typeof c}\` supplied to \`${n}\`, expected \`number\`.`);if(c<0)return new Error(`Expected \`${k}\` to be greater or equal to 0.`);const{numPages:he}=$;if(c+1>he)return new Error(`Expected \`${k}\` to be less or equal to ${he-1}.`)}else if(!isDefined(q))return new Error(`\`${k}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${n}\`.`);return null},isPageNumber=function P(t,k,n){const{[k]:c,pageIndex:q,pdf:$}=t;if(!isDefined($))return null;if(isDefined(c)){if(typeof c!="number")return new Error(`\`${k}\` of type \`${typeof c}\` supplied to \`${n}\`, expected \`number\`.`);if(c<1)return new Error(`Expected \`${k}\` to be greater or equal to 1.`);const{numPages:he}=$;if(c>he)return new Error(`Expected \`${k}\` to be less or equal to ${he}.`)}else if(!isDefined(q))return new Error(`\`${k}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${n}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=function(P,t,k,n){function c(q){return q instanceof k?q:new k(function($){$(q)})}return new(k||(k=Promise))(function(q,$){function he(m){try{x(n.next(m))}catch(j){$(j)}}function C(m){try{x(n.throw(m))}catch(j){$(j)}}function x(m){m.done?q(m.value):c(m.value).then(he,C)}x((n=n.apply(P,t||[])).next())})},__rest$1=function(P,t){var k={};for(var n in P)Object.prototype.hasOwnProperty.call(P,n)&&t.indexOf(n)<0&&(k[n]=P[n]);if(P!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,n=Object.getOwnPropertySymbols(P);c<n.length;c++)t.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(P,n[c])&&(k[n[c]]=P[n[c]]);return k};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(P,t)=>{switch(t){case PasswordResponses.NEED_PASSWORD:{const k=prompt("Enter the password to open this PDF file.");P(k);break}case PasswordResponses.INCORRECT_PASSWORD:{const k=prompt("Invalid password. Please try again.");P(k);break}}};function isParameterObject(P){return typeof P=="object"&&P!==null&&("data"in P||"range"in P||"url"in P)}const Document=reactExports.forwardRef(function P(t,k){var{children:n,className:c,error:q="Failed to load PDF file.",externalLinkRel:$,externalLinkTarget:he,file:C,inputRef:x,imageResourcesPath:m,loading:j="Loading PDF…",noData:U="No PDF file specified.",onItemClick:v,onLoadError:y,onLoadProgress:R,onLoadSuccess:b,onPassword:f=defaultOnPassword,onSourceError:A,onSourceSuccess:O,options:_,renderMode:o,rotate:d}=t,l=__rest$1(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[h,u]=useResolver(),{value:I,error:a}=h,[w,g]=useResolver(),{value:z,error:V}=w,X=reactExports.useRef(new LinkService),W=reactExports.useRef([]),Q=reactExports.useRef(),T=reactExports.useRef();reactExports.useEffect(()=>{C&&C!==Q.current&&isParameterObject(C)&&(warning$1(!dequal(C,Q.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Q.current=C)},[C]),reactExports.useEffect(()=>{_&&_!==T.current&&(warning$1(!dequal(_,T.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),T.current=_)},[_]);const H=reactExports.useRef({scrollPageIntoView:ne=>{const{dest:se,pageNumber:S,pageIndex:B=S-1}=ne;if(v){v({dest:se,pageIndex:B,pageNumber:S});return}const Z=W.current[B];if(Z){Z.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${S} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(k,()=>({linkService:X,pages:W,viewer:H}),[]);function Y(){O&&O()}function E(){a&&(warning$1(!1,a.toString()),A&&A(a))}function s(){u({type:"RESET"})}reactExports.useEffect(s,[C,u]);const i=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!C)return null;if(typeof C=="string")return isDataURI(C)?{data:dataURItoByteString(C)}:(displayCORSWarning(),{url:C});if(C instanceof PDFDataRangeTransport)return{range:C};if(isArrayBuffer(C))return{data:C};if(isBrowser&&isBlob(C))return{data:yield loadFromFile(C)};if(invariant(typeof C=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject(C),"Invalid parameter object: need either .data, .range or .url"),"url"in C&&typeof C.url=="string"){if(isDataURI(C.url)){const{url:ne}=C,se=__rest$1(C,["url"]),S=dataURItoByteString(ne);return Object.assign({data:S},se)}displayCORSWarning()}return C}),[C]);reactExports.useEffect(()=>{const ne=makeCancellablePromise(i());return ne.promise.then(se=>{u({type:"RESOLVE",value:se})}).catch(se=>{u({type:"REJECT",error:se})}),()=>{cancelRunningTask(ne)}},[i,u]),reactExports.useEffect(()=>{if(!(typeof I>"u")){if(I===!1){E();return}Y()}},[I]);function p(){z&&(b&&b(z),W.current=new Array(z.numPages),X.current.setDocument(z))}function M(){V&&(warning$1(!1,V.toString()),y&&y(V))}function L(){g({type:"RESET"})}reactExports.useEffect(L,[g,I]);function N(){if(!I)return;const ne=Object.assign(Object.assign({},_),{isEvalSupported:!1}),se=Object.assign(Object.assign({},I),ne),S=pdfjs.getDocument(se);R&&(S.onProgress=R),f&&(S.onPassword=f);const B=S;return B.promise.then(Z=>{g({type:"RESOLVE",value:Z})}).catch(Z=>{B.destroyed||g({type:"REJECT",error:Z})}),()=>{B.destroy()}}reactExports.useEffect(N,[_,g,I]),reactExports.useEffect(()=>{if(!(typeof z>"u")){if(z===!1){M();return}p()}},[z]);function J(){X.current.setViewer(H.current),X.current.setExternalLinkRel($),X.current.setExternalLinkTarget(he)}reactExports.useEffect(J,[$,he]);function re(ne,se){W.current[ne]=se}function de(ne){delete W.current[ne]}const te=reactExports.useMemo(()=>({imageResourcesPath:m,linkService:X.current,onItemClick:v,pdf:z,registerPage:re,renderMode:o,rotate:d,unregisterPage:de}),[m,v,z,o,d]),ye=reactExports.useMemo(()=>makeEventProps(l,()=>z),[l,z]);function me(){return React.createElement(DocumentContext.Provider,{value:te},n)}function _e(){return C?z==null?React.createElement(Message,{type:"loading"},typeof j=="function"?j():j):z===!1?React.createElement(Message,{type:"error"},typeof q=="function"?q():q):me():React.createElement(Message,{type:"no-data"},typeof U=="function"?U():U)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",c),ref:x,style:{"--scale-factor":"1"}},ye),_e())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var P=[],t=0;t<arguments.length;t++)P[t]=arguments[t];var k=P.filter(Boolean);if(k.length<=1){var n=k[0];return n||null}return function(q){k.forEach(function($){typeof $=="function"?$(q):$&&($.current=q)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(P){return P in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(P){return"children"in P}function isStructTreeNodeWithOnlyContentChild(P){return isStructTreeNode(P)?P.children.length===1&&0 in P.children&&"id"in P.children[0]:!1}function getRoleAttributes(P){const t={};if(isStructTreeNode(P)){const{role:k}=P,n=k.match(HEADING_PATTERN);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if(isPdfRole(k)){const c=PDF_ROLE_TO_HTML_ROLE[k];c&&(t.role=c)}}return t}function getBaseAttributes(P){const t={};if(isStructTreeNode(P)){if(P.alt!==void 0&&(t["aria-label"]=P.alt),P.lang!==void 0&&(t.lang=P.lang),isStructTreeNodeWithOnlyContentChild(P)){const[k]=P.children;if(k){const n=getBaseAttributes(k);return Object.assign(Object.assign({},t),n)}}}else"id"in P&&(t["aria-owns"]=P.id);return t}function getAttributes(P){return P?Object.assign(Object.assign({},getRoleAttributes(P)),getBaseAttributes(P)):null}function StructTreeItem({className:P,node:t}){const k=reactExports.useMemo(()=>getAttributes(t),[t]),n=reactExports.useMemo(()=>!isStructTreeNode(t)||isStructTreeNodeWithOnlyContentChild(t)?null:t.children.map((c,q)=>React.createElement(StructTreeItem,{key:q,node:c})),[t]);return React.createElement("span",Object.assign({className:P},k),n)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const P=usePageContext();invariant(P,"Unable to find Page context.");const{onGetStructTreeError:t,onGetStructTreeSuccess:k}=P,[n,c]=useResolver(),{value:q,error:$}=n,{customTextRenderer:he,page:C}=P;function x(){q&&k&&k(q)}function m(){$&&(warning$1(!1,$.toString()),t&&t($))}function j(){c({type:"RESET"})}reactExports.useEffect(j,[c,C]);function U(){if(he||!C)return;const v=makeCancellablePromise(C.getStructTree()),y=v;return v.promise.then(R=>{c({type:"RESOLVE",value:R})}).catch(R=>{c({type:"REJECT",error:R})}),()=>cancelRunningTask(y)}return reactExports.useEffect(U,[he,C,c]),reactExports.useEffect(()=>{if(q!==void 0){if(q===!1){m();return}x()}},[q]),q?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:q}):null}const ANNOTATION_MODE=pdfjs.AnnotationMode;function PageCanvas(P){const t=usePageContext();invariant(t,"Unable to find Page context.");const k=Object.assign(Object.assign({},t),P),{_className:n,canvasBackground:c,devicePixelRatio:q=getDevicePixelRatio(),onRenderError:$,onRenderSuccess:he,page:C,renderForms:x,renderTextLayer:m,rotate:j,scale:U}=k,{canvasRef:v}=P;invariant(C,"Attempted to render page canvas, but no page was specified.");const y=reactExports.useRef(null);function R(){C&&he&&he(makePageCallback(C,U))}function b(o){isCancelException(o)||(warning$1(!1,o.toString()),$&&$(o))}const f=reactExports.useMemo(()=>C.getViewport({scale:U*q,rotation:j}),[q,C,j,U]),A=reactExports.useMemo(()=>C.getViewport({scale:U,rotation:j}),[C,j,U]);function O(){if(!C)return;C.cleanup();const{current:o}=y;if(!o)return;o.width=f.width,o.height=f.height,o.style.width=`${Math.floor(A.width)}px`,o.style.height=`${Math.floor(A.height)}px`,o.style.visibility="hidden";const d={annotationMode:x?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:o.getContext("2d",{alpha:!1}),viewport:f};c&&(d.background=c);const l=C.render(d),h=l;return l.promise.then(()=>{o.style.visibility="",R()}).catch(b),()=>cancelRunningTask(h)}reactExports.useEffect(O,[c,y,q,C,x,f,A]);const _=reactExports.useCallback(()=>{const{current:o}=y;o&&(o.width=0,o.height=0)},[y]);return reactExports.useEffect(()=>_,[_]),React.createElement("canvas",{className:`${n}__canvas`,dir:"ltr",ref:mergeRefs(v,y),style:{display:"block",userSelect:"none"}},m?React.createElement(StructTree,null):null)}function PageSVG(){const P=usePageContext();invariant(P,"Unable to find Page context.");const{_className:t,onRenderSuccess:k,onRenderError:n,page:c,rotate:q,scale:$}=P;invariant(c,"Attempted to render page SVG, but no page was specified.");const[he,C]=useResolver(),{value:x,error:m}=he;function j(){c&&k&&k(makePageCallback(c,$))}function U(){m&&(isCancelException(m)||(warning$1(!1,m.toString()),n&&n(m)))}const v=reactExports.useMemo(()=>c.getViewport({scale:$,rotation:q}),[c,q,$]);function y(){C({type:"RESET"})}reactExports.useEffect(y,[c,C,v]);function R(){if(!c)return;const O=makeCancellablePromise(c.getOperatorList());return O.promise.then(_=>{new pdfjs.SVGGraphics(c.commonObjs,c.objs).getSVG(_,v).then(d=>{if(!(d instanceof SVGElement))throw new Error("getSVG returned unexpected result.");C({type:"RESOLVE",value:d})}).catch(d=>{C({type:"REJECT",error:d})})}).catch(_=>{C({type:"REJECT",error:_})}),()=>cancelRunningTask(O)}reactExports.useEffect(R,[c,C,v]),reactExports.useEffect(()=>{if(x!==void 0){if(x===!1){U();return}j()}},[x]);function b(O){if(!O||!x)return;O.firstElementChild||O.appendChild(x);const{width:_,height:o}=v;x.setAttribute("width",`${_}`),x.setAttribute("height",`${o}`)}const{width:f,height:A}=v;return React.createElement("div",{className:`${t}__svg`,ref:O=>b(O),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:f,height:A,userSelect:"none"}})}function isTextItem(P){return"str"in P}function TextLayer(){const P=usePageContext();invariant(P,"Unable to find Page context.");const{customTextRenderer:t,onGetTextError:k,onGetTextSuccess:n,onRenderTextLayerError:c,onRenderTextLayerSuccess:q,page:$,pageIndex:he,pageNumber:C,rotate:x,scale:m}=P;invariant($,"Attempted to load page text content, but no page was specified.");const[j,U]=useResolver(),{value:v,error:y}=j,R=reactExports.useRef(null),b=reactExports.useRef();warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function f(){v&&n&&n(v)}function A(){y&&(warning$1(!1,y.toString()),k&&k(y))}function O(){U({type:"RESET"})}reactExports.useEffect(O,[$,U]);function _(){if(!$)return;const a=makeCancellablePromise($.getTextContent()),w=a;return a.promise.then(g=>{U({type:"RESOLVE",value:g})}).catch(g=>{U({type:"REJECT",error:g})}),()=>cancelRunningTask(w)}reactExports.useEffect(_,[$,U]),reactExports.useEffect(()=>{if(v!==void 0){if(v===!1){A();return}f()}},[v]);const o=reactExports.useCallback(()=>{q&&q()},[q]),d=reactExports.useCallback(a=>{warning$1(!1,a.toString()),c&&c(a)},[c]);function l(){const a=b.current;a&&a.classList.add("active")}function h(){const a=b.current;a&&a.classList.remove("active")}const u=reactExports.useMemo(()=>$.getViewport({scale:m,rotation:x}),[$,x,m]);function I(){if(!$||!v)return;const{current:a}=R;if(!a)return;a.innerHTML="";const w=$.streamTextContent({includeMarkedContent:!0}),g={container:a,textContentSource:w,viewport:u},z=pdfjs.renderTextLayer(g),V=z;return z.promise.then(()=>{const X=document.createElement("div");X.className="endOfContent",a.append(X),b.current=X;const W=a.querySelectorAll('[role="presentation"]');if(t){let Q=0;v.items.forEach((T,H)=>{if(!isTextItem(T))return;const Y=W[Q];if(!Y)return;const E=t(Object.assign({pageIndex:he,pageNumber:C,itemIndex:H},T));Y.innerHTML=E,Q+=T.str&&T.hasEOL?2:1})}o()}).catch(d),()=>cancelRunningTask(V)}return reactExports.useLayoutEffect(I,[t,d,o,$,he,C,v,u]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:h,onMouseDown:l,ref:R})}function AnnotationLayer(){const P=useDocumentContext(),t=usePageContext();invariant(t,"Unable to find Page context.");const k=Object.assign(Object.assign({},P),t),{imageResourcesPath:n,linkService:c,onGetAnnotationsError:q,onGetAnnotationsSuccess:$,onRenderAnnotationLayerError:he,onRenderAnnotationLayerSuccess:C,page:x,pdf:m,renderForms:j,rotate:U,scale:v=1}=k;invariant(m,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),invariant(x,"Attempted to load page annotations, but no page was specified."),invariant(c,"Attempted to load page annotations, but no linkService was specified.");const[y,R]=useResolver(),{value:b,error:f}=y,A=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function O(){b&&$&&$(b)}function _(){f&&(warning$1(!1,f.toString()),q&&q(f))}function o(){R({type:"RESET"})}reactExports.useEffect(o,[R,x]);function d(){if(!x)return;const a=makeCancellablePromise(x.getAnnotations()),w=a;return a.promise.then(g=>{R({type:"RESOLVE",value:g})}).catch(g=>{R({type:"REJECT",error:g})}),()=>{cancelRunningTask(w)}}reactExports.useEffect(d,[R,x,j]),reactExports.useEffect(()=>{if(b!==void 0){if(b===!1){_();return}O()}},[b]);function l(){C&&C()}function h(a){warning$1(!1,`${a}`),he&&he(a)}const u=reactExports.useMemo(()=>x.getViewport({scale:v,rotation:U}),[x,U,v]);function I(){if(!m||!x||!c||!b)return;const{current:a}=A;if(!a)return;const w=u.clone({dontFlip:!0}),g={accessibilityManager:null,annotationCanvasMap:null,div:a,l10n:null,page:x,viewport:w},z={annotations:b,annotationStorage:m.annotationStorage,div:a,downloadManager:null,imageResourcesPath:n,linkService:c,page:x,renderForms:j,viewport:w};a.innerHTML="";try{new pdfjs.AnnotationLayer(g).render(z),l()}catch(V){h(V)}return()=>{}}return reactExports.useEffect(I,[b,n,c,x,j,u]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:A})}var __rest=function(P,t){var k={};for(var n in P)Object.prototype.hasOwnProperty.call(P,n)&&t.indexOf(n)<0&&(k[n]=P[n]);if(P!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,n=Object.getOwnPropertySymbols(P);c<n.length;c++)t.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(P,n[c])&&(k[n[c]]=P[n[c]]);return k};const defaultScale=1,Page=function P(t){const k=useDocumentContext(),n=Object.assign(Object.assign({},k),t),{_className:c="react-pdf__Page",_enableRegisterUnregisterPage:q=!0,canvasBackground:$,canvasRef:he,children:C,className:x,customRenderer:m,customTextRenderer:j,devicePixelRatio:U,error:v="Failed to load the page.",height:y,inputRef:R,loading:b="Loading page…",noData:f="No page specified.",onGetAnnotationsError:A,onGetAnnotationsSuccess:O,onGetStructTreeError:_,onGetStructTreeSuccess:o,onGetTextError:d,onGetTextSuccess:l,onLoadError:h,onLoadSuccess:u,onRenderAnnotationLayerError:I,onRenderAnnotationLayerSuccess:a,onRenderError:w,onRenderSuccess:g,onRenderTextLayerError:z,onRenderTextLayerSuccess:V,pageIndex:X,pageNumber:W,pdf:Q,registerPage:T,renderAnnotationLayer:H=!0,renderForms:Y=!1,renderMode:E="canvas",renderTextLayer:s=!0,rotate:i,scale:p=defaultScale,unregisterPage:M,width:L}=n,N=__rest(n,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[J,re]=useResolver(),{value:de,error:te}=J,ye=reactExports.useRef(null);invariant(Q,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const me=isProvided(W)?W-1:X??null,_e=W??(isProvided(X)?X+1:null),ne=i??(de?de.rotate:null),se=reactExports.useMemo(()=>{if(!de)return null;let Ie=1;const He=p??defaultScale;if(L||y){const Xe=de.getViewport({scale:1,rotation:ne});L?Ie=L/Xe.width:y&&(Ie=y/Xe.height)}return He*Ie},[y,de,ne,p,L]);function S(){return()=>{isProvided(me)&&q&&M&&M(me)}}reactExports.useEffect(S,[q,Q,me,M]);function B(){if(u){if(!de||!se)return;u(makePageCallback(de,se))}if(q&&T){if(!isProvided(me)||!ye.current)return;T(me,ye.current)}}function Z(){te&&(warning$1(!1,te.toString()),h&&h(te))}function ae(){re({type:"RESET"})}reactExports.useEffect(ae,[re,Q,me]);function ge(){if(!Q||!_e)return;const Ie=makeCancellablePromise(Q.getPage(_e)),He=Ie;return Ie.promise.then(Xe=>{re({type:"RESOLVE",value:Xe})}).catch(Xe=>{re({type:"REJECT",error:Xe})}),()=>cancelRunningTask(He)}reactExports.useEffect(ge,[re,Q,me,_e,T]),reactExports.useEffect(()=>{if(de!==void 0){if(de===!1){Z();return}B()}},[de,se]);const Se=reactExports.useMemo(()=>de&&isProvided(me)&&_e&&isProvided(ne)&&isProvided(se)?{_className:c,canvasBackground:$,customTextRenderer:j,devicePixelRatio:U,onGetAnnotationsError:A,onGetAnnotationsSuccess:O,onGetStructTreeError:_,onGetStructTreeSuccess:o,onGetTextError:d,onGetTextSuccess:l,onRenderAnnotationLayerError:I,onRenderAnnotationLayerSuccess:a,onRenderError:w,onRenderSuccess:g,onRenderTextLayerError:z,onRenderTextLayerSuccess:V,page:de,pageIndex:me,pageNumber:_e,renderForms:Y,renderTextLayer:s,rotate:ne,scale:se}:null,[c,$,j,U,A,O,_,o,d,l,I,a,w,g,z,V,de,me,_e,Y,s,ne,se]),Ae=reactExports.useMemo(()=>makeEventProps(N,()=>de&&(se?makePageCallback(de,se):void 0)),[N,de,se]),ie=`${me}@${se}/${ne}`,Pe=`${me}/${ne}`;function we(){switch(E){case"custom":return invariant(m,'renderMode was set to "custom", but no customRenderer was passed.'),React.createElement(m,{key:`${ie}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${Pe}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${ie}_canvas`,canvasRef:he})}}function We(){return s?React.createElement(TextLayer,{key:`${ie}_text`}):null}function Ue(){return H?React.createElement(AnnotationLayer,{key:`${ie}_annotations`}):null}function ze(){return React.createElement(PageContext.Provider,{value:Se},we(),We(),Ue(),C)}function Fe(){return _e?Q===null||de===void 0||de===null?React.createElement(Message,{type:"loading"},typeof b=="function"?b():b):Q===!1||de===!1?React.createElement(Message,{type:"error"},typeof v=="function"?v():v):ze():React.createElement(Message,{type:"no-data"},typeof f=="function"?f():f)}return React.createElement("div",Object.assign({className:clsx(c,x),"data-page-number":_e,ref:mergeRefs(R,ye),style:{"--scale-factor":`${se}`,backgroundColor:$||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Ae),Fe())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";pdfjs.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;const API_URL="http://localhost:5000/api",Resume=()=>{const[P,t]=reactExports.useState(null),[k,n]=reactExports.useState(!0),[c,q]=reactExports.useState(null),[$,he]=reactExports.useState(null),[C,x]=reactExports.useState(1),[m,j]=reactExports.useState(window.innerWidth);reactExports.useEffect(()=>{const b=()=>{j(window.innerWidth)};return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const U=()=>m<768?.6:m<1024?.8:1;reactExports.useEffect(()=>{(async()=>{try{n(!0);const{data:f}=await axios.get(`${API_URL}/resume/active`);f.success?t(`${API_URL}${f.resume.path}`):q("No resume found.")}catch(f){console.error("Error fetching resume:",f),q("Failed to load resume. Please try again later.")}finally{n(!1)}})()},[]);const v=({numPages:b})=>{he(b)},y=()=>{x(C<=1?1:C-1)},R=()=>{x(C>=$?$:C+1)};return k?jsxDevRuntimeExports.jsxDEV(Loader,{size:"large"},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:75,columnNumber:23},void 0):c?jsxDevRuntimeExports.jsxDEV("div",{className:"min-h-screen pt-32 pb-20",children:jsxDevRuntimeExports.jsxDEV("div",{className:"container mx-auto px-4",children:jsxDevRuntimeExports.jsxDEV("div",{className:"text-center",children:[jsxDevRuntimeExports.jsxDEV("h2",{className:"text-2xl font-bold text-red-500 mb-4",children:"Error"},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:82,columnNumber:13},void 0),jsxDevRuntimeExports.jsxDEV("p",{className:"text-gray-600 dark:text-gray-400",children:c},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:83,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:81,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:80,columnNumber:9},void 0)},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:79,columnNumber:7},void 0):jsxDevRuntimeExports.jsxDEV("div",{className:"min-h-screen pt-32 pb-20",children:jsxDevRuntimeExports.jsxDEV("div",{className:"container mx-auto px-4",children:[jsxDevRuntimeExports.jsxDEV("h1",{className:"text-4xl font-bold text-center mb-2 text-gray-900 dark:text-white",children:"My Resume"},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:93,columnNumber:9},void 0),jsxDevRuntimeExports.jsxDEV("p",{className:"text-xl text-center mb-8 text-gray-600 dark:text-gray-400",children:"Check out my experience and skills"},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:96,columnNumber:9},void 0),jsxDevRuntimeExports.jsxDEV("div",{className:"flex justify-center mb-6",children:jsxDevRuntimeExports.jsxDEV("a",{href:P,download:"Rahul_Gautam_Resume.pdf",className:"btn btn-primary px-6 py-3 rounded-full flex items-center gap-2",children:[jsxDevRuntimeExports.jsxDEV(FaDownload,{},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:107,columnNumber:13},void 0)," Download Resume"]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:102,columnNumber:11},void 0)},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:101,columnNumber:9},void 0),jsxDevRuntimeExports.jsxDEV("div",{className:"flex flex-col items-center",children:[jsxDevRuntimeExports.jsxDEV("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md mb-4",children:jsxDevRuntimeExports.jsxDEV(Document,{file:P,onLoadSuccess:v,loading:jsxDevRuntimeExports.jsxDEV(Loader,{},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:117,columnNumber:24},void 0),error:jsxDevRuntimeExports.jsxDEV("p",{className:"text-red-500",children:"Failed to load PDF document."},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:118,columnNumber:22},void 0),className:"flex justify-center",children:jsxDevRuntimeExports.jsxDEV(Page,{pageNumber:C,scale:U(),renderTextLayer:!1,renderAnnotationLayer:!1,className:"shadow-lg"},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:121,columnNumber:15},void 0)},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:114,columnNumber:13},void 0)},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:113,columnNumber:11},void 0),$&&jsxDevRuntimeExports.jsxDEV("div",{className:"flex items-center gap-4 mt-4",children:[jsxDevRuntimeExports.jsxDEV("button",{onClick:y,disabled:C<=1,className:`w-10 h-10 rounded-full flex items-center justify-center ${C<=1?"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 hover:bg-blue-200 dark:hover:bg-blue-800/40"}`,"aria-label":"Previous page",children:jsxDevRuntimeExports.jsxDEV(FaArrowLeft,{},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:144,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:134,columnNumber:15},void 0),jsxDevRuntimeExports.jsxDEV("p",{className:"text-gray-700 dark:text-gray-300",children:["Page ",C," of ",$]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:147,columnNumber:15},void 0),jsxDevRuntimeExports.jsxDEV("button",{onClick:R,disabled:C>=$,className:`w-10 h-10 rounded-full flex items-center justify-center ${C>=$?"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 hover:bg-blue-200 dark:hover:bg-blue-800/40"}`,"aria-label":"Next page",children:jsxDevRuntimeExports.jsxDEV(FaArrowRight,{},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:161,columnNumber:17},void 0)},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:151,columnNumber:15},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:133,columnNumber:13},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:112,columnNumber:9},void 0)]},void 0,!0,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:92,columnNumber:7},void 0)},void 0,!1,{fileName:"C:/Users/rahul/OneDrive/Desktop/portfolio webite/client/src/pages/Resume.jsx",lineNumber:91,columnNumber:5},void 0)};export{Resume as default};
//# sourceMappingURL=Resume-CeKWRj3z.js.map
